<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Dates and Times</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="PLEAC-Clojure"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Numbers"
HREF="numbers.html"><LINK
REL="NEXT"
TITLE="Arrays"
HREF="arrays.html"><style type="text/css">td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
pre { line-height: 125%; }

  </style></head
><BODY TEXT="#cecece" BGCOLOR="#4f6f6f" LINK="#f5deb3" VLINK="#d5ae83"
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PLEAC-Clojure</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="numbers.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="arrays.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="DATESANDTIMES"
>3. Dates and Times</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN132"
>Introduction</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">;;------------------------------------</span>
<span class="c1">;; Use a calendar to compute year, month, day, hour, minute and second values.</span>

<span class="p">(</span><span class="nb">import </span><span class="o">&#39;</span><span class="p">(</span><span class="nf">java.util</span> <span class="nv">Calendar</span><span class="p">))</span>
<span class="p">(</span><span class="nb">import </span><span class="o">&#39;</span><span class="p">(</span><span class="nf">java.util</span> <span class="nv">GregorianCalendar</span><span class="p">))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">print-day-of-year</span> <span class="p">[]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">cal</span> <span class="p">(</span><span class="nf">GregorianCalendar.</span><span class="p">)]</span>
    <span class="p">(</span><span class="nf">printf</span> <span class="s">&quot;Today is day %d of the current year.\n&quot;</span>
            <span class="p">(</span><span class="nf">.get</span> <span class="nv">cal</span> <span class="nv">Calendar/DAY_OF_YEAR</span><span class="p">))))</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN135"
>Finding Today's Date</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">;;------------------------------------</span>
<span class="p">(</span><span class="nb">import </span><span class="o">&#39;</span><span class="p">(</span><span class="nf">java.util</span> <span class="nv">Calendar</span><span class="p">))</span>
<span class="p">(</span><span class="nb">import </span><span class="o">&#39;</span><span class="p">(</span><span class="nf">java.util</span> <span class="nv">GregorianCalendar</span><span class="p">))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">todays-date</span> <span class="p">[]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">cal</span> <span class="p">(</span><span class="nf">GregorianCalendar.</span><span class="p">)</span>
        <span class="nv">day</span> <span class="p">(</span><span class="nf">.get</span> <span class="nv">cal</span> <span class="nv">Calendar/DATE</span><span class="p">)</span>
        <span class="nv">month</span> <span class="p">(</span><span class="nf">.get</span> <span class="nv">cal</span> <span class="nv">Calendar/MONTH</span><span class="p">)</span>
        <span class="nv">year</span> <span class="p">(</span><span class="nf">.get</span> <span class="nv">cal</span> <span class="nv">Calendar/YEAR</span><span class="p">)]</span>
    <span class="p">[</span><span class="nv">day</span> <span class="nv">month</span> <span class="nv">year</span><span class="p">]))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">print-todays-date</span> <span class="p">[]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[[</span><span class="nv">day</span> <span class="nv">month</span> <span class="nv">year</span><span class="p">]</span> <span class="p">(</span><span class="nf">todays-date</span><span class="p">)]</span>
    <span class="p">(</span><span class="nf">printf</span> <span class="s">&quot;The current date is %d %02d %02d\n&quot;</span> <span class="nv">year</span> <span class="p">(</span><span class="nb">inc </span><span class="nv">month</span><span class="p">)</span> <span class="nv">day</span><span class="p">)))</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN138"
>Converting DMYHMS to Epoch Seconds</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">;;------------------------------------</span>
<span class="p">(</span><span class="nb">import </span><span class="o">&#39;</span><span class="p">(</span><span class="nf">java.util</span> <span class="nv">Calendar</span><span class="p">))</span>
<span class="p">(</span><span class="nb">import </span><span class="o">&#39;</span><span class="p">(</span><span class="nf">java.util</span> <span class="nv">TimeZone</span><span class="p">))</span>
<span class="p">(</span><span class="nb">import </span><span class="o">&#39;</span><span class="p">(</span><span class="nf">java.util</span> <span class="nv">GregorianCalendar</span><span class="p">))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">epoch-seconds-of-dmyhms</span> <span class="p">[</span><span class="nv">tz</span> <span class="nv">day</span> <span class="nv">month</span> <span class="nv">year</span> <span class="nv">hour</span> <span class="nv">minute</span> <span class="nv">second</span><span class="p">]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">cal</span> <span class="p">(</span><span class="nf">GregorianCalendar.</span><span class="p">)</span>
        <span class="nv">zone</span> <span class="p">(</span><span class="nf">TimeZone/getTimeZone</span> <span class="nv">tz</span><span class="p">)]</span>
    <span class="p">(</span><span class="nf">do</span>
      <span class="p">(</span><span class="nf">.setTimeZone</span> <span class="nv">cal</span> <span class="nv">zone</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">.set</span> <span class="nv">cal</span> <span class="nv">Calendar/DAY_OF_MONTH</span> <span class="nv">day</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">.set</span> <span class="nv">cal</span> <span class="nv">Calendar/MONTH</span> <span class="nv">month</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">.set</span> <span class="nv">cal</span> <span class="nv">Calendar/YEAR</span> <span class="nv">year</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">.set</span> <span class="nv">cal</span> <span class="nv">Calendar/HOUR_OF_DAY</span> <span class="nv">hour</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">.set</span> <span class="nv">cal</span> <span class="nv">Calendar/MINUTE</span> <span class="nv">minute</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">.set</span> <span class="nv">cal</span> <span class="nv">Calendar/SECOND</span> <span class="nv">second</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">int </span><span class="p">(</span><span class="nb">/ </span><span class="p">(</span><span class="nf">.getTime</span> <span class="p">(</span><span class="nf">.getTime</span> <span class="nv">cal</span><span class="p">))</span> <span class="mi">1000</span><span class="p">)))))</span>

<span class="p">(</span><span class="nf">epoch-seconds-of-dmyhms</span> <span class="s">&quot;UTC&quot;</span> <span class="mi">4</span> <span class="mi">10</span> <span class="mi">2011</span> <span class="mi">12</span> <span class="mi">30</span> <span class="mi">55</span><span class="p">)</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN141"
>Converting Epoch Seconds to DMYHMS</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">;;------------------------------------</span>
<span class="p">(</span><span class="nb">import </span><span class="o">&#39;</span><span class="p">(</span><span class="nf">java.util</span> <span class="nv">Calendar</span><span class="p">))</span>
<span class="p">(</span><span class="nb">import </span><span class="o">&#39;</span><span class="p">(</span><span class="nf">java.util</span> <span class="nv">Date</span><span class="p">))</span>
<span class="p">(</span><span class="nb">import </span><span class="o">&#39;</span><span class="p">(</span><span class="nf">java.util</span> <span class="nv">GregorianCalendar</span><span class="p">))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">dmyhms-of-epoch-seconds</span> <span class="p">[</span><span class="nv">seconds</span><span class="p">]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">cal</span> <span class="p">(</span><span class="nf">GregorianCalendar.</span><span class="p">)</span>
        <span class="nv">date</span> <span class="p">(</span><span class="nf">Date.</span> <span class="p">(</span><span class="nb">* </span><span class="nv">seconds</span> <span class="mi">1000</span><span class="p">))]</span>
    <span class="p">(</span><span class="nf">do</span>
      <span class="p">(</span><span class="nf">.setTime</span> <span class="nv">cal</span> <span class="nv">date</span><span class="p">)</span>
      <span class="p">[(</span><span class="nf">.get</span> <span class="nv">cal</span> <span class="nv">Calendar/DAY_OF_MONTH</span><span class="p">)</span>
       <span class="p">(</span><span class="nf">.get</span> <span class="nv">cal</span> <span class="nv">Calendar/MONTH</span><span class="p">)</span>
       <span class="p">(</span><span class="nf">.get</span> <span class="nv">cal</span> <span class="nv">Calendar/YEAR</span><span class="p">)</span>
       <span class="p">(</span><span class="nf">.get</span> <span class="nv">cal</span> <span class="nv">Calendar/HOUR_OF_DAY</span><span class="p">)</span>
       <span class="p">(</span><span class="nf">.get</span> <span class="nv">cal</span> <span class="nv">Calendar/MINUTE</span><span class="p">)</span>
       <span class="p">(</span><span class="nf">.get</span> <span class="nv">cal</span> <span class="nv">Calendar/SECOND</span><span class="p">)])))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">print-dmyhms-of-epoch-seconds</span> <span class="p">[</span><span class="nv">seconds</span><span class="p">]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[[</span><span class="nv">day</span> <span class="nv">month</span> <span class="nv">year</span> <span class="nv">hour</span> <span class="nv">minute</span> <span class="nv">seconds</span><span class="p">]</span> <span class="p">(</span><span class="nf">dmyhms-of-epoch-seconds</span> <span class="nv">seconds</span><span class="p">)]</span>
    <span class="p">(</span><span class="nf">printf</span> <span class="s">&quot;%02d-%02d-%d %02d:%02d:%02d\n&quot;</span>
            <span class="nv">day</span> <span class="p">(</span><span class="nb">inc </span><span class="nv">month</span><span class="p">)</span> <span class="nv">year</span> <span class="nv">hour</span> <span class="nv">minute</span> <span class="nv">seconds</span><span class="p">)))</span>

<span class="c1">;; 3.4 Adding or Subtracting from a Date</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN144"
>Adding to or Subtracting from a Date</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN147"
>Difference of Two Dates</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN150"
>Day in a Week/Month/Year or Week Number</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN153"
>Parsing Dates and Times from Strings</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN156"
>Printing a Date</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN159"
>High-Resolution Timers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN162"
>Short Sleeps</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN165"
>Program: hopdelta</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="numbers.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="arrays.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Numbers</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Arrays</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>