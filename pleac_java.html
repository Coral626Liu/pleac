<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
  <title></title>
  <meta http-equiv="content-type" content="text/html; charset=latin1">
  <style type="text/css">
td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
pre { line-height: 125%; }
body .hll { background-color: #ffffcc }
body  { background: #f8f8f8; }
body .c { color: #408080; font-style: italic } /* Comment */
body .err { border: 1px solid #FF0000 } /* Error */
body .k { color: #008000; font-weight: bold } /* Keyword */
body .o { color: #666666 } /* Operator */
body .cm { color: #408080; font-style: italic } /* Comment.Multiline */
body .cp { color: #BC7A00 } /* Comment.Preproc */
body .c1 { color: #408080; font-style: italic } /* Comment.Single */
body .cs { color: #408080; font-style: italic } /* Comment.Special */
body .gd { color: #A00000 } /* Generic.Deleted */
body .ge { font-style: italic } /* Generic.Emph */
body .gr { color: #FF0000 } /* Generic.Error */
body .gh { color: #000080; font-weight: bold } /* Generic.Heading */
body .gi { color: #00A000 } /* Generic.Inserted */
body .go { color: #888888 } /* Generic.Output */
body .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
body .gs { font-weight: bold } /* Generic.Strong */
body .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
body .gt { color: #0044DD } /* Generic.Traceback */
body .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
body .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
body .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
body .kp { color: #008000 } /* Keyword.Pseudo */
body .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
body .kt { color: #B00040 } /* Keyword.Type */
body .m { color: #666666 } /* Literal.Number */
body .s { color: #BA2121 } /* Literal.String */
body .na { color: #7D9029 } /* Name.Attribute */
body .nb { color: #008000 } /* Name.Builtin */
body .nc { color: #0000FF; font-weight: bold } /* Name.Class */
body .no { color: #880000 } /* Name.Constant */
body .nd { color: #AA22FF } /* Name.Decorator */
body .ni { color: #999999; font-weight: bold } /* Name.Entity */
body .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
body .nf { color: #0000FF } /* Name.Function */
body .nl { color: #A0A000 } /* Name.Label */
body .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
body .nt { color: #008000; font-weight: bold } /* Name.Tag */
body .nv { color: #19177C } /* Name.Variable */
body .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
body .w { color: #bbbbbb } /* Text.Whitespace */
body .mf { color: #666666 } /* Literal.Number.Float */
body .mh { color: #666666 } /* Literal.Number.Hex */
body .mi { color: #666666 } /* Literal.Number.Integer */
body .mo { color: #666666 } /* Literal.Number.Oct */
body .sb { color: #BA2121 } /* Literal.String.Backtick */
body .sc { color: #BA2121 } /* Literal.String.Char */
body .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
body .s2 { color: #BA2121 } /* Literal.String.Double */
body .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
body .sh { color: #BA2121 } /* Literal.String.Heredoc */
body .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
body .sx { color: #008000 } /* Literal.String.Other */
body .sr { color: #BB6688 } /* Literal.String.Regex */
body .s1 { color: #BA2121 } /* Literal.String.Single */
body .ss { color: #19177C } /* Literal.String.Symbol */
body .bp { color: #008000 } /* Name.Builtin.Pseudo */
body .vc { color: #19177C } /* Name.Variable.Class */
body .vg { color: #19177C } /* Name.Variable.Global */
body .vi { color: #19177C } /* Name.Variable.Instance */
body .il { color: #666666 } /* Literal.Number.Integer.Long */

  </style>
</head>
<body>
<h2></h2>

<div class="highlight"><pre><span class="c1">// -*- java -*-</span>
<span class="c1">// @@PLEAC@@_NAME</span>
<span class="c1">// @@SKIP@@ Java</span>

<span class="c1">// @@PLEAC@@_WEB</span>
<span class="c1">// @@SKIP@@ http://java.sun.com</span>

<span class="c1">// @@PLEAC@@_1.0</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// character are simple values, and use single quotes are delimiters</span>
<span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="sc">&#39;\n&#39;</span><span class="o">;</span>                           <span class="c1">// a newline character</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// strings are immutable objects, and use double quotes as delimiters</span>
<span class="n">String</span> <span class="n">s1</span> <span class="o">=</span> <span class="s">&quot;\n&quot;</span><span class="o">;</span>                    <span class="c1">// a string containing only a newline</span>
<span class="n">String</span> <span class="n">s2</span> <span class="o">=</span> <span class="s">&quot;Jon \&quot;Maddog\&quot; Orwant&quot;</span><span class="o">;</span> <span class="c1">// a string containing double quotes</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// use concatenation for multiline string declation</span>
<span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;This is a multiline string declaration &quot;</span>
         <span class="o">+</span> <span class="s">&quot;using the concatenation operator &quot;</span>
         <span class="o">+</span> <span class="s">&quot;to append separate parts.&quot;</span><span class="o">;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_1.1</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// accessing substrings</span>
<span class="n">String</span> <span class="n">s1</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">start</span><span class="o">,</span> <span class="n">end</span><span class="o">);</span>
<span class="n">String</span> <span class="n">s2</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">start</span><span class="o">);</span>
	    
<span class="c1">// String instances are immutable character sequences</span>
<span class="c1">// recreating them on the fly is unefficient</span>
<span class="n">String</span> <span class="n">variableString</span> <span class="o">=</span> <span class="n">data</span><span class="o">;</span>
<span class="n">variableString</span> <span class="o">=</span> <span class="n">variableString</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">start</span><span class="o">)</span> <span class="o">+</span> <span class="n">newMiddle</span>
    <span class="o">+</span> <span class="n">variableString</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">start</span><span class="o">);</span>
<span class="n">variableString</span> <span class="o">=</span> <span class="n">variableString</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">start</span><span class="o">)</span> <span class="o">+</span> <span class="n">newTail</span><span class="o">;</span>

<span class="c1">// StringBuffer instances are mutable character sequences</span>
<span class="c1">// they provides efficient modification methods</span>
<span class="n">StringBuffer</span> <span class="n">variableStringBuffer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
<span class="n">variableStringBuffer</span><span class="o">.</span><span class="na">replace</span><span class="o">(</span><span class="n">start</span><span class="o">,</span> <span class="n">end</span><span class="o">,</span> <span class="n">newMiddle</span><span class="o">);</span>
<span class="n">variableStringBuffer</span><span class="o">.</span><span class="na">replace</span><span class="o">(</span><span class="n">start</span><span class="o">,</span> <span class="n">variableStringBuffer</span><span class="o">.</span><span class="na">length</span><span class="o">(),</span> <span class="n">newTail</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// No real pack/unpack equivalent exist in Java. Exemples here use a custom</span>
<span class="c1">// implementation to split an original string into chunks of specified length</span>

<span class="c1">// get a 5-characters string, skip 3, then grab 2 8-characters strings,</span>
<span class="c1">// then the rest</span>
<span class="k">try</span> <span class="o">{</span> 
    <span class="n">String</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="n">unpack</span><span class="o">(</span><span class="s">&quot;A5 x3 A8 A8 A*&quot;</span><span class="o">,</span> <span class="n">data</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ParseException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{}</span>

<span class="c1">// split at five characters boundaries</span>
<span class="k">try</span> <span class="o">{</span> 
    <span class="n">String</span><span class="o">[]</span> <span class="n">fivers</span> <span class="o">=</span> <span class="n">unpack</span><span class="o">(</span><span class="n">aggregate</span><span class="o">(</span><span class="s">&quot;A5 &quot;</span><span class="o">,</span> <span class="n">data</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">/</span> <span class="mi">5</span><span class="o">),</span> <span class="n">data</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ParseException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{}</span>

<span class="c1">// chop string into unique character strings</span>
<span class="k">try</span> <span class="o">{</span> 
    <span class="n">String</span><span class="o">[]</span> <span class="n">chars</span> <span class="o">=</span> <span class="n">unpack</span><span class="o">(</span><span class="n">aggregate</span><span class="o">(</span><span class="s">&quot;A1 &quot;</span><span class="o">,</span> <span class="n">data</span><span class="o">.</span><span class="na">length</span><span class="o">()),</span> <span class="n">data</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ParseException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{}</span>

<span class="cm">/**</span>
<span class="cm"> * Unpacks a string into a string array following a given format.</span>
<span class="cm"> */</span>
<span class="n">String</span><span class="o">[]</span> <span class="nf">unpack</span><span class="o">(</span><span class="n">String</span> <span class="n">format</span><span class="o">,</span> <span class="n">String</span> <span class="n">data</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ParseException</span> <span class="o">{</span>
    <span class="n">ArrayList</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">formatOffset</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">dataOffset</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">minDataOffset</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">maxDataOffset</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    
    <span class="n">StringTokenizer</span> <span class="n">tokenizer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringTokenizer</span><span class="o">(</span><span class="n">format</span><span class="o">);</span>
    <span class="k">while</span> <span class="o">(</span><span class="n">tokenizer</span><span class="o">.</span><span class="na">hasMoreTokens</span><span class="o">())</span> <span class="o">{</span>
	<span class="n">String</span> <span class="n">token</span> <span class="o">=</span> <span class="n">tokenizer</span><span class="o">.</span><span class="na">nextToken</span><span class="o">();</span>
	<span class="kt">int</span> <span class="n">tokenLen</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
	
	<span class="c1">// count determination</span>
	<span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
	<span class="k">if</span> <span class="o">(</span><span class="n">tokenLen</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
	    <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
	<span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">token</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span><span class="o">)</span>
	    <span class="n">count</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
	<span class="k">else</span> <span class="o">{</span>
	    <span class="k">try</span> <span class="o">{</span>
		<span class="n">count</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="n">token</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">)).</span><span class="na">intValue</span><span class="o">();</span>
	    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">NumberFormatException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">throw</span> <span class="k">new</span> <span class="nf">ParseException</span><span class="o">(</span><span class="s">&quot;Unknown count token&quot;</span><span class="o">,</span> <span class="n">formatOffset</span><span class="o">);</span>
	    <span class="o">}</span>
	<span class="o">}</span>
	
	<span class="c1">// action determination</span>
	<span class="kt">char</span> <span class="n">action</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
	<span class="k">switch</span> <span class="o">(</span><span class="n">action</span><span class="o">)</span> <span class="o">{</span>
	    <span class="k">case</span> <span class="sc">&#39;A&#39;</span><span class="o">:</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">count</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
		    <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="o">(</span><span class="n">dataOffset</span> <span class="o">&lt;</span> <span class="n">maxDataOffset</span><span class="o">)</span> <span class="o">?</span>
			<span class="n">dataOffset</span> <span class="o">:</span> <span class="n">maxDataOffset</span><span class="o">;</span>
		    <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">start</span><span class="o">));</span>
		    <span class="n">dataOffset</span> <span class="o">=</span> <span class="n">maxDataOffset</span><span class="o">;</span>
		<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
		    <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="o">(</span><span class="n">dataOffset</span> <span class="o">&lt;</span> <span class="n">maxDataOffset</span><span class="o">)</span> <span class="o">?</span>
			<span class="n">dataOffset</span> <span class="o">:</span> <span class="n">maxDataOffset</span><span class="o">;</span>
		    <span class="kt">int</span> <span class="n">end</span> <span class="o">=</span> <span class="o">(</span><span class="n">dataOffset</span> <span class="o">+</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="n">maxDataOffset</span><span class="o">)</span> <span class="o">?</span>
			<span class="n">dataOffset</span> <span class="o">+</span> <span class="n">count</span> <span class="o">:</span> <span class="n">maxDataOffset</span><span class="o">;</span>
		    <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">start</span><span class="o">,</span> <span class="n">end</span><span class="o">));</span>
		    <span class="n">dataOffset</span> <span class="o">+=</span> <span class="n">count</span><span class="o">;</span>
		<span class="o">}</span>
		<span class="k">break</span><span class="o">;</span>
	    <span class="k">case</span> <span class="sc">&#39;x&#39;</span><span class="o">:</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">count</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span>
		    <span class="n">dataOffset</span> <span class="o">=</span> <span class="n">maxDataOffset</span><span class="o">;</span>
		<span class="k">else</span>
		    <span class="n">dataOffset</span> <span class="o">+=</span> <span class="n">count</span><span class="o">;</span>
		<span class="k">break</span><span class="o">;</span>
	    <span class="k">case</span> <span class="sc">&#39;X&#39;</span><span class="o">:</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">count</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span>
		    <span class="n">dataOffset</span> <span class="o">=</span> <span class="n">minDataOffset</span><span class="o">;</span>
		<span class="k">else</span>
		    <span class="n">dataOffset</span> <span class="o">-=</span> <span class="n">count</span><span class="o">;</span>
		<span class="k">break</span><span class="o">;</span>
	    <span class="k">default</span><span class="o">:</span>
		<span class="k">throw</span> <span class="k">new</span> <span class="nf">ParseException</span><span class="o">(</span><span class="s">&quot;Unknown action token&quot;</span><span class="o">,</span> <span class="n">formatOffset</span><span class="o">);</span>
	<span class="o">}</span>
	<span class="n">formatOffset</span> <span class="o">+=</span> <span class="n">tokenLen</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="o">(</span><span class="n">String</span><span class="o">[])</span> <span class="n">result</span><span class="o">.</span><span class="na">toArray</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">[</span><span class="n">result</span><span class="o">.</span><span class="na">size</span><span class="o">()]);</span>
<span class="o">}</span>

<span class="cm">/**</span>
<span class="cm"> * Aggregates repetitly a basic pattern.</span>
<span class="cm"> */</span>
<span class="n">String</span> <span class="nf">aggregate</span><span class="o">(</span><span class="n">String</span> <span class="n">pattern</span><span class="o">,</span> <span class="kt">int</span> <span class="n">count</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">StringBuffer</span> <span class="n">buffer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">count</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
	<span class="n">buffer</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">pattern</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">buffer</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="n">data</span> <span class="o">=</span> <span class="s">&quot;This is what you have&quot;</span><span class="o">;</span>
<span class="c1">// forward    +012345678901234567890 </span>
<span class="c1">// backward    109876543210987654321-</span>

<span class="c1">// backward indexing doesn&#39;t exist, but can easily be translated into forward</span>
<span class="c1">// indexing: forward = data.length() - backward;</span>

<span class="n">String</span> <span class="n">first</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
<span class="c1">// &quot;T&quot;</span>
<span class="n">String</span> <span class="n">start</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">);</span>
<span class="c1">// &quot;is&quot;</span>
<span class="n">String</span> <span class="n">rest</span>  <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">13</span><span class="o">);</span>
<span class="c1">// &quot;you have&quot;</span>
<span class="n">String</span> <span class="n">last</span>  <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
<span class="c1">// &quot;e&quot;</span>
<span class="n">String</span> <span class="n">end</span>   <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="mi">4</span><span class="o">);</span>
<span class="c1">// &quot;have&quot;</span>
<span class="n">String</span> <span class="n">piece</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="mi">8</span><span class="o">,</span> <span class="n">data</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="mi">5</span><span class="o">);</span>
<span class="c1">// &quot;you&quot;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="n">data</span> <span class="o">=</span> <span class="s">&quot;This is what you have&quot;</span><span class="o">;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">5</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;wasn&#39;t&quot;</span> <span class="o">+</span> <span class="n">data</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">7</span><span class="o">);</span>
<span class="c1">// &quot;This wasn&#39;t what you have&quot;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">data</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="mi">12</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;ondrous&quot;</span><span class="o">;</span>
<span class="c1">// &quot;This wasn&#39;t wondrous&quot;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
<span class="c1">// &quot;his wasn&#39;t wondrous&quot;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">data</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="mi">10</span><span class="o">);</span>
<span class="c1">// &quot;his wasn&#39;&quot;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kn">import</span> <span class="nn">org.apache.oro.text.perl.Perl5Util</span><span class="o">;</span>

<span class="n">Perl5Util</span> <span class="n">util</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Perl5Util</span><span class="o">();</span>
<span class="c1">// you can test substrings with match() method</span>
<span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/pattern/&quot;</span><span class="o">,</span> <span class="n">data</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="mi">10</span><span class="o">)))</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Pattern matches in last 10 characters&quot;</span><span class="o">);</span>

<span class="c1">// substitute &quot;at&quot; for &quot;is&quot;, restricted to first five characters</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/is/at/g&quot;</span><span class="o">,</span> <span class="n">data</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">5</span><span class="o">))</span> <span class="o">+</span> <span class="n">data</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// exchange the first and last letters in a string</span>
<span class="n">String</span> <span class="n">data</span> <span class="o">=</span> <span class="s">&quot;make a hat&quot;</span><span class="o">;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="n">data</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">data</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span>
    <span class="o">+</span> <span class="n">data</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span> <span class="c1">// &quot;take a ham&quot;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// extract column with unpack</span>
<span class="n">String</span> <span class="n">data</span> <span class="o">=</span> <span class="s">&quot;To be or not to be&quot;</span><span class="o">;</span>

<span class="c1">// skip 6, grab 6</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">String</span><span class="o">[]</span> <span class="n">a1</span> <span class="o">=</span> <span class="n">unpack</span><span class="o">(</span><span class="s">&quot;x6 A6&quot;</span><span class="o">,</span> <span class="n">data</span><span class="o">);</span>       <span class="c1">// {&quot;or not&quot;}</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ParseException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{}</span>

<span class="c1">// forward 6, grab 2, backward 5, grab 2</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">String</span><span class="o">[]</span> <span class="n">a2</span> <span class="o">=</span> <span class="n">unpack</span><span class="o">(</span><span class="s">&quot;x6 A2 X5 A2&quot;</span><span class="o">,</span> <span class="n">data</span><span class="o">);</span> <span class="c1">// {&quot;or&quot;, &quot;be&quot;}</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ParseException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="cm">/**</span>
<span class="cm"> * Creates a format suitable for unpack method.</span>
<span class="cm"> */</span>
<span class="n">String</span> <span class="nf">cut2fmt</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">positions</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">StringBuffer</span> <span class="n">sb</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">positions</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;A&quot;</span><span class="o">);</span>
        <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">positions</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">-</span> <span class="n">end</span><span class="o">);</span>
        <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">);</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">positions</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
    <span class="o">}</span>
    <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;A*&quot;</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">sb</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
<span class="o">}</span>

<span class="n">String</span> <span class="n">fmt</span> <span class="o">=</span> <span class="n">cut2fmt</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]</span> <span class="o">{</span><span class="mi">8</span><span class="o">,</span> <span class="mi">14</span><span class="o">,</span> <span class="mi">20</span><span class="o">,</span> <span class="mi">26</span><span class="o">,</span> <span class="mi">30</span><span class="o">});</span> <span class="c1">// &quot;A7 A6 A6 A6 A4 A*&quot;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_1.2</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// truth only concern boolean values</span>

<span class="c1">// use b if b is true, else c</span>
<span class="kt">boolean</span>  <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">;</span>
<span class="c1">// [..]</span>
<span class="kt">boolean</span> <span class="n">a</span> <span class="o">=</span> <span class="o">(</span><span class="n">b</span> <span class="o">||</span> <span class="n">c</span><span class="o">);</span>              

<span class="c1">// set x to y unless x is already true</span>
<span class="kt">boolean</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">;</span>
<span class="c1">// [..]</span>
<span class="n">x</span> <span class="o">=</span> <span class="o">(</span><span class="n">x</span> <span class="o">||</span> <span class="n">y</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// other types must test default value</span>
<span class="c1">// only instance variables have default values, depending of their type:</span>
<span class="c1">// object -&gt; null</span>
<span class="c1">// int -&gt; 0</span>
<span class="c1">// char -&gt; ?</span>
<span class="c1">// boolean -&gt; ?</span>
<span class="c1">// local variables must always be explicitly initialised</span>

<span class="c1">// creating a new variable: ternary operator</span>
<span class="c1">//use b if b is not null, else c</span>
<span class="n">Object</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">;</span>
<span class="c1">// [..]</span>
<span class="n">Object</span> <span class="n">a</span> <span class="o">=</span> <span class="o">(</span><span class="n">b</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="n">b</span> <span class="o">:</span> <span class="n">c</span><span class="o">;</span>

<span class="c1">// reallocating a variable: direct test</span>
<span class="c1">// set x to y unless x is already true</span>
<span class="n">Object</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">;</span>
<span class="c1">// [..]</span>
<span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// strings are objects, so you must use the ternary operator</span>
<span class="n">String</span> <span class="n">foo</span> <span class="o">=</span> <span class="o">(</span><span class="n">bar</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="n">bar</span> <span class="o">:</span> <span class="s">&quot;DEFAULT VALUE&quot;</span><span class="o">;</span>
<span class="c1">// you may also consider the empty string case</span>
<span class="c1">// you must first test for nullity, to prevent a potential NullPointerException</span>
<span class="n">String</span> <span class="n">foo</span> <span class="o">=</span> <span class="o">((</span><span class="n">bar</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">bar</span><span class="o">.</span><span class="na">length</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">))</span> <span class="o">?</span> <span class="n">bar</span> <span class="o">:</span> <span class="s">&quot;DEFAULT VALUE&quot;</span><span class="o">;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="c1">// lazy evaluation prevents various exceptions to occurs</span>
<span class="n">String</span> <span class="n">dir</span> <span class="o">=</span> <span class="o">((</span><span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">&gt;</span> <span class="n">index</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="n">index</span><span class="o">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
    <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="n">index</span><span class="o">].</span><span class="na">length</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">))</span> <span class="o">?</span> <span class="n">args</span><span class="o">[</span><span class="n">index</span><span class="o">]</span> <span class="o">:</span> <span class="s">&quot;/tmp&quot;</span><span class="o">;</span>
<span class="n">index</span><span class="o">++;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="c1">// lazy evaluation prevents various exceptions to occurs</span>
<span class="n">String</span> <span class="n">dir</span> <span class="o">=</span> <span class="o">((</span><span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">&gt;</span> <span class="n">index</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="n">index</span><span class="o">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
    <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="n">index</span><span class="o">].</span><span class="na">length</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">))</span> <span class="o">?</span> <span class="n">args</span><span class="o">[</span><span class="n">index</span><span class="o">++]</span> <span class="o">:</span> <span class="s">&quot;/tmp&quot;</span><span class="o">;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="n">dir</span> <span class="o">=</span> <span class="o">((</span><span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">))</span> <span class="o">?</span> <span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">:</span> <span class="s">&quot;/tmp&quot;</span><span class="o">;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// Collection contains only objects, so values must be wrapped</span>
<span class="n">String</span> <span class="n">key</span> <span class="o">=</span> <span class="o">(</span><span class="n">shell</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="n">shell</span> <span class="o">:</span> <span class="s">&quot;/bin/sh&quot;</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="k">if</span> <span class="o">(</span><span class="n">count</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">key</span><span class="o">))</span>
    <span class="n">value</span> <span class="o">=</span> <span class="o">((</span><span class="n">Integer</span><span class="o">)</span> <span class="n">count</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">)).</span><span class="na">intValue</span><span class="o">();</span>
<span class="n">count</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(++</span><span class="n">value</span><span class="o">));</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// chained conditional allocations can test preceding allocation value</span>

<span class="c1">// find the user name on Unix systems</span>
<span class="n">String</span> <span class="n">user</span><span class="o">;</span>
<span class="n">Properties</span> <span class="n">environment</span> <span class="o">=</span> <span class="n">getEnvironment</span><span class="o">();</span>
<span class="kt">int</span> <span class="n">UID</span> <span class="o">=</span> <span class="n">getUID</span><span class="o">();</span>
<span class="k">if</span> <span class="o">((</span><span class="n">user</span> <span class="o">=</span> <span class="n">environment</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&quot;USER&quot;</span><span class="o">))</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
    <span class="k">if</span> <span class="o">((</span><span class="n">user</span> <span class="o">=</span> <span class="n">environment</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&quot;LOGNAME&quot;</span><span class="o">))</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="k">if</span> <span class="o">((</span><span class="n">user</span> <span class="o">=</span> <span class="n">getLogin</span><span class="o">())</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
            <span class="k">if</span> <span class="o">((</span><span class="n">user</span> <span class="o">=</span> <span class="n">getPWUID</span><span class="o">(</span><span class="n">UID</span><span class="o">)[</span><span class="mi">0</span><span class="o">])</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
                <span class="n">user</span> <span class="o">=</span> <span class="s">&quot;Unknown uid number &quot;</span> <span class="o">+</span> <span class="n">UID</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> * Returns current environment.</span>
<span class="cm"> */</span>
<span class="n">Properties</span> <span class="nf">getEnvironment</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Properties</span> <span class="n">environment</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Properties</span><span class="o">();</span>
    <span class="k">try</span> <span class="o">{</span>
	<span class="n">Process</span> <span class="n">process</span> <span class="o">=</span> <span class="n">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">exec</span><span class="o">(</span><span class="s">&quot;env&quot;</span><span class="o">);</span>
	<span class="n">BufferedReader</span> <span class="n">input</span> <span class="o">=</span>
	    <span class="k">new</span> <span class="nf">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">process</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
	<span class="n">String</span> <span class="n">line</span><span class="o">;</span>
	<span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
	    <span class="kt">int</span> <span class="n">limit</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="sc">&#39;=&#39;</span><span class="o">);</span>
	    <span class="n">String</span> <span class="n">key</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">limit</span><span class="o">);</span>
	    <span class="n">String</span> <span class="n">value</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">limit</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
	    <span class="n">environment</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span>
	<span class="o">}</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
	<span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Error occured while processing environment&quot;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">environment</span><span class="o">;</span>
<span class="o">}</span>

<span class="cm">/**</span>
<span class="cm"> * Returns current login.</span>
<span class="cm"> */</span>
<span class="n">String</span> <span class="nf">getLogin</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">login</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
	<span class="n">Process</span> <span class="n">process</span> <span class="o">=</span> <span class="n">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">exec</span><span class="o">(</span><span class="s">&quot;cat /etc/utmp&quot;</span><span class="o">);</span>
	<span class="n">BufferedReader</span> <span class="n">input</span> <span class="o">=</span> 
	    <span class="k">new</span> <span class="nf">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">process</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
	<span class="n">login</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
	<span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Error occured while processing login&quot;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">login</span><span class="o">;</span>
<span class="o">}</span>

<span class="cm">/**</span>
<span class="cm"> * Returns current UID.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="nf">getUID</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">uid</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
	<span class="n">Process</span> <span class="n">process</span> <span class="o">=</span> <span class="n">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">exec</span><span class="o">(</span><span class="s">&quot;id -u&quot;</span><span class="o">);</span>
	<span class="n">BufferedReader</span> <span class="n">input</span> <span class="o">=</span>
	    <span class="k">new</span> <span class="nf">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">process</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
	<span class="n">uid</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">()).</span><span class="na">intValue</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
	<span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Error occured while processing login&quot;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">uid</span><span class="o">;</span>
<span class="o">}</span>

<span class="cm">/**</span>
<span class="cm"> * Returns /etc/passwd line relative to given UID.</span>
<span class="cm"> */</span>
<span class="n">String</span><span class="o">[]</span> <span class="nf">getPWUID</span><span class="o">(</span><span class="kt">int</span> <span class="n">uid</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ArrayList</span> <span class="n">pwuid</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">();</span>
    <span class="k">try</span> <span class="o">{</span>
	<span class="n">Process</span> <span class="n">process</span> <span class="o">=</span>
	    <span class="n">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">exec</span><span class="o">(</span><span class="s">&quot;grep ^[^:]*:[^:]*:&quot;</span> <span class="o">+</span> <span class="n">uid</span> <span class="o">+</span> <span class="s">&quot; /etc/passwd&quot;</span><span class="o">);</span>
	<span class="n">BufferedReader</span> <span class="n">input</span> <span class="o">=</span>
	    <span class="k">new</span> <span class="nf">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">process</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
	<span class="n">StringTokenizer</span> <span class="n">tokenizer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringTokenizer</span><span class="o">(</span><span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">(),</span> <span class="s">&quot;:&quot;</span><span class="o">);</span>
	<span class="k">while</span> <span class="o">(</span><span class="n">tokenizer</span><span class="o">.</span><span class="na">hasMoreTokens</span><span class="o">())</span>
	    <span class="n">pwuid</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">tokenizer</span><span class="o">.</span><span class="na">nextToken</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
	<span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Error occured while processing login&quot;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="o">(</span><span class="n">String</span><span class="o">[])</span> <span class="n">pwuid</span><span class="o">.</span><span class="na">toArray</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">[</span><span class="n">pwuid</span><span class="o">.</span><span class="na">size</span><span class="o">()]);</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// test for nullity then for emptyness</span>
<span class="k">if</span> <span class="o">((</span><span class="n">startingPoint</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="n">startingPoint</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">))</span>
    <span class="n">startingPoint</span> <span class="o">=</span> <span class="s">&quot;Greenwich&quot;</span><span class="o">;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">Object</span><span class="o">[]</span> <span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">;</span>

<span class="c1">// copy only if empty</span>
<span class="c1">// test for nullity then for emptyness</span>
<span class="k">if</span> <span class="o">((</span><span class="n">a</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">length</span> <span class="o">==</span> <span class="mi">0</span><span class="o">))</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">b</span><span class="o">;</span>

<span class="c1">// assign b if nonempty, else c</span>
<span class="c1">// test for nullity then for emptyness</span>
<span class="n">a</span> <span class="o">=</span> <span class="o">((</span><span class="n">b</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">b</span><span class="o">.</span><span class="na">length</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">))</span> <span class="o">?</span> <span class="n">b</span> <span class="o">:</span> <span class="n">c</span><span class="o">;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_1.3</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// Not possible in Java</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_1.4</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// char and int are interchangables, apart precision difference</span>
<span class="c1">// char use 16 bits while int use 32, requiring a cast from int to char</span>
<span class="kt">int</span> <span class="n">num</span><span class="o">;</span>
<span class="kt">char</span> <span class="n">ch</span><span class="o">;</span>
<span class="n">num</span> <span class="o">=</span> <span class="n">ch</span><span class="o">;</span>        <span class="c1">// no problem </span>
<span class="n">ch</span> <span class="o">=</span> <span class="o">(</span><span class="kt">char</span><span class="o">)</span> <span class="n">num</span><span class="o">;</span> <span class="c1">// needs an explicit cast</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Number &quot;</span> <span class="o">+</span> <span class="n">num</span> <span class="o">+</span> <span class="s">&quot; is character &quot;</span> <span class="o">+</span> <span class="o">(</span><span class="kt">char</span><span class="o">)</span> <span class="n">num</span><span class="o">);</span>
<span class="c1">// Number 101 is character e</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Character &quot;</span> <span class="o">+</span> <span class="n">ch</span> <span class="o">+</span> <span class="s">&quot; is number &quot;</span> <span class="o">+</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">ch</span><span class="o">);</span>
<span class="c1">// Character e is number 101</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">char</span><span class="o">[]</span> <span class="n">ascii</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">();</span>
<span class="n">String</span> <span class="n">string</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">ascii</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">int</span> <span class="n">value</span>      <span class="o">=</span> <span class="sc">&#39;e&#39;</span><span class="o">;</span> <span class="c1">// now 101</span>
<span class="kt">char</span> <span class="n">character</span> <span class="o">=</span> <span class="mi">101</span><span class="o">;</span> <span class="c1">// now &quot;e&quot;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Number &quot;</span> <span class="o">+</span> <span class="mi">101</span> <span class="o">+</span> <span class="s">&quot; is character &quot;</span> <span class="o">+</span> <span class="o">(</span><span class="kt">char</span><span class="o">)</span> <span class="mi">101</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">char</span><span class="o">[]</span> <span class="n">ascii</span> <span class="o">=</span> <span class="s">&quot;sample&quot;</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">();</span>
<span class="c1">// {115, 97, 109, 112, 108, 101}</span>
<span class="n">String</span> <span class="n">s1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">ascii</span><span class="o">);</span>
<span class="c1">// &quot;sample&quot;</span>
<span class="n">String</span> <span class="n">s2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="k">new</span> <span class="kt">char</span><span class="o">[]</span> <span class="o">{</span><span class="mi">115</span><span class="o">,</span> <span class="mi">97</span><span class="o">,</span> <span class="mi">109</span><span class="o">,</span> <span class="mi">112</span><span class="o">,</span> <span class="mi">108</span><span class="o">,</span> <span class="mi">101</span><span class="o">});</span>
<span class="c1">// &quot;sample&quot;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="n">hal</span> <span class="o">=</span> <span class="s">&quot;HAL&quot;</span><span class="o">;</span>
<span class="kt">char</span><span class="o">[]</span> <span class="n">ascii</span> <span class="o">=</span> <span class="n">hal</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">();</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">ascii</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
    <span class="n">ascii</span><span class="o">[</span><span class="n">i</span><span class="o">]++;</span>                 <span class="c1">// add one to each ASCII value</span>
<span class="n">String</span> <span class="n">ibm</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">ascii</span><span class="o">);</span> <span class="c1">// IBM</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_1.5</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// You can process a string either by character or by string element:</span>
<span class="c1">// using character is more efficient, as they are values</span>
<span class="c1">// using string allow to use object-based methods, as collections </span>

<span class="c1">// splitting a string into elementary characters</span>
<span class="kt">char</span><span class="o">[]</span> <span class="n">charArray</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">();</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
<span class="c1">// processing a string by elementary strings</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">size</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
    <span class="c1">// do something with s</span>
<span class="o">}</span>
<span class="c1">// processing a string by elementary characters</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">size</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="kt">char</span> <span class="n">ch</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
    <span class="c1">// do something with s</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// with an array, using chars</span>
<span class="n">String</span> <span class="n">string</span> <span class="o">=</span> <span class="s">&quot;an apple a day&quot;</span><span class="o">;</span>
<span class="kt">boolean</span><span class="o">[]</span> <span class="n">seen</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">boolean</span><span class="o">[</span><span class="mi">256</span><span class="o">];</span>
<span class="n">Arrays</span><span class="o">.</span><span class="na">fill</span><span class="o">(</span><span class="n">seen</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>

<span class="kt">char</span><span class="o">[]</span> <span class="n">array</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">();</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">array</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
    <span class="n">seen</span><span class="o">[</span><span class="n">array</span><span class="o">[</span><span class="n">i</span><span class="o">]]</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">&quot;unique chars are: &quot;</span><span class="o">);</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">seen</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">seen</span><span class="o">[</span><span class="n">i</span><span class="o">])</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">((</span><span class="kt">char</span><span class="o">)</span> <span class="n">i</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span> 

<span class="c1">//=&gt; unique chars are:  adelnpy</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// with a loop, using strings</span>
<span class="n">String</span> <span class="n">string</span> <span class="o">=</span> <span class="s">&quot;an apple a day&quot;</span><span class="o">;</span>
<span class="n">TreeSet</span> <span class="n">seen</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeSet</span><span class="o">();</span>

<span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">size</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
    <span class="n">seen</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">string</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">));</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">&quot;unique chars are: &quot;</span><span class="o">);</span>
<span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">seen</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
<span class="k">while</span> <span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">());</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>

<span class="c1">//=&gt; unique chars are:  adelnpy</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="kt">char</span><span class="o">[]</span> <span class="n">chars</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">();</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">chars</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
    <span class="n">sum</span> <span class="o">+=</span> <span class="n">chars</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;sum is &quot;</span> <span class="o">+</span> <span class="n">sum</span><span class="o">);</span>

<span class="c1">// prints &quot;1248&quot; if string was &quot;an apple a day&quot;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="cm">/*</span>
<span class="cm"> * Sum.java</span>
<span class="cm"> */</span>
<span class="kn">package</span> <span class="n">pleac</span><span class="o">.</span><span class="na">ch01</span><span class="o">.</span><span class="na">part05</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="cm">/**</span>
<span class="cm"> * Compute 16-bit checksum of input file</span>
<span class="cm"> * Usage: java pleac.ch01.part05.Sum &lt;file&gt;</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Sum</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Usage: java pleac.ch01.part05.Sum &lt;file&gt;&quot;</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
        <span class="o">}</span>
        
        <span class="kt">int</span> <span class="n">checksum</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">Reader</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileReader</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
            <span class="kt">int</span> <span class="n">ch</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">ch</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span>
                <span class="n">checksum</span> <span class="o">+=</span> <span class="n">ch</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Exception occured: &quot;</span> <span class="o">+</span> <span class="n">ex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">checksum</span> <span class="o">%=</span> <span class="o">(</span><span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">16</span><span class="o">)</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span> 

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">checksum</span><span class="o">);</span>
    <span class="o">}</span>
    
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">//=&gt; % java Sum /etc/termcap</span>
<span class="c1">//=&gt; 53651</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">//=&gt; % sum --sysv /etc/termcap</span>
<span class="c1">//=&gt; 53651 1373 /etc/termcap</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="cm">/*</span>
<span class="cm"> * Slowcat.java</span>
<span class="cm"> */</span>
<span class="kn">package</span> <span class="n">pleac</span><span class="o">.</span><span class="na">ch01</span><span class="o">.</span><span class="na">part05</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="cm">/**</span>
<span class="cm"> * Emulate a  s l o w line printer</span>
<span class="cm"> * Usage: java pleac.ch01.part05.Slowcat &lt;file&gt;</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Slowcat</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Usage: java pleac.ch01.part05.Slowcat &lt;file&gt; [delay]&quot;</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="kt">long</span> <span class="n">delay</span> <span class="o">=</span> <span class="o">((</span><span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">))</span> <span class="o">?</span>
	    <span class="mi">1000</span> <span class="o">*</span> <span class="k">new</span> <span class="n">Long</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">1</span><span class="o">]).</span><span class="na">longValue</span><span class="o">()</span> <span class="o">:</span> <span class="mi">1000</span><span class="o">;</span>
        
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">Reader</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileReader</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
            <span class="kt">int</span> <span class="n">ch</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">ch</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">((</span><span class="kt">char</span><span class="o">)</span> <span class="n">ch</span><span class="o">);</span>
                <span class="k">try</span> <span class="o">{</span>
                <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">delay</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{}</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Exception occured: &quot;</span> <span class="o">+</span> <span class="n">ex</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_1.6</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="nf">reverseCharacters</span><span class="o">(</span><span class="n">String</span> <span class="n">string</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">length</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="kt">char</span><span class="o">[]</span> <span class="n">chars</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">();</span>
    <span class="kt">char</span><span class="o">[]</span> <span class="n">revChars</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="n">length</span><span class="o">];</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
	<span class="n">revChars</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">chars</span><span class="o">[</span><span class="n">length</span> <span class="o">-</span> <span class="n">i</span><span class="o">];</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">String</span><span class="o">(</span><span class="n">revChars</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="nf">reverseWords</span><span class="o">(</span><span class="n">String</span> <span class="n">string</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">StringTokenizer</span> <span class="n">tokenizer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringTokenizer</span><span class="o">(</span><span class="n">string</span><span class="o">,</span> <span class="s">&quot; &quot;</span><span class="o">);</span>
    <span class="n">StringBuffer</span> <span class="n">buffer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
    <span class="k">while</span> <span class="o">(</span><span class="n">tokenizer</span><span class="o">.</span><span class="na">hasMoreTokens</span><span class="o">())</span>
	<span class="n">buffer</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">tokenizer</span><span class="o">.</span><span class="na">nextToken</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot; &quot;</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">buffer</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="n">string</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">Yoda</span> <span class="n">said</span><span class="o">,</span> <span class="s">&quot;can you see this?&quot;</span><span class="err">&#39;</span><span class="o">;</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">reverseWords</span><span class="o">(</span><span class="n">string</span><span class="o">));</span>

<span class="k">this</span><span class="o">?</span><span class="s">&quot; see you &quot;</span><span class="n">can</span> <span class="n">said</span><span class="o">,</span> <span class="n">Yoda</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// normalize whitespace</span>
<span class="n">StringTokenizer</span> <span class="n">tokenizer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringTokenizer</span><span class="o">(</span><span class="n">string</span><span class="o">,</span> <span class="s">&quot; &quot;</span><span class="o">);</span>
<span class="n">StringBuffer</span> <span class="n">buffer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">(</span><span class="n">tokenizer</span><span class="o">.</span><span class="na">hasMoreTokens</span><span class="o">())</span>
    <span class="n">buffer</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">tokenizer</span><span class="o">.</span><span class="na">nextToken</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot; &quot;</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// preserve whitespace</span>
<span class="n">StringTokenizer</span> <span class="n">tokenizer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringTokenizer</span><span class="o">(</span><span class="n">string</span><span class="o">,</span> <span class="s">&quot; &quot;</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
<span class="n">StringBuffer</span> <span class="n">buffer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">(</span><span class="n">tokenizer</span><span class="o">.</span><span class="na">hasMoreTokens</span><span class="o">())</span>
    <span class="n">buffer</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">tokenizer</span><span class="o">.</span><span class="na">nextToken</span><span class="o">());</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="n">word</span> <span class="o">=</span> <span class="s">&quot;reviver&quot;</span><span class="o">;</span>
<span class="kt">boolean</span> <span class="n">isPalindrome</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">reverseCharacters</span><span class="o">(</span><span class="n">word</span><span class="o">));</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="n">file</span> <span class="o">=</span> <span class="s">&quot;/usr/share/dict/words&quot;</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">length</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">BufferedReader</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">FileReader</span><span class="o">(</span><span class="n">file</span><span class="o">));</span>
    <span class="n">String</span> <span class="n">word</span><span class="o">;</span>
    <span class="k">while</span> <span class="o">((</span><span class="n">word</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
	<span class="k">if</span> <span class="o">((</span><span class="n">word</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">length</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">word</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">reverseCharacters</span><span class="o">(</span><span class="n">word</span><span class="o">))))</span>
	    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">word</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Exception occured: &quot;</span> <span class="o">+</span> <span class="n">ex</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">//=&gt; redder</span>
<span class="c1">//=&gt; reviver</span>
<span class="c1">//=&gt; rotator</span>

<span class="c1">// @@PLEAC@@_1.7</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="nf">expand</span><span class="o">(</span><span class="n">String</span> <span class="n">string</span><span class="o">,</span> <span class="kt">int</span> <span class="n">tabStop</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="sc">&#39;\t&#39;</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">index</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span>
        <span class="k">return</span> <span class="n">string</span><span class="o">;</span>
    <span class="k">else</span> <span class="o">{</span>
	<span class="n">StringBuffer</span> <span class="n">buffer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">(</span><span class="n">string</span><span class="o">);</span>
	<span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="n">tabStop</span> <span class="o">-</span> <span class="n">index</span> <span class="o">%</span> <span class="n">tabStop</span><span class="o">;</span>
	<span class="n">buffer</span><span class="o">.</span><span class="na">deleteCharAt</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
	<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">count</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
	    <span class="n">buffer</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">index</span><span class="o">,</span> <span class="s">&quot; &quot;</span><span class="o">);</span>
	<span class="k">return</span> <span class="nf">expand</span><span class="o">(</span><span class="n">buffer</span><span class="o">.</span><span class="na">toString</span><span class="o">(),</span> <span class="n">tabStop</span><span class="o">);</span>	
    <span class="o">}</span>
<span class="o">}</span>

<span class="n">String</span> <span class="nf">unexpand</span><span class="o">(</span><span class="n">String</span> <span class="n">string</span><span class="o">,</span> <span class="kt">int</span> <span class="n">tabStop</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">StringBuffer</span> <span class="n">buffer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">(</span><span class="n">string</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">while</span> <span class="o">(</span><span class="n">index</span> <span class="o">+</span> <span class="n">tabStop</span> <span class="o">&lt;</span> <span class="n">buffer</span><span class="o">.</span><span class="na">length</span><span class="o">())</span> <span class="o">{</span>
	<span class="c1">// cut original string in tabstop-length pieces</span>
	<span class="n">String</span> <span class="n">piece</span> <span class="o">=</span> <span class="n">buffer</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">index</span><span class="o">,</span> <span class="n">index</span> <span class="o">+</span> <span class="n">tabStop</span><span class="o">);</span>
	<span class="c1">// count trailing whitespace characters</span>
	<span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
	<span class="k">while</span> <span class="o">((</span><span class="n">count</span> <span class="o">&lt;</span> <span class="n">tabStop</span><span class="o">)</span>
	    <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">Character</span><span class="o">.</span><span class="na">isWhitespace</span><span class="o">(</span><span class="n">piece</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">tabStop</span> <span class="o">-</span> <span class="o">(</span><span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)))))</span>
	    <span class="n">count</span><span class="o">++;</span>
	<span class="c1">// replace in original string if any whitespace was found</span>
	<span class="k">if</span> <span class="o">(</span><span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
	    <span class="n">piece</span> <span class="o">=</span> <span class="n">piece</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">tabStop</span> <span class="o">-</span> <span class="n">count</span><span class="o">)</span> <span class="o">+</span> <span class="sc">&#39;\t&#39;</span><span class="o">;</span>
	    <span class="n">buffer</span><span class="o">.</span><span class="na">replace</span><span class="o">(</span><span class="n">index</span><span class="o">,</span> <span class="n">index</span> <span class="o">+</span> <span class="n">tabStop</span><span class="o">,</span> <span class="n">piece</span><span class="o">);</span>
	    <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="n">tabStop</span> <span class="o">-</span> <span class="o">(</span><span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
	<span class="o">}</span> <span class="k">else</span> 
	    <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="n">tabStop</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">buffer</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">BufferedReader</span> <span class="n">input</span><span class="o">;</span>
<span class="n">String</span> <span class="n">line</span><span class="o">;</span>
<span class="c1">// [..]</span>
<span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">expand</span><span class="o">(</span><span class="n">line</span><span class="o">),</span> <span class="mi">4</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">BufferedReader</span> <span class="n">input</span><span class="o">;</span>
<span class="n">String</span> <span class="n">line</span><span class="o">;</span>
<span class="c1">// [..]</span>
<span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">unexpand</span><span class="o">(</span><span class="n">line</span><span class="o">),</span> <span class="mi">8</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_1.8</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// No interpolation in Java</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_1.9</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="n">big</span> <span class="o">=</span> <span class="n">little</span><span class="o">.</span><span class="na">toUpperCase</span><span class="o">();</span> <span class="c1">// &quot;bo peep&quot; -&gt; &quot;BO PEEP&quot;</span>
<span class="n">String</span> <span class="n">little</span> <span class="o">=</span> <span class="n">big</span><span class="o">.</span><span class="na">toLowerCase</span><span class="o">();</span> <span class="c1">// &quot;JOHN&quot;    -&gt; &quot;john&quot;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="n">big</span> <span class="o">=</span> <span class="n">little</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">).</span><span class="na">toUpperCase</span><span class="o">()</span> <span class="o">+</span> <span class="n">little</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
<span class="c1">// &quot;bo&quot;      -&gt; &quot;Bo&quot;</span>
<span class="n">String</span> <span class="n">little</span> <span class="o">=</span> <span class="n">big</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">).</span><span class="na">toLowerCase</span><span class="o">()</span> <span class="o">+</span> <span class="n">big</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
<span class="c1">// &quot;BoPeep&quot; -&gt; &quot;boPeep&quot;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="n">beast</span>   <span class="o">=</span> <span class="s">&quot;dromedary&quot;</span><span class="o">;</span>
<span class="c1">// capitalize various parts of beast</span>
<span class="n">String</span> <span class="n">capit1</span>   <span class="o">=</span> <span class="n">beast</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">).</span><span class="na">toUpperCase</span><span class="o">()</span>
    <span class="o">+</span> <span class="n">beast</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">toLowerCase</span><span class="o">();</span>
<span class="c1">// Dromedary</span>
<span class="n">String</span> <span class="n">capit2</span>   <span class="o">=</span> <span class="n">Character</span><span class="o">.</span><span class="na">toUpperCase</span><span class="o">(</span><span class="n">beast</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">))</span>
    <span class="o">+</span> <span class="n">beast</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">toLowerCase</span><span class="o">();</span>
<span class="c1">// Dromedary</span>
<span class="n">String</span> <span class="n">capall</span>   <span class="o">=</span> <span class="n">beast</span><span class="o">.</span><span class="na">toUpperCase</span><span class="o">();</span>
<span class="c1">// DROMEDARY</span>
<span class="n">String</span> <span class="n">caprest1</span> <span class="o">=</span> <span class="n">beast</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">).</span><span class="na">toLowerCase</span><span class="o">()</span>
    <span class="o">+</span> <span class="n">beast</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">toUpperCase</span><span class="o">();</span>
<span class="c1">// dROMEDARY</span>
<span class="n">String</span> <span class="n">caprest2</span> <span class="o">=</span> <span class="n">Character</span><span class="o">.</span><span class="na">toLowerCase</span><span class="o">(</span><span class="n">beast</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">))</span>
    <span class="o">+</span> <span class="n">beast</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">toUpperCase</span><span class="o">();</span>
<span class="c1">// dROMEDARY</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// capitalize each word&#39;s first character, downcase the rest</span>
<span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="s">&quot;thIS is a loNG liNE&quot;</span><span class="o">;</span>
<span class="n">StringTokenizer</span> <span class="n">tokenizer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringTokenizer</span><span class="o">(</span><span class="n">text</span><span class="o">);</span>
<span class="k">while</span> <span class="o">(</span><span class="n">tokenizer</span><span class="o">.</span><span class="na">hasMoreTokens</span><span class="o">())</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">word</span> <span class="o">=</span> <span class="n">tokenizer</span><span class="o">.</span><span class="na">nextToken</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">word</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">).</span><span class="na">toUpperCase</span><span class="o">()</span> 
                   <span class="o">+</span> <span class="n">word</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">toLowerCase</span><span class="o">()</span>
		   <span class="o">+</span> <span class="s">&quot; &quot;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="c1">//=&gt; This Is A Long Line</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">;</span>
<span class="k">if</span> <span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="n">b</span><span class="o">))</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;a and b are the same&quot;</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kd">private</span> <span class="n">Random</span> <span class="n">rand</span><span class="o">;</span>
<span class="kt">char</span> <span class="nf">randomCase</span><span class="o">(</span><span class="kt">char</span> <span class="n">ch</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="o">(</span><span class="n">rand</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">100</span><span class="o">)</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="o">)</span> <span class="o">?</span> <span class="n">Character</span><span class="o">.</span><span class="na">toLowerCase</span><span class="o">(</span><span class="n">ch</span><span class="o">):</span> <span class="n">ch</span><span class="o">;</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_1.10</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// No interpolation in Java</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_1.11</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// No here-document in Java</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_1.12</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kn">import</span> <span class="nn">java.text.BreakIterator</span><span class="o">();</span>
<span class="n">BreakIterator</span> <span class="n">boundary</span> <span class="o">=</span> <span class="n">BreakIterator</span><span class="o">.</span><span class="na">getLineInstance</span><span class="o">();</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="cm">/**</span>
<span class="cm"> * WrapDemo.java</span>
<span class="cm"> */</span>
<span class="kn">package</span> <span class="n">pleac</span><span class="o">.</span><span class="na">ch01</span><span class="o">.</span><span class="na">part12</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.text.BreakIterator</span><span class="o">;</span>
<span class="cm">/**</span>
<span class="cm"> * Show how BreakIterator works</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WrapDemo</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">BreakIterator</span> <span class="n">iterator</span> <span class="o">=</span> <span class="n">BreakIterator</span><span class="o">.</span><span class="na">getLineInstance</span><span class="o">();</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">input</span> <span class="o">=</span> <span class="s">&quot;Folding and splicing is the work of an editor,&quot;</span>
                 <span class="o">+</span> <span class="s">&quot; not a mere collection of silicon&quot;</span>
                 <span class="o">+</span> <span class="s">&quot; and&quot;</span>
                 <span class="o">+</span> <span class="s">&quot; mobile electrons!&quot;</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">column</span> <span class="o">=</span> <span class="mi">20</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">leadTab</span> <span class="o">=</span> <span class="s">&quot;    &quot;</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">nextTab</span> <span class="o">=</span> <span class="s">&quot;  &quot;</span><span class="o">;</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;01234567890123456789&quot;</span><span class="o">);</span>
        <span class="n">input</span> <span class="o">=</span> <span class="n">wrapLine</span><span class="o">(</span><span class="n">leadTab</span> <span class="o">+</span> <span class="n">input</span><span class="o">,</span> <span class="n">column</span><span class="o">);</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">input</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
            <span class="n">input</span> <span class="o">=</span> <span class="n">wrapLine</span><span class="o">(</span><span class="n">nextTab</span> <span class="o">+</span> <span class="n">input</span><span class="o">,</span> <span class="n">column</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">wrapLine</span><span class="o">(</span><span class="n">String</span> <span class="n">line</span><span class="o">,</span> <span class="kt">int</span> <span class="n">width</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">iterator</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">end</span> <span class="o">=</span> <span class="n">iterator</span><span class="o">.</span><span class="na">first</span><span class="o">();</span>
        <span class="k">while</span> <span class="o">((</span><span class="n">end</span> <span class="o">!=</span> <span class="n">BreakIterator</span><span class="o">.</span><span class="na">DONE</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">end</span> <span class="o">&lt;=</span> <span class="n">width</span><span class="o">))</span>
            <span class="n">end</span> <span class="o">=</span> <span class="n">iterator</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">end</span> <span class="o">==</span> <span class="n">BreakIterator</span><span class="o">.</span><span class="na">DONE</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">end</span> <span class="o">=</span> <span class="n">iterator</span><span class="o">.</span><span class="na">previous</span><span class="o">();</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">line</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">end</span><span class="o">));</span>
            <span class="k">return</span> <span class="n">line</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">end</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_1.13</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">Perl5Util</span> <span class="n">util</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Perl5Util</span><span class="o">();</span>
<span class="c1">// backslash</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/([CHARLIST])/\\\\$1/g&quot;</span><span class="o">,</span> <span class="n">var</span><span class="o">);</span>

<span class="c1">// double</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/([CHARLIST])/$1$1/g&quot;</span><span class="o">,</span> <span class="n">var</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">string</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/%/%%/g&quot;</span><span class="o">,</span> <span class="n">string</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">string</span> <span class="o">=</span> <span class="s">&quot;Mom said, \&quot;Don&#39;t do that.\&quot;&quot;</span><span class="o">;</span>
<span class="n">string</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/([&#39;\&quot;])/\\\\$1/g&quot;</span><span class="o">,</span> <span class="n">string</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">string</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/([^A-Z])/\\\\$1/g&quot;</span><span class="o">,</span> <span class="n">string</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_1.14</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">string</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="na">trim</span><span class="o">();</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// print what&#39;s typed, but surrounded by &gt;&lt; symbols</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">BufferedReader</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>
    <span class="n">String</span> <span class="n">line</span><span class="o">;</span>
    <span class="k">while</span><span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
	<span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">trim</span><span class="o">();</span>
	<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;&gt;&quot;</span> <span class="o">+</span> <span class="n">line</span> <span class="o">+</span> <span class="s">&quot;&lt;&quot;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Exception occured: &quot;</span> <span class="o">+</span> <span class="n">ex</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_1.15</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">PATTERN</span> <span class="o">=</span>
    <span class="s">&quot;m/\&quot;([^\\\&quot;\\\\]*(?:\\\\.[^\\\&quot;\\\\]*)*)\&quot;,? | ([^,]+),? | ,/x&quot;</span><span class="o">;</span>
<span class="n">Perl5Util</span> <span class="n">util</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Perl5Util</span><span class="o">();</span>

<span class="n">Iterator</span> <span class="nf">parseCSV</span><span class="o">(</span><span class="n">String</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ArrayList</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">();</span>
    <span class="k">while</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="n">PATTERN</span><span class="o">,</span> <span class="n">text</span><span class="o">))</span> <span class="o">{</span>
	<span class="c1">// find which group matched</span>
	<span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">group</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
	    <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">group</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>
	<span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">group</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
	    <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">group</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
	<span class="k">else</span>
	    <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
	<span class="c1">// loop on post-match string</span>
	<span class="n">text</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="na">postMatch</span><span class="o">();</span>
       <span class="o">};</span>
       <span class="k">return</span> <span class="n">list</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
<span class="o">}</span>  
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="n">line</span> <span class="o">=</span> 
    <span class="s">&quot;XYZZY,\&quot;\&quot;,\&quot;O&#39;Reilly, Inc\&quot;,\&quot;Wall, Larry\&quot;,\&quot;a \\\&quot;glug\\\&quot; bit,\&quot;,5,\&quot;Error, Core Dumped\&quot;&quot;</span><span class="o">;</span>
<span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">parseCSV</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
<span class="k">while</span> <span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">count</span><span class="o">++</span> <span class="o">+</span> <span class="s">&quot; : &quot;</span> <span class="o">+</span> <span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">());</span>

<span class="c1">//=&gt; 0 : XYZZY</span>
<span class="c1">//=&gt; 1 :</span>
<span class="c1">//=&gt; 2 : O&#39;Reilly, Inc</span>
<span class="c1">//=&gt; 3 : Wall, Larry</span>
<span class="c1">//=&gt; 4 : a \&quot;glug\&quot; bit,</span>
<span class="c1">//=&gt; 5 : 5</span>
<span class="c1">//=&gt; 6 : Error, Core Dumped</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_1.16</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// Sorry, no java soundex implementation found </span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_1.17</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="cm">/*</span>
<span class="cm"> * FixStyle.java</span>
<span class="cm"> */</span>
<span class="kn">package</span> <span class="n">pleac</span><span class="o">.</span><span class="na">ch01</span><span class="o">.</span><span class="na">part17</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="cm">/**</span>
<span class="cm"> * Switch first set of strings from to second set according to STYLE_FILE</span>
<span class="cm"> * Usage: see derived classes</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">FixStyle</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">STYLE_FILE</span> <span class="o">=</span> <span class="s">&quot;pleac/ch01/part17/style&quot;</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">BACKUP_SUFFIX</span> <span class="o">=</span> <span class="s">&quot;.orig&quot;</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">VERBOSE_FLAG</span> <span class="o">=</span> <span class="s">&quot;-v&quot;</span><span class="o">;</span>

    <span class="n">Properties</span> <span class="n">changes</span><span class="o">;</span>

    <span class="n">FixStyle</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">changes</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Properties</span><span class="o">();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">InputStream</span> <span class="n">input</span> <span class="o">=</span>
		<span class="n">getClass</span><span class="o">().</span><span class="na">getClassLoader</span><span class="o">().</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="n">STYLE_FILE</span><span class="o">);</span>
            <span class="n">changes</span><span class="o">.</span><span class="na">load</span><span class="o">(</span><span class="n">input</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Style loading failed: &quot;</span> <span class="o">+</span> <span class="n">ex</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kt">void</span> <span class="nf">fix</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;usage: java &quot;</span> <span class="o">+</span> <span class="n">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span>
		<span class="o">+</span> <span class="s">&quot; &lt;file&gt; [-v]&quot;</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">String</span> <span class="n">file</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
        <span class="kt">boolean</span> <span class="n">verbose</span> <span class="o">=</span> <span class="o">((</span><span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
	    <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="na">equals</span><span class="o">(</span><span class="n">VERBOSE_FLAG</span><span class="o">)))</span> <span class="o">?</span> <span class="kc">true</span><span class="o">:</span> <span class="kc">false</span><span class="o">;</span>
        <span class="n">fixFile</span><span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="n">verbose</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kt">void</span> <span class="nf">fixFile</span><span class="o">(</span><span class="n">String</span> <span class="n">file</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">verbose</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">try</span> <span class="o">{</span>
            <span class="n">BufferedReader</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">FileReader</span><span class="o">(</span><span class="n">file</span><span class="o">));</span>
            <span class="n">BufferedWriter</span> <span class="n">output</span> <span class="o">=</span>
		<span class="k">new</span> <span class="nf">BufferedWriter</span><span class="o">(</span><span class="k">new</span> <span class="n">FileWriter</span><span class="o">(</span><span class="n">file</span> <span class="o">+</span> <span class="n">BACKUP_SUFFIX</span><span class="o">));</span>
            <span class="n">String</span> <span class="n">line</span><span class="o">;</span>
            <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">output</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">fixLine</span><span class="o">(</span><span class="n">line</span><span class="o">,</span> <span class="o">++</span><span class="n">count</span><span class="o">,</span> <span class="n">verbose</span><span class="o">));</span>
                <span class="n">output</span><span class="o">.</span><span class="na">newLine</span><span class="o">();</span>
            <span class="o">}</span>
            <span class="n">output</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
             <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Exception occured: &quot;</span> <span class="o">+</span> <span class="n">ex</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">abstract</span> <span class="n">String</span> <span class="nf">fixLine</span><span class="o">(</span><span class="n">String</span> <span class="n">line</span><span class="o">,</span> <span class="kt">int</span> <span class="n">count</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">verbose</span><span class="o">);</span>

<span class="o">}</span>

<span class="cm">/*</span>
<span class="cm"> * FixStyle1.java</span>
<span class="cm"> */</span>
<span class="kn">package</span> <span class="n">pleac</span><span class="o">.</span><span class="na">ch01</span><span class="o">.</span><span class="na">part17</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.oro.text.perl.Perl5Util</span><span class="o">;</span>
<span class="cm">/**</span>
<span class="cm"> * Fix style using substitutions</span>
<span class="cm"> * Usage: java pleac.ch01.part17.FixStyle1 &lt;file&gt; [-v]</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FixStyle1</span> <span class="kd">extends</span> <span class="n">FixStyle</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Perl5Util</span> <span class="n">util</span><span class="o">;</span>

    <span class="n">FixStyle1</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">util</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Perl5Util</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="n">String</span> <span class="nf">fixLine</span><span class="o">(</span><span class="n">String</span> <span class="n">line</span><span class="o">,</span> <span class="kt">int</span> <span class="n">count</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">verbose</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Enumeration</span> <span class="kd">enum</span> <span class="o">=</span> <span class="n">changes</span><span class="o">.</span><span class="na">propertyNames</span><span class="o">();</span>
        <span class="k">while</span> <span class="o">(</span><span class="kd">enum</span><span class="o">.</span><span class="na">hasMoreElements</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">String</span> <span class="n">oldWord</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="kd">enum</span><span class="o">.</span><span class="na">nextElement</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="n">oldWord</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span><span class="o">,</span> <span class="n">line</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">String</span> <span class="n">newWord</span> <span class="o">=</span> <span class="n">changes</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="n">oldWord</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">verbose</span><span class="o">)</span>
                    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;substituting &quot;</span> <span class="o">+</span> <span class="n">newWord</span> <span class="o">+</span> <span class="s">&quot; to &quot;</span>
			<span class="o">+</span> <span class="n">oldWord</span> <span class="o">+</span> <span class="s">&quot; in line &quot;</span> <span class="o">+</span> <span class="n">count</span><span class="o">);</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/&quot;</span> <span class="o">+</span> <span class="n">oldWord</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="n">newWord</span> <span class="o">+</span> <span class="s">&quot;/g&quot;</span><span class="o">,</span> <span class="n">line</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">line</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">FixStyle</span> <span class="n">fixer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FixStyle1</span><span class="o">();</span>
        <span class="n">fixer</span><span class="o">.</span><span class="na">fix</span><span class="o">(</span><span class="n">args</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>

<span class="cm">/*</span>
<span class="cm"> * FixStyle2.java</span>
<span class="cm"> */</span>
<span class="kn">package</span> <span class="n">pleac</span><span class="o">.</span><span class="na">ch01</span><span class="o">.</span><span class="na">part17</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.text.BreakIterator</span><span class="o">;</span>
<span class="cm">/**</span>
<span class="cm"> * Fix style using a break iterator</span>
<span class="cm"> * Usage: java pleac.ch01.part17.FixStyle2 &lt;file&gt; [-v]</span>
<span class="cm"> */</span>  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FixStyle2</span> <span class="kd">extends</span> <span class="n">FixStyle</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">BreakIterator</span> <span class="n">iterator</span><span class="o">;</span>

    <span class="n">FixStyle2</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">iterator</span> <span class="o">=</span> <span class="n">BreakIterator</span><span class="o">.</span><span class="na">getWordInstance</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="n">String</span> <span class="nf">fixLine</span><span class="o">(</span><span class="n">String</span> <span class="n">line</span><span class="o">,</span> <span class="kt">int</span> <span class="n">count</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">verbose</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// use a mutable string buffer to performs string modifications</span>
        <span class="n">StringBuffer</span> <span class="n">buffer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
	<span class="c1">// use a break iterator to performs initial string analysis</span>
        <span class="n">iterator</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
	<span class="c1">// and keep track of offset between them</span>
        <span class="kt">int</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

        <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="n">iterator</span><span class="o">.</span><span class="na">first</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">end</span> <span class="o">=</span> <span class="n">iterator</span><span class="o">.</span><span class="na">first</span><span class="o">();</span>
        <span class="k">while</span> <span class="o">((</span><span class="n">end</span> <span class="o">=</span> <span class="n">iterator</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">!=</span> <span class="n">BreakIterator</span><span class="o">.</span><span class="na">DONE</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">String</span> <span class="n">oldWord</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">start</span><span class="o">,</span> <span class="n">end</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">changes</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">oldWord</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">String</span> <span class="n">newWord</span> <span class="o">=</span> <span class="n">changes</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="n">oldWord</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">verbose</span><span class="o">)</span>
                    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;substituting &quot;</span> <span class="o">+</span> <span class="n">newWord</span> <span class="o">+</span> <span class="s">&quot; to &quot;</span>
			<span class="o">+</span> <span class="n">oldWord</span> <span class="o">+</span> <span class="s">&quot; in line &quot;</span> <span class="o">+</span> <span class="n">count</span><span class="o">);</span>
                <span class="n">buffer</span><span class="o">.</span><span class="na">replace</span><span class="o">(</span><span class="n">start</span> <span class="o">+</span> <span class="n">offset</span><span class="o">,</span> <span class="n">end</span> <span class="o">+</span> <span class="n">offset</span><span class="o">,</span> <span class="n">newWord</span><span class="o">);</span>
                <span class="n">offset</span> <span class="o">+=</span> <span class="n">newWord</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="n">oldWord</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
            <span class="o">}</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">end</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">buffer</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">FixStyle</span> <span class="n">fixer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FixStyle2</span><span class="o">();</span>
        <span class="n">fixer</span><span class="o">.</span><span class="na">fix</span><span class="o">(</span><span class="n">args</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_1.18</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// To do...</span>
<span class="c1">// @@INCOMPLETE@@</span>
<span class="c1">// @@INCOMPLETE@@</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_2.1 </span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="n">s</span><span class="o">;</span>
<span class="n">NumberFormat</span> <span class="n">nf</span> <span class="o">=</span> <span class="n">NumberFormat</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">locale</span><span class="o">);</span>
<span class="n">Number</span> <span class="n">nb</span><span class="o">;</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">nb</span> <span class="o">=</span> <span class="n">nf</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ParseException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// not a number</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="n">s1</span><span class="o">;</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">s1</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">NumberFormatException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span> <span class="o">+</span> <span class="s">&quot; is not an integer&quot;</span><span class="o">);</span>
<span class="o">}</span>

<span class="n">String</span> <span class="n">s2</span><span class="o">;</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="kt">float</span> <span class="n">f</span> <span class="o">=</span> <span class="n">Float</span><span class="o">.</span><span class="na">parseFloat</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">NumberFormatException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s2</span> <span class="o">+</span> <span class="s">&quot; is not a float&quot;</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">NumberFormat</span> <span class="n">nf</span> <span class="o">=</span> <span class="n">NumberFormat</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">locale</span><span class="o">);</span>

<span class="kt">boolean</span> <span class="nf">isNumeric</span><span class="o">(</span><span class="n">String</span> <span class="n">string</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
       <span class="n">nf</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">string</span><span class="o">);</span>
       <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
   <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ParseException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
       <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
   <span class="o">}</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_2.2</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="cm">/**</span>
<span class="cm"> * Returns true if given values are equal to accuracy number of decimal places</span>
<span class="cm"> */</span>
<span class="kt">boolean</span> <span class="nf">equal</span><span class="o">(</span><span class="kt">double</span> <span class="n">num1</span><span class="o">,</span> <span class="kt">double</span> <span class="n">num2</span><span class="o">,</span> <span class="kt">int</span> <span class="n">accuracy</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">BigDecimal</span> <span class="n">bigNum1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="n">num1</span><span class="o">).</span><span class="na">setScale</span><span class="o">(</span><span class="n">accuracy</span><span class="o">,</span> <span class="n">BigDecimal</span><span class="o">.</span><span class="na">ROUND_DOWN</span><span class="o">);</span>
    <span class="n">BigDecimal</span> <span class="n">bigNum2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="n">num2</span><span class="o">).</span><span class="na">setScale</span><span class="o">(</span><span class="n">accuracy</span><span class="o">,</span> <span class="n">BigDecimal</span><span class="o">.</span><span class="na">ROUND_DOWN</span><span class="o">);</span>
    <span class="k">return</span> <span class="o">(</span><span class="n">bigNum1</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">bigNum2</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">);</span>
  <span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// with a scaling factor</span>
<span class="kt">int</span> <span class="n">wage</span> <span class="o">=</span> <span class="mi">536</span><span class="o">;</span>       <span class="c1">// $5.36/hour</span>
<span class="kt">int</span> <span class="n">week</span> <span class="o">=</span> <span class="mi">40</span> <span class="o">*</span> <span class="n">wage</span><span class="o">;</span> <span class="c1">// $214.40</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;One week&#39;s wage is: $&quot;</span> <span class="o">+</span> <span class="o">(</span><span class="kt">double</span><span class="o">)</span> <span class="n">week</span><span class="o">/</span><span class="mi">100</span><span class="o">);</span>
<span class="c1">//=&gt; One week&#39;s wage is: $214.40</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// with BigDecimal</span>
<span class="n">BigDecimal</span> <span class="n">wage</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">&quot;5.36&quot;</span><span class="o">);</span> <span class="c1">// $5.36/hour</span>
<span class="n">BigDecimal</span> <span class="n">hours</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">&quot;40&quot;</span><span class="o">);</span>  <span class="c1">// 40 hours/week</span>
<span class="n">BigDecimal</span> <span class="n">week</span> <span class="o">=</span> <span class="n">wage</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">hours</span><span class="o">);</span>   <span class="c1">// $214.40</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;One week&#39;s wage is: $&quot;</span> <span class="o">+</span> <span class="n">week</span><span class="o">);</span>
<span class="c1">//=&gt; One week&#39;s wage is: $214.40</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_2.3</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">BigDecimal</span> <span class="n">rounded</span> <span class="o">=</span> <span class="n">unrounded</span><span class="o">.</span><span class="na">setScale</span><span class="o">(</span><span class="n">scale</span><span class="o">,</span> <span class="n">roundingMode</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">BigDecimal</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">&quot;0.255&quot;</span><span class="o">);</span>
<span class="n">BigDecimal</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="na">setScale</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">BigDecimal</span><span class="o">.</span><span class="na">ROUND_HALF_UP</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Unrounded: &quot;</span> <span class="o">+</span> <span class="n">a</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Rounded: &quot;</span> <span class="o">+</span> <span class="n">b</span><span class="o">);</span>
<span class="c1">//=&gt; Unrounded: 0.255</span>
<span class="c1">//=&gt; Rounded: 0.26</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// caution, Math.rint() rounds to the nearest integer !</span>
<span class="kt">double</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">double</span><span class="o">[]</span> <span class="o">{</span><span class="mf">3.3</span> <span class="o">,</span> <span class="mf">3.5</span> <span class="o">,</span> <span class="mf">3.7</span><span class="o">,</span> <span class="o">-</span><span class="mf">3.3</span><span class="o">};</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;number\tint\tfloor\tceil&quot;</span><span class="o">);</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Math</span><span class="o">.</span><span class="na">rint</span><span class="o">(</span><span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">])</span> <span class="o">+</span> <span class="s">&quot;\t&quot;</span> <span class="o">+</span> <span class="n">Math</span><span class="o">.</span><span class="na">floor</span><span class="o">(</span><span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">])</span> <span class="o">+</span> <span class="s">&quot;\t&quot;</span> <span class="o">+</span> <span class="n">Math</span><span class="o">.</span><span class="na">ceil</span><span class="o">(</span><span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">]));</span>

<span class="c1">//=&gt; number  int     floor   ceil</span>
<span class="c1">//=&gt; </span>
<span class="c1">//=&gt;  3.3     3.0     3.0     4.0</span>
<span class="c1">//=&gt; </span>
<span class="c1">//=&gt;  3.5     3.0     3.0     4.0</span>
<span class="c1">//=&gt; </span>
<span class="c1">//=&gt;  3.7     3.0     3.0     4.0</span>
<span class="c1">//=&gt; </span>
<span class="c1">//=&gt; -3.3    -3.0    -4.0    -3.0</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_2.4</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">s</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="s">&quot;0110110&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span> <span class="c1">// i = 54</span>
<span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="mi">54</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>     <span class="c1">// s = 110110</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_2.5</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">X</span><span class="o">,</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">Y</span><span class="o">,</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="n">i</span> <span class="n">is</span> <span class="n">set</span> <span class="n">to</span> <span class="n">every</span> <span class="n">integer</span> <span class="n">from</span> <span class="n">X</span> <span class="n">to</span> <span class="n">Y</span><span class="o">,</span> <span class="n">inclusive</span>
<span class="o">}</span>

<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">X</span><span class="o">,</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">Y</span><span class="o">,</span> <span class="n">i</span><span class="o">+=</span><span class="mi">7</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">i</span> <span class="n">is</span> <span class="n">set</span> <span class="n">to</span> <span class="n">every</span> <span class="n">integer</span> <span class="n">from</span> <span class="n">X</span> <span class="n">to</span> <span class="n">Y</span><span class="o">,</span> <span class="n">stepsize</span> <span class="o">=</span> <span class="mi">7</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">&quot;Childhood is: &quot;</span><span class="o">);</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">5</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="mi">12</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="s">&quot; &quot;</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>

<span class="c1">//=&gt; Childhood is: 5 6 7 8 9 10 11 12 </span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_2.6</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// no roman module available</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_2.7</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">Random</span> <span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">();</span>
<span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="n">Y</span><span class="o">-</span><span class="n">X</span><span class="o">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="n">X</span><span class="o">;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">51</span><span class="o">)</span> <span class="o">+</span> <span class="mi">25</span><span class="o">;</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="n">elt</span> <span class="o">=</span> <span class="n">array</span><span class="o">[</span><span class="n">random</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="n">array</span><span class="o">.</span><span class="na">length</span><span class="o">)];</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">StringBuffer</span> <span class="n">buffer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">8</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
    <span class="n">buffer</span><span class="o">.</span><span class="na">append</span><span class="o">((</span><span class="kt">char</span><span class="o">)</span> <span class="o">(</span><span class="n">random</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">43</span><span class="o">)</span> <span class="o">+</span> <span class="mi">48</span><span class="o">));</span>
<span class="n">String</span> <span class="n">password</span> <span class="o">=</span> <span class="n">buffer</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_2.8</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">long</span> <span class="n">seed</span><span class="o">;</span>
<span class="n">Random</span> <span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">(</span><span class="n">seed</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">DataInputStream</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DataInputStream</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">);</span>
    <span class="n">Random</span> <span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">(</span><span class="n">input</span><span class="o">.</span><span class="na">readLong</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Exception occured while initialising random seed&quot;</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_2.9</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// java.util.Random class already uses a 48-bit seed</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_2.10</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// use Random.nextGaussian() method</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="cm">/*</span>
<span class="cm"> * WeightedDistribution.java</span>
<span class="cm"> */</span>
<span class="kn">package</span> <span class="n">pleac</span><span class="o">.</span><span class="na">ch02</span><span class="o">.</span><span class="na">part10</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Random</span><span class="o">;</span>
<span class="cm">/**</span>
<span class="cm"> * A weighted distribution of values</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WeightedDistribution</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">Random</span> <span class="n">random</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Object</span><span class="o">[]</span> <span class="n">values</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">limits</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">total</span><span class="o">;</span>

    <span class="cm">/**</span>
<span class="cm">     * Creates a new weighted distribution with given values and given weights</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="nf">WeightedDistribution</span><span class="o">(</span><span class="n">Object</span><span class="o">[]</span> <span class="n">values</span><span class="o">,</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">weights</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">values</span><span class="o">.</span><span class="na">length</span> <span class="o">!=</span> <span class="n">weights</span><span class="o">.</span><span class="na">length</span><span class="o">)</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span>
                    <span class="s">&quot;values and weights array size don&#39;t match&quot;</span><span class="o">);</span>

        <span class="k">this</span><span class="o">.</span><span class="na">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">();</span>
        <span class="k">this</span><span class="o">.</span><span class="na">values</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[</span><span class="n">values</span><span class="o">.</span><span class="na">length</span><span class="o">];</span>
        <span class="k">this</span><span class="o">.</span><span class="na">limits</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">weights</span><span class="o">.</span><span class="na">length</span><span class="o">];</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">values</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">values</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">values</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="n">total</span> <span class="o">+=</span> <span class="n">weights</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="k">this</span><span class="o">.</span><span class="na">limits</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">total</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Draws a random value</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">token</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="n">total</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">limits</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">token</span> <span class="o">&lt;=</span> <span class="n">limits</span><span class="o">[</span><span class="n">i</span><span class="o">])</span>
                <span class="k">return</span> <span class="n">values</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>

<span class="n">Object</span> <span class="n">values</span><span class="o">[];</span>
<span class="kt">int</span> <span class="n">weights</span><span class="o">[];</span>

<span class="c1">// creates distribution</span>
<span class="n">WeightedDistribution</span> <span class="n">distribution</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WeightedDistribution</span><span class="o">(</span><span class="n">values</span><span class="o">,</span> <span class="n">weights</span><span class="o">);</span>
<span class="c1">// draws a value from it</span>
<span class="n">Object</span> <span class="n">value</span> <span class="o">=</span> <span class="n">distribution</span><span class="o">.</span><span class="na">draw</span><span class="o">();</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">Random</span> <span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">();</span>
<span class="kt">int</span> <span class="n">mean</span> <span class="o">=</span> <span class="mi">25</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">sdev</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>
<span class="kt">double</span> <span class="n">salary</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="na">nextGaussian</span><span class="o">()</span> <span class="o">*</span> <span class="n">sdev</span> <span class="o">+</span> <span class="n">mean</span><span class="o">;</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;You have been hired at &quot;</span> <span class="o">+</span> <span class="n">salary</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_2.11</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// use Math.toDegrees() and Math.toRadians() methods</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">double</span> <span class="n">radians</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">toRadians</span><span class="o">(</span><span class="n">degrees</span><span class="o">);</span>
<span class="kt">double</span> <span class="n">degrees</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">toDegrees</span><span class="o">(</span><span class="n">radians</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="cm">/**</span>
<span class="cm"> * Returns sine of an angle expressed in degrees</span>
<span class="cm"> */</span>
<span class="kt">double</span> <span class="nf">degreeSine</span><span class="o">(</span><span class="kt">double</span> <span class="n">a</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Math</span><span class="o">.</span><span class="na">sin</span><span class="o">(</span><span class="n">Math</span><span class="o">.</span><span class="na">toRadians</span><span class="o">(</span><span class="n">a</span><span class="o">));</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_2.12</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// use Math.tan() method</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">double</span> <span class="n">y</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">acos</span><span class="o">(</span><span class="mf">3.7</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_2.13</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">double</span> <span class="n">log</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mf">10000.00</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="cm">/**</span>
<span class="cm"> * Returns log in given base of given value</span>
<span class="cm"> */</span>
<span class="kt">double</span> <span class="nf">logBase</span><span class="o">(</span><span class="kt">int</span> <span class="n">base</span><span class="o">,</span> <span class="kt">double</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Math</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="n">value</span><span class="o">)/</span><span class="n">Math</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="n">base</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">double</span> <span class="n">answer</span> <span class="o">=</span> <span class="n">logBase</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mf">10000.00</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;log10(10000) = &quot;</span> <span class="o">+</span> <span class="n">answer</span><span class="o">);</span>
<span class="n">log10</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span><span class="mi">000</span><span class="o">)</span> <span class="o">=</span> <span class="mi">4</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_2.14</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="cm">/**</span>
<span class="cm"> * Compute multiplication of two given matrices</span>
<span class="cm"> */</span>
<span class="kt">int</span><span class="o">[][]</span> <span class="nf">multiplyMatrix</span><span class="o">(</span><span class="kt">int</span><span class="o">[][]</span> <span class="n">matrix1</span><span class="o">,</span> <span class="kt">int</span><span class="o">[][]</span> <span class="n">matrix2</span><span class="o">)</span> <span class="o">{</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">matrix1</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">&quot;Null height matrix1&quot;</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">rows1</span> <span class="o">=</span> <span class="n">matrix1</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">matrix1</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">&quot;Null width matrix1&quot;</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">cols1</span> <span class="o">=</span> <span class="n">matrix1</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">length</span><span class="o">;</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">matrix2</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">&quot;Null height matrix2&quot;</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">rows2</span> <span class="o">=</span> <span class="n">matrix2</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">matrix2</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">&quot;Null width matrix2&quot;</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">cols2</span> <span class="o">=</span> <span class="n">matrix2</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">length</span><span class="o">;</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">cols1</span> <span class="o">!=</span> <span class="n">rows2</span><span class="o">)</span> 
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">&quot;Matrices don&#39;t match: &quot;</span> <span class="o">+</span> <span class="n">cols1</span> <span class="o">+</span> <span class="s">&quot; != &quot;</span> <span class="o">+</span> <span class="n">rows2</span><span class="o">);</span>

    <span class="kt">int</span><span class="o">[][]</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">rows1</span><span class="o">][</span><span class="n">cols2</span><span class="o">];</span>

    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">rows1</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> 
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">cols2</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span>
	    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">k</span><span class="o">&lt;</span><span class="n">cols1</span><span class="o">;</span> <span class="n">k</span><span class="o">++)</span>
                <span class="n">result</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">+=</span> <span class="n">matrix1</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">k</span><span class="o">]</span> <span class="o">*</span> <span class="n">matrix2</span><span class="o">[</span><span class="n">k</span><span class="o">][</span><span class="n">j</span><span class="o">];</span>

    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">int</span><span class="o">[][]</span> <span class="n">matrix1</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[][]</span> <span class="o">{</span>
   <span class="o">{</span><span class="mi">3</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">},</span>
   <span class="o">{</span><span class="mi">5</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">8</span><span class="o">}</span>
<span class="o">};</span>

<span class="kt">int</span><span class="o">[][]</span> <span class="n">matrix2</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[][]</span> <span class="o">{</span>
   <span class="o">{</span><span class="mi">4</span><span class="o">,</span> <span class="mi">7</span><span class="o">},</span>
   <span class="o">{</span><span class="mi">9</span><span class="o">,</span> <span class="mi">3</span><span class="o">},</span>
   <span class="o">{</span><span class="mi">8</span><span class="o">,</span> <span class="mi">1</span><span class="o">}</span>
<span class="o">};</span>

<span class="kt">int</span><span class="o">[][]</span> <span class="n">product</span> <span class="o">=</span> <span class="n">multiplyMatrix</span><span class="o">(</span><span class="n">matrix1</span><span class="o">,</span> <span class="n">matrix2</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_2.15</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="cm">/**</span>
<span class="cm"> * A basic complex number implementation</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Complex</span> <span class="o">{</span>
    
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">real</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">imaginary</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Complex</span><span class="o">(</span><span class="kt">int</span> <span class="n">real</span><span class="o">,</span> <span class="kt">int</span> <span class="n">imaginary</span><span class="o">)</span> <span class="o">{</span>
	<span class="k">this</span><span class="o">.</span><span class="na">real</span> <span class="o">=</span> <span class="n">real</span><span class="o">;</span>
	<span class="k">this</span><span class="o">.</span><span class="na">imaginary</span> <span class="o">=</span> <span class="n">imaginary</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getReal</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">real</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getImaginary</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">imaginary</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Complex</span> <span class="nf">multiply</span><span class="o">(</span><span class="n">Complex</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
	<span class="k">return</span> <span class="k">new</span> <span class="nf">Complex</span><span class="o">(</span>
           <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">real</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="na">getReal</span><span class="o">())</span> <span class="o">-</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">imaginary</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="na">getImaginary</span><span class="o">()),</span>
           <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">real</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="na">getImaginary</span><span class="o">())</span> <span class="o">+</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">imaginary</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="na">getReal</span><span class="o">())</span>
       <span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">imaginary</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
	    <span class="k">return</span> <span class="n">real</span> <span class="o">+</span> <span class="s">&quot;+&quot;</span> <span class="o">+</span> <span class="n">Math</span><span class="o">.</span><span class="na">abs</span><span class="o">(</span><span class="n">imaginary</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;i&quot;</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">imaginary</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span>
	    <span class="k">return</span> <span class="n">real</span> <span class="o">+</span> <span class="s">&quot;-&quot;</span> <span class="o">+</span> <span class="n">Math</span><span class="o">.</span><span class="na">abs</span><span class="o">(</span><span class="n">imaginary</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;i&quot;</span><span class="o">;</span>
	<span class="k">return</span> <span class="n">real</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">Complex</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Complex</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">5</span><span class="o">);</span>  <span class="c1">// 3 + 5i</span>
<span class="n">Complex</span> <span class="n">b</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Complex</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">);</span> <span class="c1">// 2 - 2i</span>
<span class="n">Complex</span> <span class="n">c</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">b</span><span class="o">);</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;c = &quot;</span> <span class="o">+</span> <span class="n">c</span><span class="o">);</span>
<span class="c1">//=&gt; c = 16+4i</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_2.16</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">int</span> <span class="n">number</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">hexadecimal</span><span class="o">,</span> <span class="mi">16</span><span class="o">);</span> <span class="c1">// hexadecimal</span>
<span class="kt">int</span> <span class="n">number</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">octal</span><span class="o">,</span> <span class="mi">8</span><span class="o">);</span>        <span class="c1">// octal</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Gimme a number in decimal, octal, or hex: &quot;</span><span class="o">);</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">BufferedReader</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>
    <span class="n">String</span> <span class="n">num</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">().</span><span class="na">trim</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">number</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">num</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;0x&quot;</span><span class="o">))</span>
	<span class="n">number</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">num</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="mi">16</span><span class="o">);</span>
	<span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">num</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;0&quot;</span><span class="o">))</span>
	    <span class="n">number</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">num</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="mi">8</span><span class="o">);</span>
	    <span class="k">else</span>
		<span class="n">number</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">num</span><span class="o">);</span>

    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Decimal value: &quot;</span> <span class="o">+</span> <span class="n">number</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Exception occured while getting input&quot;</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">NumberFormatException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Exception occured while parsing input&quot;</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Enter file permission in octal: &quot;</span><span class="o">);</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">BufferedReader</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>
    <span class="n">String</span> <span class="n">num</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">().</span><span class="na">trim</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">permission</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">num</span><span class="o">,</span> <span class="mi">8</span><span class="o">);</span>

    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Decimal value: &quot;</span> <span class="o">+</span> <span class="n">permission</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Exception occured while getting input&quot;</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">NumberFormatException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Exception occured while parsing input&quot;</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_2.17</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// using a localized number format</span>
<span class="n">NumberFormat</span> <span class="n">format</span> <span class="o">=</span> <span class="n">NumberFormat</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">locale</span><span class="o">);</span>

<span class="n">format</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// using a customized number format</span>
<span class="n">DecimalFormatSymbols</span> <span class="n">symbols</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DecimalFormatSymbols</span><span class="o">();</span>
<span class="n">symbols</span><span class="o">.</span><span class="na">setGroupingSeparator</span><span class="o">(</span><span class="sc">&#39;,&#39;</span><span class="o">);</span>
<span class="n">DecimalFormat</span> <span class="n">format</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DecimalFormat</span><span class="o">();</span>
<span class="n">format</span><span class="o">.</span><span class="na">setDecimalFormatSymbols</span><span class="o">(</span><span class="n">symbols</span><span class="o">);</span>

<span class="n">format</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">int</span> <span class="n">hits</span> <span class="o">=</span> <span class="n">truly_random_value</span><span class="o">();</span> <span class="c1">// negative hits!</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Your web page received &quot;</span> <span class="o">+</span> <span class="n">format</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">hits</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; accesses last month.&quot;</span><span class="o">);</span>
<span class="c1">//=&gt; Your web page received -1,740,525,205 accesses last month.</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_2.18</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;It took &quot;</span> <span class="o">+</span> <span class="n">time</span> <span class="o">+</span> <span class="s">&quot; hour&quot;</span> <span class="o">+</span> <span class="o">((</span><span class="n">time</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">?</span> <span class="s">&quot;&quot;</span> <span class="o">:</span> <span class="s">&quot;s&quot;</span><span class="o">));</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">time</span> <span class="o">+</span> <span class="s">&quot; hour&quot;</span> <span class="o">+</span> <span class="o">((</span><span class="n">time</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">?</span> <span class="s">&quot; is&quot;</span> <span class="o">:</span> <span class="s">&quot;s are&quot;</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; enough&quot;</span><span class="o">);</span>  
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">double</span><span class="o">[]</span> <span class="n">limits</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">double</span><span class="o">[]</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="n">ChoiceFormat</span><span class="o">.</span><span class="na">nextDouble</span><span class="o">(</span><span class="mi">1</span><span class="o">)};</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">names</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span><span class="s">&quot;century&quot;</span><span class="o">,</span> <span class="s">&quot;centuries&quot;</span><span class="o">};</span>
<span class="n">ChoiceFormat</span> <span class="n">format</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ChoiceFormat</span><span class="o">(</span><span class="n">limits</span><span class="o">,</span> <span class="n">names</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;It took &quot;</span> <span class="o">+</span> <span class="n">time</span> <span class="o">+</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="n">format</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">time</span><span class="o">));</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">Perl5Util</span> <span class="n">util</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Perl5Util</span><span class="o">();</span>
<span class="cm">/**</span>
<span class="cm"> * Compute plural of given noun</span>
<span class="cm"> */</span>
<span class="n">String</span> <span class="nf">nounPlural</span><span class="o">(</span><span class="n">String</span> <span class="n">noun</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// order really matters here!</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/ss$/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">))</span>
	<span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/ss$/sses&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/([psc]h)$/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">))</span>
	<span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/([psc]h)$/${1}es/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/z$/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">))</span>
	<span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/z$/zes/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/ff$/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">))</span>
	<span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/ff$/ffs/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/f$/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">))</span>
	<span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/f$/ves/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/ey$/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">))</span>
	<span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/ey$/eys/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/y$/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">))</span>
	<span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/y$/ies/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/ix$/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">))</span>
	<span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/ix$/ices/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/([sx])$/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">))</span>
	<span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/([sx])$/$1es/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/$/s/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_2.19</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">//=&gt; # java pleac.ch02.part19.BigFact 8 9 96 2178</span>
<span class="c1">//=&gt; 8: 2^3</span>
<span class="c1">//=&gt; 9: 3^2</span>
<span class="c1">//=&gt; 96: 2^5 3</span>
<span class="c1">//=&gt; 2178: 2 3^2 11^2</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">//=&gt; # java pleac.ch02.part19.BigFact 25000000000000000000000000</span>
<span class="c1">//=&gt; 25000000000000000000000000: 2^24 5^26</span>
<span class="c1">//=&gt; # java pleac.ch02.part19.BigFact 239322000000000000000000</span>
<span class="c1">//=&gt; 239322000000000000000000: 2^19 3 5^18 39887</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="cm">/*</span>
<span class="cm"> * BigFact.java</span>
<span class="cm"> */</span>
<span class="kn">package</span> <span class="n">pleac</span><span class="o">.</span><span class="na">ch02</span><span class="o">.</span><span class="na">part19</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.math.BigInteger</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="cm">/**</span>
<span class="cm"> * Calculate prime factors</span>
<span class="cm"> * Usage: java pleac.ch02.part19.BigFact [-b] &lt;number&gt;</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BigFact</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Integer</span> <span class="n">ONE</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">TreeMap</span> <span class="nf">getFactors</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">orig</span> <span class="o">=</span> <span class="n">n</span><span class="o">;</span>
        <span class="n">TreeMap</span> <span class="n">factors</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeMap</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">i</span><span class="o">,</span> <span class="n">sqi</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="o">,</span> <span class="n">sqi</span> <span class="o">=</span> <span class="mi">4</span><span class="o">;</span> <span class="n">sqi</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="o">;</span> <span class="n">sqi</span> <span class="o">+=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">i</span><span class="o">++</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">n</span> <span class="o">/=</span> <span class="n">i</span><span class="o">;</span>
                <span class="n">Integer</span> <span class="n">factor</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(!</span> <span class="n">factors</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">factor</span><span class="o">))</span>
                    <span class="n">factors</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">factor</span><span class="o">,</span> <span class="n">ONE</span><span class="o">);</span>
                <span class="k">else</span>
                    <span class="n">factors</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">factor</span><span class="o">,</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(((</span><span class="n">Integer</span><span class="o">)</span> <span class="n">factors</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">factor</span><span class="o">)).</span><span class="na">intValue</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">));</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">((</span><span class="n">n</span> <span class="o">!=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">n</span> <span class="o">!=</span> <span class="n">orig</span><span class="o">))</span>
            <span class="n">factors</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="n">n</span><span class="o">),</span> <span class="n">ONE</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">factors</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">TreeMap</span> <span class="nf">getFactors</span><span class="o">(</span><span class="n">BigInteger</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">BigInteger</span> <span class="n">orig</span> <span class="o">=</span> <span class="n">n</span><span class="o">;</span>
        <span class="n">TreeMap</span> <span class="n">factors</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeMap</span><span class="o">();</span>
        <span class="n">BigInteger</span> <span class="n">i</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">&quot;2&quot;</span><span class="o">);</span>
        <span class="n">BigInteger</span> <span class="n">sqi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">&quot;4&quot;</span><span class="o">);</span>
        <span class="n">BigInteger</span> <span class="n">step</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">&quot;2&quot;</span><span class="o">);</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">sqi</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">n</span><span class="o">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">n</span><span class="o">.</span><span class="na">mod</span><span class="o">(</span><span class="n">i</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">ZERO</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="na">divide</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(!</span> <span class="n">factors</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">i</span><span class="o">))</span>
                    <span class="n">factors</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">);</span>
                <span class="k">else</span>
                    <span class="n">factors</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="o">((</span><span class="n">BigInteger</span><span class="o">)</span> <span class="n">factors</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">)).</span><span class="na">add</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">));</span>
            <span class="o">}</span>
            <span class="n">sqi</span> <span class="o">=</span> <span class="n">sqi</span><span class="o">.</span><span class="na">add</span><span class="o">((</span><span class="n">i</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">step</span><span class="o">)).</span><span class="na">add</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">));</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">((!</span> <span class="n">n</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">))</span> <span class="o">&amp;&amp;</span> <span class="o">(!</span> <span class="n">n</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">orig</span><span class="o">)))</span>
            <span class="n">factors</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">n</span><span class="o">,</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">factors</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">displayFactors</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">,</span> <span class="n">TreeMap</span> <span class="n">factors</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">n</span> <span class="o">+</span> <span class="s">&quot;: &quot;</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">factors</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;PRIME&quot;</span><span class="o">);</span>
        <span class="k">else</span> <span class="o">{</span>
            <span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">factors</span><span class="o">.</span><span class="na">keySet</span><span class="o">().</span><span class="na">iterator</span><span class="o">();</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">Object</span> <span class="n">factor</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
                <span class="n">Object</span> <span class="n">power</span> <span class="o">=</span> <span class="n">factors</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">factor</span><span class="o">);</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">factor</span> <span class="o">+</span> <span class="o">((</span><span class="n">power</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">ONE</span><span class="o">))?</span> <span class="s">&quot;&quot;</span><span class="o">:</span> <span class="s">&quot;^&quot;</span> <span class="o">+</span> <span class="n">power</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; &quot;</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">displayFactors</span><span class="o">(</span><span class="n">BigInteger</span> <span class="n">n</span><span class="o">,</span> <span class="n">TreeMap</span> <span class="n">factors</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">n</span> <span class="o">+</span> <span class="s">&quot;: &quot;</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">factors</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;PRIME&quot;</span><span class="o">);</span>
        <span class="k">else</span> <span class="o">{</span>
            <span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">factors</span><span class="o">.</span><span class="na">keySet</span><span class="o">().</span><span class="na">iterator</span><span class="o">();</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">Object</span> <span class="n">factor</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
                <span class="n">Object</span> <span class="n">power</span> <span class="o">=</span> <span class="n">factors</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">factor</span><span class="o">);</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">factor</span> <span class="o">+</span> <span class="o">((</span><span class="n">power</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">))?</span> <span class="s">&quot;&quot;</span><span class="o">:</span> <span class="s">&quot;^&quot;</span> <span class="o">+</span> <span class="n">power</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; &quot;</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Usage: java pleac.ch02.part19.BigFact [-b] &lt;number&gt;...&quot;</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kt">boolean</span> <span class="n">useBigInteger</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">equals</span><span class="o">(</span><span class="s">&quot;-b&quot;</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">useBigInteger</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">index</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">args</span><span class="o">.</span><span class="na">length</span><span class="o">;</span><span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">useBigInteger</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">BigInteger</span> <span class="n">n</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
                <span class="n">displayFactors</span><span class="o">(</span><span class="n">n</span><span class="o">,</span> <span class="n">getFactors</span><span class="o">(</span><span class="n">n</span><span class="o">));</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
                <span class="n">displayFactors</span><span class="o">(</span><span class="n">n</span><span class="o">,</span> <span class="n">getFactors</span><span class="o">(</span><span class="n">n</span><span class="o">));</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">NumberFormatException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">BigInteger</span> <span class="n">n</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
                    <span class="n">displayFactors</span><span class="o">(</span><span class="n">n</span><span class="o">,</span> <span class="n">getFactors</span><span class="o">(</span><span class="n">n</span><span class="o">));</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>

    <span class="o">}</span>
    
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_3.0</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// use a calendar to compute year, month, day, hour, minute, and second values.</span>
<span class="n">GregorianCalendar</span> <span class="n">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Today is day &quot;</span> <span class="o">+</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">DAY_OF_YEAR</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; of the current year.&quot;</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_3.1</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">GregorianCalendar</span> <span class="n">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">();</span>
<span class="kt">int</span> <span class="n">day</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">DATE</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">month</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">MONTH</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">year</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">YEAR</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">GregorianCalendar</span> <span class="n">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;The current date is &quot;</span>
    <span class="o">+</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">DATE</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; &quot;</span>
    <span class="o">+</span> <span class="o">(</span><span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">MONTH</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; &quot;</span>
    <span class="o">+</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">YEAR</span><span class="o">));</span>
<span class="c1">//=&gt; The current date is 1998 04 28</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_3.2</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// create a calendar with current time and time zone</span>
<span class="n">GregorianCalendar</span> <span class="n">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">();</span>
<span class="c1">// set time zone</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">setTimezone</span><span class="o">(</span><span class="n">zone</span><span class="o">);</span>
<span class="c1">// set date fields</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">field</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span>
<span class="c1">// get time in seconds</span>
<span class="kt">long</span> <span class="n">time</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">getTime</span><span class="o">().</span><span class="na">getTime</span><span class="o">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="o">;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">GregorianCalendar</span> <span class="n">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">();</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">HOUR_OF_DAY</span><span class="o">,</span> <span class="n">hour</span><span class="o">);</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">MINUTE</span><span class="o">,</span> <span class="n">minute</span><span class="o">);</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">SECOND</span><span class="o">,</span> <span class="n">second</span><span class="o">);</span>
<span class="kt">long</span> <span class="n">time</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">getTime</span><span class="o">().</span><span class="na">getTime</span><span class="o">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="o">;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// day is day in month (1-31)</span>
<span class="c1">// month is month in year (1-12)</span>
<span class="c1">// year is four-digit year e.g., 1967</span>
<span class="c1">// hour, minute and second represent UTC time </span>
<span class="n">GregorianCalendar</span> <span class="n">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">(</span><span class="n">TimeZone</span><span class="o">.</span><span class="na">getTimeZone</span><span class="o">(</span><span class="s">&quot;UTC&quot;</span><span class="o">));</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">year</span><span class="o">,</span> <span class="n">month</span> <span class="o">-</span> <span class="mi">1</span><span class="o">,</span> <span class="n">day</span><span class="o">,</span> <span class="n">hour</span><span class="o">,</span> <span class="n">minute</span><span class="o">,</span> <span class="n">second</span><span class="o">);</span>
<span class="kt">long</span> <span class="n">time</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">getTime</span><span class="o">().</span><span class="na">getTime</span><span class="o">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="o">;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_3.3</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// create a calendar with current time and time zone</span>
<span class="n">GregorianCalendar</span> <span class="n">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">();</span>
<span class="c1">// set time</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">setTime</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="n">time</span> <span class="o">*</span> <span class="mi">1000</span><span class="o">));</span>
<span class="c1">// get date fields</span>
<span class="kt">int</span> <span class="n">day</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">DATE</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">month</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">MONTH</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">year</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">YEAR</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">GregorianCalendar</span> <span class="n">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">();</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">setTime</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="n">time</span> <span class="o">*</span> <span class="mi">1000</span><span class="o">));</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Dateline: &quot;</span>
    <span class="o">+</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">HOUR_OF_DAY</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;:&quot;</span>
    <span class="o">+</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">MINUTE</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;:&quot;</span>
    <span class="o">+</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">SECOND</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;-&quot;</span>
    <span class="o">+</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">YEAR</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span>
    <span class="o">+</span> <span class="o">(</span><span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">MONTH</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span>
    <span class="o">+</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">DATE</span><span class="o">));</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_3.4</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">long</span> <span class="n">now</span><span class="o">,</span> <span class="n">difference</span><span class="o">;</span>
<span class="kt">long</span> <span class="n">when</span> <span class="o">=</span> <span class="n">now</span> <span class="o">+</span> <span class="n">difference</span>
<span class="kt">long</span> <span class="n">then</span> <span class="o">=</span> <span class="n">now</span> <span class="o">-</span> <span class="n">difference</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// any field of a calendar is incrementable via add() method</span>
<span class="n">GregorianCalendar</span> <span class="n">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">(</span><span class="n">year</span><span class="o">,</span> <span class="n">month</span><span class="o">,</span> <span class="n">day</span><span class="o">,</span> <span class="n">hour</span><span class="o">,</span> <span class="n">minute</span><span class="o">,</span> <span class="n">second</span><span class="o">);</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">DATE</span><span class="o">,</span> <span class="n">dayOffset</span><span class="o">);</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">HOUR_OF_DAY</span><span class="o">,</span> <span class="n">hourOffset</span><span class="o">);</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">MINUTE</span><span class="o">,</span> <span class="n">minuteOffset</span><span class="o">);</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">SECOND</span><span class="o">,</span> <span class="n">secondOffset</span><span class="o">);</span>
<span class="n">year</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">YEAR</span><span class="o">);</span>
<span class="n">month</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">MONTH</span><span class="o">);</span>
<span class="n">day</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">DATE</span><span class="o">);</span>
<span class="n">hour</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">HOUR_OF_DAY</span><span class="o">);</span>
<span class="n">minute</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">MINUTE</span><span class="o">);</span>
<span class="n">second</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">SECOND</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">long</span> <span class="n">birthTime</span> <span class="o">=</span> <span class="mi">96176750</span><span class="o">;</span>         <span class="c1">// 18/Jan/1973, 3:45:50 am</span>
<span class="kt">long</span> <span class="n">interval</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">+</span>                <span class="c1">// 5 second</span>
                <span class="mi">17</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">+</span>          <span class="c1">// 17 minute</span>
                <span class="mi">2</span>  <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">+</span>     <span class="c1">// 2 hour</span>
                <span class="mi">55</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span><span class="o">;</span> <span class="c1">// and 55 day</span>
<span class="n">Date</span> <span class="n">then</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="n">birthTime</span> <span class="o">+</span> <span class="n">interval</span><span class="o">);</span>
<span class="n">SimpleDateFormat</span> <span class="n">format</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Then is &quot;</span> <span class="o">+</span> <span class="n">format</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">then</span><span class="o">));</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">GregorianCalendar</span> <span class="n">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">(</span><span class="n">TimeZone</span><span class="o">.</span><span class="na">getTimeZone</span><span class="o">(</span><span class="s">&quot;UTC&quot;</span><span class="o">));</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">1973</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">18</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">45</span><span class="o">,</span> <span class="mi">50</span><span class="o">);</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">DATE</span><span class="o">,</span> <span class="mi">55</span><span class="o">);</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">HOUR_OF_DAY</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">MINUTE</span><span class="o">,</span> <span class="mi">17</span><span class="o">);</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">SECOND</span><span class="o">,</span> <span class="mi">5</span><span class="o">);</span>
<span class="n">SimpleDateFormat</span> <span class="n">format</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;To be precise &quot;</span> <span class="o">+</span> <span class="n">format</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">calendar</span><span class="o">.</span><span class="na">getTime</span><span class="o">()));</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_3.5</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">long</span> <span class="n">recent</span><span class="o">,</span> <span class="n">earlier</span><span class="o">;</span>
<span class="kt">long</span> <span class="n">difference</span> <span class="o">=</span> <span class="n">recent</span> <span class="o">-</span> <span class="n">earlier</span><span class="o">;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">GregorianCalendar</span> <span class="n">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">();</span>
<span class="c1">// convert first date to time</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">year1</span><span class="o">,</span> <span class="n">month1</span><span class="o">,</span> <span class="n">day1</span><span class="o">);</span>
<span class="n">Date</span> <span class="n">date1</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">getTime</span><span class="o">();</span>
<span class="c1">// convert second date to time</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">year2</span><span class="o">,</span> <span class="n">month2</span><span class="o">,</span> <span class="n">day2</span><span class="o">);</span>
<span class="n">Date</span> <span class="n">date2</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">getTime</span><span class="o">();</span>
<span class="c1">// compute difference</span>
<span class="kt">long</span> <span class="n">difference</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">abs</span><span class="o">(</span><span class="n">date2</span><span class="o">.</span><span class="na">getTime</span><span class="o">()</span> <span class="o">-</span> <span class="n">date1</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="kt">long</span> <span class="n">days</span> <span class="o">=</span> <span class="n">difference</span> <span class="o">/</span> <span class="o">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">long</span> <span class="n">bree</span> <span class="o">=</span> <span class="mi">361535725</span><span class="o">;</span> <span class="c1">// 16 Jun 1981, 4:35:25</span>
<span class="kt">long</span> <span class="n">nat</span>  <span class="o">=</span>  <span class="mi">96201950</span><span class="o">;</span> <span class="c1">// 18 Jan 1973, 3:45:50</span>

<span class="kt">long</span> <span class="n">difference</span> <span class="o">=</span> <span class="n">bree</span> <span class="o">-</span> <span class="n">nat</span><span class="o">;</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;There were &quot;</span> <span class="o">+</span> <span class="n">difference</span> <span class="o">+</span> <span class="s">&quot; seconds between Nat and Bree&quot;</span><span class="o">);</span>

<span class="kt">long</span> <span class="n">seconds</span> <span class="o">=</span>  <span class="n">difference</span> <span class="o">%</span> <span class="mi">60</span><span class="o">;</span>
<span class="n">difference</span>  <span class="o">=</span> <span class="o">(</span><span class="n">difference</span> <span class="o">-</span> <span class="n">seconds</span><span class="o">)</span> <span class="o">/</span> <span class="mi">60</span><span class="o">;</span>
<span class="kt">long</span> <span class="n">minutes</span> <span class="o">=</span>  <span class="n">difference</span> <span class="o">%</span> <span class="mi">60</span><span class="o">;</span>
<span class="n">difference</span>  <span class="o">=</span> <span class="o">(</span><span class="n">difference</span> <span class="o">-</span> <span class="n">minutes</span><span class="o">)</span> <span class="o">/</span> <span class="mi">60</span><span class="o">;</span>
<span class="kt">long</span> <span class="n">hours</span>   <span class="o">=</span>  <span class="n">difference</span> <span class="o">%</span> <span class="mi">24</span><span class="o">;</span>
<span class="n">difference</span>  <span class="o">=</span> <span class="o">(</span><span class="n">difference</span> <span class="o">-</span> <span class="n">hours</span><span class="o">)</span>   <span class="o">/</span> <span class="mi">24</span><span class="o">;</span>
<span class="kt">long</span> <span class="n">days</span>    <span class="o">=</span>  <span class="n">difference</span> <span class="o">%</span> <span class="mi">7</span><span class="o">;</span>
<span class="kt">long</span> <span class="n">weeks</span>   <span class="o">=</span> <span class="o">(</span><span class="n">difference</span> <span class="o">-</span> <span class="n">days</span><span class="o">)</span>    <span class="o">/</span>  <span class="mi">7</span><span class="o">;</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;weeks &quot;</span> <span class="o">+</span> <span class="n">weeks</span> <span class="o">+</span> <span class="s">&quot;, days &quot;</span> <span class="o">+</span> <span class="n">days</span> <span class="o">+</span> <span class="s">&quot;, &quot;</span>
    <span class="o">+</span> <span class="n">hours</span> <span class="o">+</span> <span class="s">&quot;:&quot;</span> <span class="o">+</span> <span class="n">minutes</span> <span class="o">+</span> <span class="s">&quot;:&quot;</span> <span class="o">+</span> <span class="n">seconds</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">GregorianCalendar</span> <span class="n">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">(</span><span class="n">TimeZone</span><span class="o">.</span><span class="na">getTimeZone</span><span class="o">(</span><span class="s">&quot;UTC&quot;</span><span class="o">));</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">1981</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">16</span><span class="o">);</span> <span class="c1">// 16 Jun 1981</span>
<span class="n">Date</span> <span class="n">date1</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">getTime</span><span class="o">();</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">1973</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">18</span><span class="o">);</span> <span class="c1">// 18 Jan 1973</span>
<span class="n">Date</span> <span class="n">date2</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">getTime</span><span class="o">();</span>
<span class="kt">long</span> <span class="n">difference</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">abs</span><span class="o">(</span><span class="n">date2</span><span class="o">.</span><span class="na">getTime</span><span class="o">()</span> <span class="o">-</span> <span class="n">date1</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="kt">long</span> <span class="n">days</span> <span class="o">=</span> <span class="n">difference</span> <span class="o">/</span> <span class="o">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;There were &quot;</span> <span class="o">+</span> <span class="n">days</span> <span class="o">+</span> <span class="s">&quot; days between Nat and Bree&quot;</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_3.6</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// create a calendar with current time and time zone</span>
<span class="n">GregorianCalendar</span> <span class="n">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">();</span>
<span class="c1">// set time</span>
<span class="n">calendar</span><span class="o">.</span><span class="na">setTime</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="n">time</span> <span class="o">*</span> <span class="mi">1000</span><span class="o">));</span>
<span class="c1">// get date fields</span>
<span class="kt">int</span> <span class="n">monthDay</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">DAY_OF_MONTH</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">weekDay</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">DAY_OF_WEEK</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">yearDay</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">DAY_OF_YEAR</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">yearWeek</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">WEEK_OF_YEAR</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// create a calendar with given year, month and day</span>
<span class="n">GregorianCalendar</span> <span class="n">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">(</span><span class="n">year</span><span class="o">,</span> <span class="n">month</span><span class="o">,</span> <span class="n">day</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">weekDay</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">DAY_OF_WEEK</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">yearDay</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">DAY_OF_YEAR</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">yearWeek</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">WEEK_OF_YEAR</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">int</span> <span class="n">year</span>  <span class="o">=</span> <span class="mi">1981</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">month</span> <span class="o">=</span> <span class="mi">6</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">day</span>   <span class="o">=</span> <span class="mi">16</span><span class="o">;</span>

<span class="n">GregorianCalendar</span> <span class="n">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">(</span><span class="n">year</span><span class="o">,</span> <span class="n">month</span> <span class="o">-</span> <span class="mi">1</span><span class="o">,</span> <span class="n">day</span><span class="o">);</span>

<span class="n">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">getTime</span><span class="o">();</span>
<span class="n">SimpleDateFormat</span> <span class="n">format1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;mm/dd/yy&quot;</span><span class="o">);</span>
<span class="n">SimpleDateFormat</span> <span class="n">format2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;EEEE&quot;</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">format1</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">date</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; was a &quot;</span> <span class="o">+</span> <span class="n">format2</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">date</span><span class="o">));</span>

<span class="kt">int</span> <span class="n">week</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">WEEK_OF_YEAR</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;in the week number &quot;</span> <span class="o">+</span> <span class="n">week</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_3.7</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="n">raw</span> <span class="o">=</span> <span class="s">&quot;1998-06-03&quot;</span><span class="o">;</span>
<span class="n">SimpleDateFormat</span> <span class="n">format</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;yyyy-MM-dd&quot;</span><span class="o">);</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="n">format</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">raw</span><span class="o">);</span>
    <span class="kt">long</span> <span class="n">time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="na">getTime</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ParseException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// bad date</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">SimpleDateFormat</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;yyyy-MM-dd&quot;</span><span class="o">);</span>
<span class="n">SimpleDateFormat</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;MM/dd/yyyy&quot;</span><span class="o">);</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">BufferedReader</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>
    <span class="n">String</span> <span class="n">line</span><span class="o">;</span>
    <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
	<span class="k">try</span> <span class="o">{</span>
	    <span class="n">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
	    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Date was &quot;</span> <span class="o">+</span> <span class="n">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">date</span><span class="o">));</span>
	<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ParseException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
	    <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Bad date string: &quot;</span> <span class="o">+</span> <span class="n">line</span><span class="o">);</span>
	<span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_3.8</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">DateFormat</span> <span class="n">format</span><span class="o">;</span>
<span class="n">String</span> <span class="n">string</span> <span class="o">=</span> <span class="n">format</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="n">time</span><span class="o">));</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">GregorianCalendar</span> <span class="n">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">(</span><span class="mi">1973</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">18</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">45</span><span class="o">,</span> <span class="mi">50</span><span class="o">);</span>
<span class="n">DateFormat</span> <span class="n">format</span> <span class="o">=</span> <span class="n">DateFormat</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Default locale format gives: &quot;</span> <span class="o">+</span> <span class="n">format</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">calendar</span><span class="o">.</span><span class="na">getTime</span><span class="o">()));</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">GregorianCalendar</span> <span class="n">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">(</span><span class="mi">1973</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">18</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">45</span><span class="o">,</span> <span class="mi">50</span><span class="o">);</span>
<span class="n">SimpleDateFormat</span> <span class="n">format</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;E M d hh:mm:ss z yyyy&quot;</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Customized format gives: &quot;</span> <span class="o">+</span> <span class="n">format</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">calendar</span><span class="o">.</span><span class="na">getTime</span><span class="o">()));</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_3.9</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">long</span> <span class="n">t0</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
<span class="c1">// do your operation here</span>
<span class="kt">long</span> <span class="n">t1</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
<span class="kt">long</span> <span class="n">elapsed</span> <span class="o">=</span> <span class="n">t1</span><span class="o">-</span><span class="n">t0</span><span class="o">;</span>
<span class="c1">// elapsed is the number of milliseconds between t0 and t1</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Press return when ready&quot;</span><span class="o">);</span>
<span class="kt">long</span> <span class="n">before</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">BufferedReader</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>
    <span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{}</span>
<span class="kt">long</span> <span class="n">after</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
<span class="kt">long</span> <span class="n">elapsed</span> <span class="o">=</span> <span class="o">(</span><span class="n">after</span> <span class="o">-</span> <span class="n">before</span><span class="o">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="o">;</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;You took &quot;</span> <span class="o">+</span> <span class="n">elapsed</span> <span class="o">+</span> <span class="s">&quot; seconds.&quot;</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// take mean sorting time</span>
<span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">500</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">number</span> <span class="o">=</span> <span class="mi">100</span><span class="o">;</span>
<span class="kt">long</span> <span class="n">time</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">number</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="kt">double</span><span class="o">[]</span> <span class="n">array</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">double</span><span class="o">[</span><span class="n">size</span><span class="o">];</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">size</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span>
	<span class="n">array</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">random</span><span class="o">();</span>

    <span class="c1">// sort it</span>
    <span class="kt">long</span> <span class="n">t0</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
    <span class="n">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">array</span><span class="o">);</span>
    <span class="kt">long</span> <span class="n">t1</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
    <span class="n">time</span> <span class="o">+=</span> <span class="o">(</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="o">);</span>
<span class="o">}</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;On average, sorting &quot;</span> <span class="o">+</span> <span class="n">size</span> <span class="o">+</span> <span class="s">&quot; random numbers takes &quot;</span> <span class="o">+</span>
    <span class="o">(</span><span class="n">time</span> <span class="o">/</span> <span class="n">number</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; milliseconds&quot;</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_3.10</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">long</span> <span class="n">delay</span><span class="o">;</span> <span class="c1">// time to sleep in milliseconds</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">delay</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// excerpt from more complete exemple from PLEAC@@_1.5</span>
<span class="n">Reader</span> <span class="n">input</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">ch</span><span class="o">;</span>
<span class="k">while</span> <span class="o">((</span><span class="n">ch</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">((</span><span class="kt">char</span><span class="o">)</span> <span class="n">ch</span><span class="o">);</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">delay</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{}</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>


<span class="c1">// @@PLEAC@@_4.0</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">simple</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;this&quot;</span><span class="o">,</span> <span class="s">&quot;that&quot;</span><span class="o">,</span> <span class="s">&quot;the&quot;</span><span class="o">,</span> <span class="s">&quot;other&quot;</span> <span class="o">};</span>
<span class="n">String</span><span class="o">[][]</span> <span class="n">nested</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[][]</span> <span class="o">{</span> <span class="o">{</span> <span class="s">&quot;this&quot;</span> <span class="o">},</span> <span class="o">{</span> <span class="s">&quot;that&quot;</span> <span class="o">},</span> <span class="o">{</span> <span class="s">&quot;the&quot;</span><span class="o">,</span> <span class="s">&quot;other&quot;</span> <span class="o">}</span> <span class="o">};</span>
<span class="k">assert</span> <span class="n">simple</span><span class="o">.</span><span class="na">length</span> <span class="o">==</span> <span class="mi">4</span><span class="o">;</span>
<span class="k">assert</span> <span class="n">nested</span><span class="o">.</span><span class="na">length</span> <span class="o">==</span> <span class="mi">3</span><span class="o">;</span>
<span class="k">assert</span> <span class="n">nested</span><span class="o">[</span><span class="mi">2</span><span class="o">].</span><span class="na">length</span> <span class="o">==</span> <span class="mi">2</span><span class="o">;</span>

<span class="c1">// Mixed types (Java 1.4+)</span>
<span class="n">Object</span><span class="o">[]</span> <span class="n">mixed</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;a&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">};</span>

<span class="c1">// Mixed types (Java 1.5+) with auto boxing</span>
<span class="n">Object</span><span class="o">[]</span> <span class="n">mixed5</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;a&quot;</span><span class="o">,</span> <span class="mi">1</span> <span class="o">};</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>


<span class="c1">// @@PLEAC@@_4.1</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;quick&quot;</span><span class="o">,</span> <span class="s">&quot;brown&quot;</span><span class="o">,</span> <span class="s">&quot;fox&quot;</span> <span class="o">};</span>
<span class="k">assert</span> <span class="n">a</span><span class="o">.</span><span class="na">length</span> <span class="o">==</span> <span class="mi">3</span><span class="o">;</span>

<span class="n">a</span> <span class="o">=</span> <span class="s">&quot;Why are you teasing me?&quot;</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;Why&quot;</span><span class="o">,</span> <span class="s">&quot;are&quot;</span><span class="o">,</span> <span class="s">&quot;you&quot;</span><span class="o">,</span> <span class="s">&quot;teasing&quot;</span><span class="o">,</span> <span class="s">&quot;me?&quot;</span> <span class="o">});</span>

<span class="c1">// Convert an array to a fixed-size list</span>
<span class="n">List</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">a</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">5</span><span class="o">;</span>

<span class="c1">// Make that list variable and insert something at the top</span>
<span class="n">List</span> <span class="n">variableList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
<span class="n">variableList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="s">&quot;First&quot;</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">variableList</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="s">&quot;First&quot;</span><span class="o">);</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>


<span class="c1">// @@PLEAC@@_4.2</span>
<span class="cm">/**</span>
<span class="cm"> * Join the elements of collection using the provided separator.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">join</span><span class="o">(</span> <span class="n">Collection</span> <span class="n">col</span><span class="o">,</span> <span class="n">String</span> <span class="n">sep</span> <span class="o">)</span> <span class="o">{</span>
    <span class="n">StringBuffer</span> <span class="n">sb</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
    <span class="n">Iterator</span> <span class="n">li</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">li</span><span class="o">.</span><span class="na">hasNext</span><span class="o">()</span> <span class="o">)</span> <span class="o">{</span>
        <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span> <span class="n">li</span><span class="o">.</span><span class="na">next</span><span class="o">()</span> <span class="o">);</span>
        <span class="k">while</span> <span class="o">(</span> <span class="n">li</span><span class="o">.</span><span class="na">hasNext</span><span class="o">()</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span> <span class="n">sep</span> <span class="o">);</span>
            <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span> <span class="n">li</span><span class="o">.</span><span class="na">next</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">sb</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
<span class="o">}</span>

<span class="cm">/**</span>
<span class="cm"> * Join the elements of enumeration using the provided separator</span>
<span class="cm"> * (provides interoperatbility for legacy APIs that return enumerations).</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">join</span><span class="o">(</span> <span class="n">Enumeration</span> <span class="n">e</span><span class="o">,</span> <span class="n">String</span> <span class="n">sep</span> <span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nf">join</span><span class="o">(</span> <span class="n">Collections</span><span class="o">.</span><span class="na">list</span><span class="o">(</span> <span class="n">e</span> <span class="o">),</span> <span class="n">sep</span> <span class="o">);</span>
<span class="o">}</span>

<span class="cm">/**</span>
<span class="cm"> * Join the elements of array using the provided separator.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">join</span><span class="o">(</span> <span class="n">Object</span><span class="o">[]</span> <span class="n">col</span><span class="o">,</span> <span class="n">String</span> <span class="n">sep</span> <span class="o">)</span> <span class="o">{</span>
    <span class="n">StringBuffer</span> <span class="n">sb</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">col</span><span class="o">.</span><span class="na">length</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="o">)</span> <span class="o">{</span>
        <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span> <span class="n">col</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">);</span>
    <span class="o">}</span>
    <span class="k">for</span> <span class="o">(</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">col</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++</span> <span class="o">)</span> <span class="o">{</span>
        <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span> <span class="n">sep</span> <span class="o">);</span>
        <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span> <span class="n">col</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">sb</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
<span class="o">}</span>

<span class="c1">// @@INCOMPLETE@@</span>


<span class="c1">// @@PLEAC@@_4.3</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>
<span class="c1">// In Java, we can&#39;t change the size of an array, but we can do it</span>
<span class="c1">// for Collection types (like List).</span>

<span class="c1">// Wrap the array with an ArrayList (because the list returns by</span>
<span class="c1">// Arrays.asList is fixed-size)</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">people</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;Crosby&quot;</span><span class="o">,</span> <span class="s">&quot;Stills&quot;</span><span class="o">,</span> <span class="s">&quot;Nash&quot;</span> <span class="o">};</span>
<span class="n">List</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">people</span><span class="o">));</span>
<span class="k">assert</span> <span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">3</span><span class="o">;</span>

<span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;Young&quot;</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">4</span><span class="o">;</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>


<span class="c1">// @@PLEAC@@_4.4</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">people</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;Crosby&quot;</span><span class="o">,</span> <span class="s">&quot;Stills&quot;</span><span class="o">,</span> <span class="s">&quot;Nash&quot;</span><span class="o">,</span> <span class="s">&quot;Young&quot;</span> <span class="o">};</span>

<span class="c1">// For loop</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">people</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
  <span class="n">String</span> <span class="n">person</span> <span class="o">=</span> <span class="n">people</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
  <span class="c1">// ...</span>
<span class="o">}</span>

<span class="c1">// Enhanced For loop (Java 1.5+)</span>
<span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">person</span> <span class="o">:</span> <span class="n">people</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// ...</span>
<span class="o">}</span>

<span class="c1">// Closure Style (using apache commons-collections 1.0+)</span>
<span class="n">List</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">people</span><span class="o">);</span>
<span class="n">CollectionUtils</span><span class="o">.</span><span class="na">forAllDo</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="k">new</span> <span class="n">Closure</span><span class="o">()</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">execute</span><span class="o">(</span><span class="n">Object</span> <span class="n">person</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ...</span>
  <span class="o">}</span>
<span class="o">});</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>


<span class="c1">// @@PLEAC@@_4.6</span>
<span class="cm">/**</span>
<span class="cm"> * Keep only first element (contains-wise, hence equals-wise) of</span>
<span class="cm"> * supplied collection.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="n">Collection</span> <span class="nf">uniq</span><span class="o">(</span> <span class="n">Collection</span> <span class="n">col</span> <span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="n">Collection</span> <span class="n">ret</span> <span class="o">=</span> <span class="o">(</span><span class="n">Collection</span><span class="o">)</span><span class="n">col</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">newInstance</span><span class="o">();</span>
        <span class="n">Iterator</span> <span class="n">li</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
        <span class="k">while</span> <span class="o">(</span> <span class="n">li</span><span class="o">.</span><span class="na">hasNext</span><span class="o">()</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">Object</span> <span class="n">elem</span> <span class="o">=</span> <span class="n">li</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span> <span class="o">!</span> <span class="n">ret</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span> <span class="n">elem</span> <span class="o">)</span> <span class="o">)</span> <span class="o">{</span>
                <span class="n">ret</span><span class="o">.</span><span class="na">add</span><span class="o">(</span> <span class="n">elem</span> <span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">ret</span><span class="o">;</span>

    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span> <span class="n">InstantiationException</span> <span class="n">ie</span> <span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="s">&quot;can&#39;t create new object for class: &quot;</span>
                            <span class="o">+</span> <span class="n">col</span><span class="o">.</span><span class="na">getClass</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;: &quot;</span> <span class="o">+</span> <span class="n">ie</span> <span class="o">);</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>

    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span> <span class="n">IllegalAccessException</span> <span class="n">iae</span> <span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="s">&quot;can&#39;t create new object for class: &quot;</span>
                            <span class="o">+</span> <span class="n">col</span><span class="o">.</span><span class="na">getClass</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;: &quot;</span> <span class="o">+</span> <span class="n">iae</span> <span class="o">);</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// @@INCOMPLETE@@</span>


<span class="c1">// @@PLEAC@@_4.7</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;1&quot;</span><span class="o">,</span> <span class="s">&quot;1&quot;</span><span class="o">,</span> <span class="s">&quot;2&quot;</span><span class="o">,</span> <span class="s">&quot;2&quot;</span><span class="o">,</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;4&quot;</span><span class="o">,</span> <span class="s">&quot;5&quot;</span> <span class="o">};</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">b</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;1&quot;</span><span class="o">,</span> <span class="s">&quot;2&quot;</span><span class="o">,</span> <span class="s">&quot;4&quot;</span> <span class="o">};</span>

<span class="c1">// using apache commons-collections 3.2+</span>
<span class="n">List</span> <span class="n">diff</span> <span class="o">=</span> <span class="n">ListUtils</span><span class="o">.</span><span class="na">removeAll</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">a</span><span class="o">),</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">b</span><span class="o">));</span>
<span class="k">assert</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">diff</span><span class="o">.</span><span class="na">toArray</span><span class="o">(),</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;5&quot;</span> <span class="o">});</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_4.8</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;1&quot;</span><span class="o">,</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;5&quot;</span><span class="o">,</span> <span class="s">&quot;6&quot;</span><span class="o">,</span> <span class="s">&quot;7&quot;</span><span class="o">,</span> <span class="s">&quot;8&quot;</span> <span class="o">};</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">b</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;2&quot;</span><span class="o">,</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;5&quot;</span><span class="o">,</span> <span class="s">&quot;7&quot;</span><span class="o">,</span> <span class="s">&quot;9&quot;</span> <span class="o">};</span>

<span class="c1">// using apache commons-collections 1.0+</span>

<span class="n">List</span> <span class="n">intersection</span> <span class="o">=</span> <span class="n">ListUtils</span><span class="o">.</span><span class="na">intersection</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">a</span><span class="o">),</span> 
<span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">b</span><span class="o">));</span>
<span class="k">assert</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">intersection</span><span class="o">.</span><span class="na">toArray</span><span class="o">(),</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;5&quot;</span><span class="o">,</span> <span class="s">&quot;7&quot;</span> <span class="o">});</span>

<span class="n">List</span> <span class="n">union</span> <span class="o">=</span> <span class="n">ListUtils</span><span class="o">.</span><span class="na">union</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">a</span><span class="o">),</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">b</span><span class="o">));</span>
<span class="n">Set</span> <span class="n">unionUnique</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeSet</span><span class="o">(</span><span class="n">union</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">unionUnique</span><span class="o">.</span><span class="na">toArray</span><span class="o">(),</span>
                     <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;1&quot;</span><span class="o">,</span> <span class="s">&quot;2&quot;</span><span class="o">,</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;5&quot;</span><span class="o">,</span> <span class="s">&quot;6&quot;</span><span class="o">,</span> <span class="s">&quot;7&quot;</span><span class="o">,</span> <span class="s">&quot;8&quot;</span><span class="o">,</span> <span class="s">&quot;9&quot;</span> <span class="o">});</span>

<span class="n">List</span> <span class="n">diff</span> <span class="o">=</span> <span class="n">ListUtils</span><span class="o">.</span><span class="na">subtract</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">a</span><span class="o">),</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">b</span><span class="o">));</span>
<span class="k">assert</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">diff</span><span class="o">.</span><span class="na">toArray</span><span class="o">(),</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;1&quot;</span><span class="o">,</span> <span class="s">&quot;6&quot;</span><span class="o">,</span> <span class="s">&quot;8&quot;</span> <span class="o">});</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_4.9</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;Time&quot;</span><span class="o">,</span> <span class="s">&quot;Flies&quot;</span> <span class="o">};</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">b</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;An&quot;</span><span class="o">,</span> <span class="s">&quot;Arrow&quot;</span> <span class="o">};</span>

<span class="c1">// Append to existing list</span>
<span class="n">List</span> <span class="n">members</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">a</span><span class="o">));</span>
<span class="n">members</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">b</span><span class="o">));</span>
<span class="k">assert</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">members</span><span class="o">.</span><span class="na">toArray</span><span class="o">(),</span>
                     <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;Time&quot;</span><span class="o">,</span> <span class="s">&quot;Flies&quot;</span><span class="o">,</span> <span class="s">&quot;An&quot;</span><span class="o">,</span> <span class="s">&quot;Arrow&quot;</span> <span class="o">});</span>

<span class="c1">// Append and create a new list (using apache commons-collections 1.0+)</span>
<span class="n">List</span> <span class="n">union</span> <span class="o">=</span> <span class="n">ListUtils</span><span class="o">.</span><span class="na">union</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">a</span><span class="o">),</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">b</span><span class="o">));</span>
<span class="k">assert</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">union</span><span class="o">.</span><span class="na">toArray</span><span class="o">(),</span>
                     <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;Time&quot;</span><span class="o">,</span> <span class="s">&quot;Flies&quot;</span><span class="o">,</span> <span class="s">&quot;An&quot;</span><span class="o">,</span> <span class="s">&quot;Arrow&quot;</span> <span class="o">});</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_4.10</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">items</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;the&quot;</span><span class="o">,</span> <span class="s">&quot;quick&quot;</span><span class="o">,</span> <span class="s">&quot;brown&quot;</span><span class="o">,</span> <span class="s">&quot;fox&quot;</span> <span class="o">};</span>

<span class="c1">// Reverse the array itself (using apache commons-collections 1.0+)</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">copy</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">[])</span> <span class="n">items</span><span class="o">.</span><span class="na">clone</span><span class="o">();</span>
<span class="n">CollectionUtils</span><span class="o">.</span><span class="na">reverseArray</span><span class="o">(</span><span class="n">copy</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">copy</span><span class="o">,</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;fox&quot;</span><span class="o">,</span> <span class="s">&quot;brown&quot;</span><span class="o">,</span> <span class="s">&quot;quick&quot;</span><span class="o">,</span> <span class="s">&quot;the&quot;</span> <span class="o">});</span>

<span class="c1">// Iterate backward (using apache commons-collections 3.2+)</span>
<span class="n">ReverseListIterator</span> <span class="n">iter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ReverseListIterator</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">items</span><span class="o">));</span>
<span class="n">StringBuffer</span> <span class="n">firstLetters</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">(</span><span class="n">iter</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
    <span class="n">firstLetters</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">iter</span><span class="o">.</span><span class="na">next</span><span class="o">().</span><span class="na">toString</span><span class="o">().</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span>
<span class="o">}</span>
<span class="k">assert</span> <span class="n">firstLetters</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">&quot;fbqt&quot;</span><span class="o">);</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_4.12</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">names</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;bill&quot;</span><span class="o">,</span> <span class="s">&quot;jack&quot;</span><span class="o">,</span> <span class="s">&quot;charles&quot;</span><span class="o">,</span> <span class="s">&quot;jim&quot;</span><span class="o">,</span> <span class="s">&quot;mike&quot;</span> <span class="o">};</span>

<span class="c1">// using apache commons-collections 1.0+</span>

<span class="n">Predicate</span> <span class="n">jFinder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Predicate</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">evaluate</span><span class="o">(</span><span class="n">Object</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">==</span> <span class="sc">&#39;j&#39;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">};</span>

<span class="c1">// Find the first name that starts with &#39;j&#39;</span>
<span class="n">String</span> <span class="n">firstJ</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">CollectionUtils</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">names</span><span class="o">),</span> <span class="n">jFinder</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">firstJ</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">&quot;jack&quot;</span><span class="o">);</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_4.13</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">names</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;bill&quot;</span><span class="o">,</span> <span class="s">&quot;jack&quot;</span><span class="o">,</span> <span class="s">&quot;charles&quot;</span><span class="o">,</span> <span class="s">&quot;jim&quot;</span><span class="o">,</span> <span class="s">&quot;mike&quot;</span> <span class="o">};</span>

<span class="c1">// using apache commons-collections 1.0+</span>

<span class="n">Predicate</span> <span class="n">jFinder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Predicate</span><span class="o">()</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">evaluate</span><span class="o">(</span><span class="n">Object</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">name</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">==</span> <span class="sc">&#39;j&#39;</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">};</span>

<span class="c1">// Find all names that starts with &#39;j&#39;</span>
<span class="n">Collection</span> <span class="n">selected</span> <span class="o">=</span> <span class="n">CollectionUtils</span><span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">names</span><span class="o">),</span> <span class="n">jFinder</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">selected</span><span class="o">.</span><span class="na">toArray</span><span class="o">(),</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;jack&quot;</span><span class="o">,</span> <span class="s">&quot;jim&quot;</span> <span class="o">});</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_4.14</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>
<span class="c1">// Sort an array of primitives</span>
<span class="kt">int</span><span class="o">[]</span> <span class="n">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]</span> <span class="o">{</span> <span class="mi">100</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">20</span> <span class="o">};</span>
<span class="n">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">numbers</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">numbers</span><span class="o">,</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]</span> <span class="o">{</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">20</span><span class="o">,</span> <span class="mi">100</span> <span class="o">});</span>

<span class="c1">// Sort an array of String alphabetically (default)</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">names</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;100&quot;</span><span class="o">,</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;20&quot;</span> <span class="o">};</span>
<span class="n">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">names</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">names</span><span class="o">,</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;100&quot;</span><span class="o">,</span> <span class="s">&quot;20&quot;</span><span class="o">,</span> <span class="s">&quot;3&quot;</span> <span class="o">});</span>

<span class="c1">// Build a custom comparator to sort String numerically</span>
<span class="n">Comparator</span> <span class="n">custom</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Comparator</span><span class="o">()</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compare</span><span class="o">(</span><span class="n">Object</span> <span class="n">o1</span><span class="o">,</span> <span class="n">Object</span> <span class="n">o2</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">((</span><span class="n">String</span><span class="o">)</span> <span class="n">o1</span><span class="o">)</span> <span class="o">-</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">((</span><span class="n">String</span><span class="o">)</span> <span class="n">o2</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">};</span>

<span class="c1">// Sort an array of String with custom comparator</span>
<span class="n">names</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;100&quot;</span><span class="o">,</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;20&quot;</span> <span class="o">};</span>
<span class="n">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">names</span><span class="o">,</span> <span class="n">custom</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">names</span><span class="o">,</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;20&quot;</span><span class="o">,</span> <span class="s">&quot;100&quot;</span> <span class="o">});</span>

<span class="c1">// Sorting a list of String with custom comparator</span>
<span class="n">List</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;100&quot;</span><span class="o">,</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;20&quot;</span> <span class="o">});</span>
<span class="n">Collections</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="n">custom</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">toArray</span><span class="o">(),</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;20&quot;</span><span class="o">,</span> <span class="s">&quot;100&quot;</span> <span class="o">});</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_4.15</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">names</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;bill&quot;</span><span class="o">,</span> <span class="s">&quot;jack&quot;</span><span class="o">,</span> <span class="s">&quot;charles&quot;</span><span class="o">,</span> <span class="s">&quot;jim&quot;</span><span class="o">,</span> <span class="s">&quot;mike&quot;</span> <span class="o">};</span>

<span class="c1">// Build a custom comparator to sort names by length and alphabetically</span>
<span class="n">Comparator</span> <span class="n">custom</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Comparator</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compare</span><span class="o">(</span><span class="n">Object</span> <span class="n">o1</span><span class="o">,</span> <span class="n">Object</span> <span class="n">o2</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">s1</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">o1</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">s2</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">o2</span><span class="o">;</span>
        
        <span class="kt">int</span> <span class="n">diff</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="n">s2</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">diff</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">diff</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">s2</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">diff</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">};</span>

<span class="c1">// Sorting list of String with custom comparator</span>
<span class="n">List</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">names</span><span class="o">);</span>
<span class="n">Collections</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="n">custom</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">toArray</span><span class="o">(),</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;jim&quot;</span><span class="o">,</span> <span class="s">&quot;bill&quot;</span><span class="o">,</span> <span class="s">&quot;jack&quot;</span><span class="o">,</span> 
<span class="s">&quot;mike&quot;</span><span class="o">,</span> <span class="s">&quot;charles&quot;</span> <span class="o">});</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_4.16</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;1&quot;</span><span class="o">,</span> <span class="s">&quot;2&quot;</span><span class="o">,</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;4&quot;</span><span class="o">,</span> <span class="s">&quot;5&quot;</span> <span class="o">};</span>

<span class="c1">// Using Collections.rotate</span>
<span class="n">List</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">a</span><span class="o">);</span>
<span class="n">Collections</span><span class="o">.</span><span class="na">rotate</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">toArray</span><span class="o">(),</span>
                     <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;4&quot;</span><span class="o">,</span> <span class="s">&quot;5&quot;</span><span class="o">,</span> <span class="s">&quot;1&quot;</span><span class="o">,</span> <span class="s">&quot;2&quot;</span><span class="o">,</span> <span class="s">&quot;3&quot;</span> <span class="o">});</span>

<span class="n">Collections</span><span class="o">.</span><span class="na">rotate</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">toArray</span><span class="o">(),</span>
                     <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;1&quot;</span><span class="o">,</span> <span class="s">&quot;2&quot;</span><span class="o">,</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;4&quot;</span><span class="o">,</span> <span class="s">&quot;5&quot;</span> <span class="o">});</span>

<span class="c1">// Stack is based on Vector, which is synchronized.</span>
<span class="c1">// One could use ArrayStack from apache commons-collections 1.0+,</span>
<span class="c1">// which is NOT synchronized and therefore, faster if multi-threading</span>
<span class="c1">// is not an issue.</span>
<span class="n">Stack</span> <span class="n">circular</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Stack</span><span class="o">();</span>
<span class="n">circular</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">a</span><span class="o">));</span>

<span class="c1">// At this point, 5 is the top of the stack</span>

<span class="c1">// Put the top item at the bottom...</span>
<span class="n">circular</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">circular</span><span class="o">.</span><span class="na">pop</span><span class="o">());</span>
<span class="k">assert</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">circular</span><span class="o">.</span><span class="na">toArray</span><span class="o">(),</span>
                     <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;5&quot;</span><span class="o">,</span> <span class="s">&quot;1&quot;</span><span class="o">,</span> <span class="s">&quot;2&quot;</span><span class="o">,</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;4&quot;</span> <span class="o">});</span>

<span class="c1">// ... and vice versa</span>
<span class="n">circular</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="n">circular</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span>
<span class="k">assert</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">circular</span><span class="o">.</span><span class="na">toArray</span><span class="o">(),</span>
                     <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;1&quot;</span><span class="o">,</span> <span class="s">&quot;2&quot;</span><span class="o">,</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;4&quot;</span><span class="o">,</span> <span class="s">&quot;5&quot;</span> <span class="o">});</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>

<span class="c1">// @@PLEAC@@_4.17</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;1&quot;</span><span class="o">,</span> <span class="s">&quot;2&quot;</span><span class="o">,</span> <span class="s">&quot;3&quot;</span><span class="o">,</span> <span class="s">&quot;4&quot;</span><span class="o">,</span> <span class="s">&quot;5&quot;</span> <span class="o">};</span>

<span class="c1">// One could also pass a subclass of Random as the second parameter to</span>
<span class="c1">// shuffle to use a custom ramdom strategy.</span>
<span class="n">List</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">a</span><span class="o">);</span>
<span class="n">Collections</span><span class="o">.</span><span class="na">shuffle</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">5</span><span class="o">;</span>
<span class="c1">// ----------------------------------------------------------------------------------</span>


<span class="c1">// @@PLEAC@@_5.0</span>
<span class="c1">// The top interface for &quot;Hashes&quot; functionality in Java is java.util.Map. Multiple</span>
<span class="c1">// implementations with some selected added features are available, java.util.HashMap,</span>
<span class="c1">// java.util.Hashtable, java.util.LinkedHashMap and java.util.TreeMap being the most</span>
<span class="c1">// notable ones.</span>
<span class="c1">//</span>
<span class="c1">// Maps cannot contain primitive types, they must contain objects (int -&gt; Integer).</span>
<span class="c1">//</span>
<span class="c1">// Maps don&#39;t have &quot;sugar&quot; syntax for easy creation of arbitrary maps, we need to</span>
<span class="c1">// call several methods for this:</span>
<span class="n">Map</span> <span class="n">age</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">();</span>
<span class="n">age</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="s">&quot;Nat&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span> <span class="mi">24</span> <span class="o">)</span> <span class="o">);</span>
<span class="n">age</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="s">&quot;Jules&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span> <span class="mi">25</span> <span class="o">)</span> <span class="o">);</span>
<span class="n">age</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="s">&quot;Josh&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span> <span class="mi">17</span> <span class="o">)</span> <span class="o">);</span>

<span class="n">Map</span> <span class="n">food_color</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">();</span>
<span class="n">food_color</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="s">&quot;Apple&quot;</span><span class="o">,</span> <span class="s">&quot;red&quot;</span> <span class="o">);</span>
<span class="n">food_color</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="s">&quot;Banana&quot;</span><span class="o">,</span> <span class="s">&quot;yellow&quot;</span> <span class="o">);</span>
<span class="n">food_color</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="s">&quot;Lemon&quot;</span><span class="o">,</span> <span class="s">&quot;yellow&quot;</span> <span class="o">);</span>
<span class="n">food_color</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="s">&quot;Carrot&quot;</span><span class="o">,</span> <span class="s">&quot;orange&quot;</span> <span class="o">);</span>


<span class="c1">// @@PLEAC@@_5.1</span>
<span class="c1">// Setting or replacing a map entry uses Map#put:</span>
<span class="n">Map</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">();</span> <span class="n">Object</span> <span class="n">key</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> <span class="n">Object</span> <span class="n">value</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="n">key</span><span class="o">,</span> <span class="n">value</span> <span class="o">);</span>
<span class="c1">// food_color defined per the introduction; we use an iterator on the keys of the map</span>
<span class="n">food_color</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="s">&quot;Raspberry&quot;</span><span class="o">,</span> <span class="s">&quot;pink&quot;</span> <span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="s">&quot;Known foods:&quot;</span> <span class="o">);</span>
<span class="k">for</span> <span class="o">(</span> <span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">food_color</span><span class="o">.</span><span class="na">keySet</span><span class="o">().</span><span class="na">iterator</span><span class="o">();</span> <span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">();</span> <span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">()</span> <span class="o">);</span>
<span class="o">}</span>


<span class="c1">// @@PLEAC@@_5.2</span>
<span class="c1">// does map have a value for key?</span>
<span class="k">if</span> <span class="o">(</span> <span class="n">map</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span> <span class="n">key</span> <span class="o">)</span> <span class="o">)</span> <span class="o">{</span>
    <span class="c1">// it exists</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>        
    <span class="c1">// it doesn&#39;t</span>
<span class="o">}</span>

<span class="n">String</span><span class="o">[]</span> <span class="n">food_or_drink</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;Banana&quot;</span><span class="o">,</span> <span class="s">&quot;Martini&quot;</span> <span class="o">};</span>
<span class="k">for</span> <span class="o">(</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">food_or_drink</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++</span> <span class="o">)</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">food_or_drink</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">name</span> <span class="o">+</span> <span class="s">&quot; is a &quot;</span> <span class="o">+</span> <span class="o">(</span> <span class="n">food_color</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span> <span class="n">name</span> <span class="o">)</span> <span class="o">?</span> <span class="s">&quot;food&quot;</span> <span class="o">:</span> <span class="s">&quot;drink&quot;</span> <span class="o">)</span> <span class="o">);</span>
<span class="o">}</span>

<span class="n">age</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="s">&quot;Toddler&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span> <span class="mi">3</span> <span class="o">)</span> <span class="o">);</span>
<span class="n">age</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="s">&quot;Unborn&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span> <span class="mi">0</span> <span class="o">)</span> <span class="o">);</span>
<span class="n">age</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="s">&quot;Phantasm&quot;</span><span class="o">,</span> <span class="kc">null</span> <span class="o">);</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">age_tries</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;Toddler&quot;</span><span class="o">,</span> <span class="s">&quot;Unborn&quot;</span><span class="o">,</span> <span class="s">&quot;Phantasm&quot;</span><span class="o">,</span> <span class="s">&quot;Relic&quot;</span> <span class="o">};</span>
<span class="k">for</span> <span class="o">(</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">age_tries</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++</span> <span class="o">)</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">atry</span> <span class="o">=</span> <span class="n">age_tries</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">atry</span> <span class="o">+</span> <span class="s">&quot;: &quot;</span>
                        <span class="o">+</span> <span class="o">(</span> <span class="n">age</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span> <span class="n">atry</span> <span class="o">)</span> <span class="o">?</span> <span class="s">&quot;contains-key &quot;</span> <span class="o">:</span> <span class="s">&quot;&quot;</span> <span class="o">)</span>
                        <span class="o">+</span> <span class="o">(</span> <span class="n">age</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span> <span class="n">atry</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">age</span><span class="o">.</span><span class="na">get</span><span class="o">(</span> <span class="n">atry</span> <span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="s">&quot;non-null &quot;</span> <span class="o">:</span> <span class="s">&quot;&quot;</span> <span class="o">)</span>
                        <span class="o">+</span> <span class="o">(</span> <span class="n">age</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span> <span class="n">atry</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">age</span><span class="o">.</span><span class="na">get</span><span class="o">(</span> <span class="n">atry</span> <span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span>
                            <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="o">(</span> <span class="o">(</span><span class="n">Integer</span><span class="o">)</span><span class="n">age</span><span class="o">.</span><span class="na">get</span><span class="o">(</span> <span class="n">atry</span> <span class="o">)</span> <span class="o">).</span><span class="na">equals</span><span class="o">(</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span> <span class="mi">0</span> <span class="o">)</span> <span class="o">)</span>
                                <span class="o">?</span> <span class="s">&quot;non-zero&quot;</span> <span class="o">:</span> <span class="s">&quot;&quot;</span> <span class="o">)</span> <span class="o">);</span>
<span class="o">}</span>
<span class="c1">// =&gt;</span>
<span class="c1">// Toddler: contains-key non-null non-zero</span>
<span class="c1">// Unborn: contains-key non-null </span>
<span class="c1">// Phantasm: contains-key </span>
<span class="c1">// Relic: </span>
    
<span class="c1">// You use Map#containsKey when you use Perl&#39;s exists -&gt; it checks</span>
<span class="c1">// for existence of a key in a Map.</span>


<span class="c1">// @@PLEAC@@_5.3</span>
<span class="n">food_color</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span> <span class="s">&quot;Banana&quot;</span> <span class="o">);</span>


<span class="c1">// @@PLEAC@@_5.4</span>
<span class="k">for</span> <span class="o">(</span> <span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">food_color</span><span class="o">.</span><span class="na">entrySet</span><span class="o">().</span><span class="na">iterator</span><span class="o">();</span> <span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">();</span> <span class="o">)</span> <span class="o">{</span>
    <span class="n">Map</span><span class="o">.</span><span class="na">Entry</span> <span class="n">e</span> <span class="o">=</span> <span class="o">(</span><span class="n">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">)</span> <span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
    <span class="c1">// do something with e.getKey() and e.getValue()</span>
    <span class="c1">// also supports e.setValue() to update the value</span>
<span class="o">}</span>

<span class="k">for</span> <span class="o">(</span> <span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">food_color</span><span class="o">.</span><span class="na">keySet</span><span class="o">().</span><span class="na">iterator</span><span class="o">();</span> <span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">();</span> <span class="o">)</span> <span class="o">{</span>
    <span class="n">key</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
    <span class="c1">// do something with key</span>
<span class="o">}</span>

<span class="k">for</span> <span class="o">(</span> <span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">food_color</span><span class="o">.</span><span class="na">entrySet</span><span class="o">().</span><span class="na">iterator</span><span class="o">();</span> <span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">();</span> <span class="o">)</span> <span class="o">{</span>
    <span class="n">Map</span><span class="o">.</span><span class="na">Entry</span> <span class="n">e</span> <span class="o">=</span> <span class="o">(</span><span class="n">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">)</span> <span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">e</span><span class="o">.</span><span class="na">getKey</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot; is &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getValue</span><span class="o">()</span> <span class="o">);</span>
<span class="o">}</span>

<span class="c1">// The easiest way to iterate over keys of a Map in ordered keys is to use</span>
<span class="c1">// java.util.TreeMap, which &quot;guarantees that the map will be in ascending</span>
<span class="c1">// key order, sorted according to the natural order for the key&#39;s class&quot;.</span>
<span class="n">TreeMap</span> <span class="n">sorted_foods</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeMap</span><span class="o">(</span> <span class="n">food_color</span> <span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="s">&quot;sorted foods:&quot;</span> <span class="o">);</span>
<span class="k">for</span> <span class="o">(</span> <span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">sorted_foods</span><span class="o">.</span><span class="na">entrySet</span><span class="o">().</span><span class="na">iterator</span><span class="o">();</span> <span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">();</span> <span class="o">)</span> <span class="o">{</span>
    <span class="n">Map</span><span class="o">.</span><span class="na">Entry</span> <span class="n">e</span> <span class="o">=</span> <span class="o">(</span><span class="n">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">)</span> <span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">e</span><span class="o">.</span><span class="na">getKey</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot; is &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getValue</span><span class="o">()</span> <span class="o">);</span>
<span class="o">}</span>

<span class="c1">// <font size="-1"><a href="http://pleac.sourceforge.net/include/java/ch05/CountFrom.java</span>">download the following standalone program</a></font>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Iterator</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.TreeMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.regex.Matcher</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.regex.Pattern</span><span class="o">;</span>

<span class="cm">/** countfrom - count number of messages from each sender. */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CountFrom</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span> <span class="n">String</span> <span class="n">args</span><span class="o">[]</span> <span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">TreeMap</span> <span class="n">from</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeMap</span><span class="o">();</span>
        <span class="n">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span> <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span> <span class="n">System</span><span class="o">.</span><span class="na">in</span> <span class="o">)</span> <span class="o">);</span>
        <span class="n">String</span> <span class="n">line</span><span class="o">;</span>
        <span class="n">Pattern</span> <span class="n">p</span> <span class="o">=</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span> <span class="s">&quot;From: (.*)&quot;</span> <span class="o">);</span>
        <span class="k">while</span> <span class="o">(</span> <span class="o">(</span> <span class="n">line</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">()</span> <span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">matcher</span><span class="o">(</span> <span class="n">line</span> <span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span> <span class="n">m</span><span class="o">.</span><span class="na">lookingAt</span><span class="o">()</span> <span class="o">)</span> <span class="o">{</span>
                <span class="n">Integer</span> <span class="n">current_value</span> <span class="o">=</span> <span class="o">(</span><span class="n">Integer</span><span class="o">)</span> <span class="n">from</span><span class="o">.</span><span class="na">get</span><span class="o">(</span> <span class="n">m</span><span class="o">.</span><span class="na">group</span><span class="o">(</span> <span class="mi">1</span> <span class="o">)</span> <span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span> <span class="n">current_value</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
                    <span class="n">current_value</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span> <span class="mi">1</span> <span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="n">current_value</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span> <span class="n">current_value</span><span class="o">.</span><span class="na">intValue</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">);</span>
                <span class="o">}</span>
                <span class="n">from</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="n">m</span><span class="o">.</span><span class="na">group</span><span class="o">(</span> <span class="mi">1</span> <span class="o">),</span> <span class="n">current_value</span> <span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="k">for</span> <span class="o">(</span> <span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">from</span><span class="o">.</span><span class="na">entrySet</span><span class="o">().</span><span class="na">iterator</span><span class="o">();</span> <span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">();</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">Map</span><span class="o">.</span><span class="na">Entry</span> <span class="n">e</span> <span class="o">=</span> <span class="o">(</span><span class="n">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">)</span> <span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">e</span><span class="o">.</span><span class="na">getKey</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;: &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getValue</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>



<span class="c1">// @@PLEAC@@_5.5</span>
<span class="c1">// Map#toString already produce a pretty decent output:</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">sorted_foods</span> <span class="o">);</span>
<span class="c1">// =&gt;</span>
<span class="c1">// {Apple=red, Carrot=orange, Lemon=yellow, Raspberry=pink}</span>

<span class="c1">// Or do it the Cookbook way:</span>
<span class="k">for</span> <span class="o">(</span> <span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">sorted_foods</span><span class="o">.</span><span class="na">entrySet</span><span class="o">().</span><span class="na">iterator</span><span class="o">();</span> <span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">();</span> <span class="o">)</span> <span class="o">{</span>
    <span class="n">Map</span><span class="o">.</span><span class="na">Entry</span> <span class="n">e</span> <span class="o">=</span> <span class="o">(</span><span class="n">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">)</span> <span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">e</span><span class="o">.</span><span class="na">getKey</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot; =&gt; &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getValue</span><span class="o">()</span> <span class="o">);</span>
<span class="o">}</span>
<span class="c1">// =&gt;</span>
<span class="c1">// Apple =&gt; red</span>
<span class="c1">// Carrot =&gt; orange</span>
<span class="c1">// Lemon =&gt; yellow</span>
<span class="c1">// Raspberry =&gt; pink</span>


<span class="c1">// @@PLEAC@@_5.6</span>
<span class="c1">// java.util.LinkedHashMap &quot;maintains a doubly-linked list running through all of its entries.</span>
<span class="c1">// This linked list defines the iteration ordering, which is normally the order in which keys</span>
<span class="c1">// were inserted into the map (insertion-order)&quot;.</span>
<span class="n">food_color</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedHashMap</span><span class="o">();</span>
<span class="n">food_color</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="s">&quot;Banana&quot;</span><span class="o">,</span> <span class="s">&quot;Yellow&quot;</span> <span class="o">);</span>
<span class="n">food_color</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="s">&quot;Apple&quot;</span><span class="o">,</span> <span class="s">&quot;Green&quot;</span> <span class="o">);</span>
<span class="n">food_color</span><span class="o">.</span><span class="na">put</span><span class="o">(</span> <span class="s">&quot;Lemon&quot;</span><span class="o">,</span> <span class="s">&quot;Yellow&quot;</span> <span class="o">);</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="s">&quot;In insertion order, the foods are:&quot;</span> <span class="o">);</span>
<span class="k">for</span> <span class="o">(</span> <span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">food_color</span><span class="o">.</span><span class="na">keySet</span><span class="o">().</span><span class="na">iterator</span><span class="o">();</span> <span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">();</span> <span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">()</span> <span class="o">);</span>
<span class="o">}</span>
<span class="c1">// =&gt;</span>
<span class="c1">// Banana</span>
<span class="c1">// Apple</span>
<span class="c1">// Lemon</span>


<span class="c1">// @@PLEAC@@_7.0</span>
<span class="c1">// Following import is assumed throughout this section.</span>
<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">BufferedReader</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
        <span class="k">new</span> <span class="nf">FileReader</span><span class="o">(</span><span class="s">&quot;/usr/share/dict/words&quot;</span><span class="o">));</span>
    <span class="n">String</span> <span class="n">line</span><span class="o">;</span>
    <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">line</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;blue&quot;</span><span class="o">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
    <span class="n">input</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Error occured&quot;</span><span class="o">);</span>
<span class="o">}</span>


<span class="c1">// @@PLEAC@@_7.5</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">File</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">File</span><span class="o">.</span><span class="na">createTempFile</span><span class="o">(</span><span class="s">&quot;prefix&quot;</span><span class="o">,</span> <span class="s">&quot;.suffix&quot;</span><span class="o">);</span>
    <span class="n">temp</span><span class="o">.</span><span class="na">deleteOnExit</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;File could not be created&quot;</span><span class="o">);</span>
<span class="o">}</span>


<span class="c1">// vim: set sw=4 : set tw=85 :</span>
</pre></div>
</body>
</html>
