<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Numbers</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="PLEAC-Java"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Strings"
HREF="strings.html"><LINK
REL="NEXT"
TITLE="Dates and Times"
HREF="datesandtimes.html"><style type="text/css">td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
pre { line-height: 125%; }

  </style></head
><BODY TEXT="#cecece" BGCOLOR="#4f6f6f" LINK="#f5deb3" VLINK="#d5ae83"
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PLEAC-Java</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="strings.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="datesandtimes.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="NUMBERS"
>2. Numbers</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN73"
>Checking Whether a String Is a Valid Number</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="n">s</span><span class="o">;</span>
<span class="n">NumberFormat</span> <span class="n">nf</span> <span class="o">=</span> <span class="n">NumberFormat</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">locale</span><span class="o">);</span>
<span class="n">Number</span> <span class="n">nb</span><span class="o">;</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">nb</span> <span class="o">=</span> <span class="n">nf</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ParseException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// not a number</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="n">s1</span><span class="o">;</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">s1</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">NumberFormatException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span> <span class="o">+</span> <span class="s">&quot; is not an integer&quot;</span><span class="o">);</span>
<span class="o">}</span>

<span class="n">String</span> <span class="n">s2</span><span class="o">;</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="kt">float</span> <span class="n">f</span> <span class="o">=</span> <span class="n">Float</span><span class="o">.</span><span class="na">parseFloat</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">NumberFormatException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s2</span> <span class="o">+</span> <span class="s">&quot; is not a float&quot;</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">NumberFormat</span> <span class="n">nf</span> <span class="o">=</span> <span class="n">NumberFormat</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">locale</span><span class="o">);</span>

<span class="kt">boolean</span> <span class="nf">isNumeric</span><span class="o">(</span><span class="n">String</span> <span class="n">string</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
       <span class="n">nf</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">string</span><span class="o">);</span>
       <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
   <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ParseException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
       <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
   <span class="o">}</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN76"
>Comparing Floating-Point Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="cm">/**</span>
<span class="cm"> * Returns true if given values are equal to accuracy number of decimal places</span>
<span class="cm"> */</span>
<span class="kt">boolean</span> <span class="nf">equal</span><span class="o">(</span><span class="kt">double</span> <span class="n">num1</span><span class="o">,</span> <span class="kt">double</span> <span class="n">num2</span><span class="o">,</span> <span class="kt">int</span> <span class="n">accuracy</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">BigDecimal</span> <span class="n">bigNum1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="n">num1</span><span class="o">).</span><span class="na">setScale</span><span class="o">(</span><span class="n">accuracy</span><span class="o">,</span> <span class="n">BigDecimal</span><span class="o">.</span><span class="na">ROUND_DOWN</span><span class="o">);</span>
    <span class="n">BigDecimal</span> <span class="n">bigNum2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="n">num2</span><span class="o">).</span><span class="na">setScale</span><span class="o">(</span><span class="n">accuracy</span><span class="o">,</span> <span class="n">BigDecimal</span><span class="o">.</span><span class="na">ROUND_DOWN</span><span class="o">);</span>
    <span class="k">return</span> <span class="o">(</span><span class="n">bigNum1</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">bigNum2</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">);</span>
  <span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// with a scaling factor</span>
<span class="kt">int</span> <span class="n">wage</span> <span class="o">=</span> <span class="mi">536</span><span class="o">;</span>       <span class="c1">// $5.36/hour</span>
<span class="kt">int</span> <span class="n">week</span> <span class="o">=</span> <span class="mi">40</span> <span class="o">*</span> <span class="n">wage</span><span class="o">;</span> <span class="c1">// $214.40</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;One week&#39;s wage is: $&quot;</span> <span class="o">+</span> <span class="o">(</span><span class="kt">double</span><span class="o">)</span> <span class="n">week</span><span class="o">/</span><span class="mi">100</span><span class="o">);</span>
<span class="c1">//=&gt; One week&#39;s wage is: $214.40</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// with BigDecimal</span>
<span class="n">BigDecimal</span> <span class="n">wage</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">&quot;5.36&quot;</span><span class="o">);</span> <span class="c1">// $5.36/hour</span>
<span class="n">BigDecimal</span> <span class="n">hours</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">&quot;40&quot;</span><span class="o">);</span>  <span class="c1">// 40 hours/week</span>
<span class="n">BigDecimal</span> <span class="n">week</span> <span class="o">=</span> <span class="n">wage</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">hours</span><span class="o">);</span>   <span class="c1">// $214.40</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;One week&#39;s wage is: $&quot;</span> <span class="o">+</span> <span class="n">week</span><span class="o">);</span>
<span class="c1">//=&gt; One week&#39;s wage is: $214.40</span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN79"
>Rounding Floating-Point Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">BigDecimal</span> <span class="n">rounded</span> <span class="o">=</span> <span class="n">unrounded</span><span class="o">.</span><span class="na">setScale</span><span class="o">(</span><span class="n">scale</span><span class="o">,</span> <span class="n">roundingMode</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">BigDecimal</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">&quot;0.255&quot;</span><span class="o">);</span>
<span class="n">BigDecimal</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="na">setScale</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">BigDecimal</span><span class="o">.</span><span class="na">ROUND_HALF_UP</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Unrounded: &quot;</span> <span class="o">+</span> <span class="n">a</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Rounded: &quot;</span> <span class="o">+</span> <span class="n">b</span><span class="o">);</span>
<span class="c1">//=&gt; Unrounded: 0.255</span>
<span class="c1">//=&gt; Rounded: 0.26</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// caution, Math.rint() rounds to the nearest integer !</span>
<span class="kt">double</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">double</span><span class="o">[]</span> <span class="o">{</span><span class="mf">3.3</span> <span class="o">,</span> <span class="mf">3.5</span> <span class="o">,</span> <span class="mf">3.7</span><span class="o">,</span> <span class="o">-</span><span class="mf">3.3</span><span class="o">};</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;number\tint\tfloor\tceil&quot;</span><span class="o">);</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Math</span><span class="o">.</span><span class="na">rint</span><span class="o">(</span><span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">])</span> <span class="o">+</span> <span class="s">&quot;\t&quot;</span> <span class="o">+</span> <span class="n">Math</span><span class="o">.</span><span class="na">floor</span><span class="o">(</span><span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">])</span> <span class="o">+</span> <span class="s">&quot;\t&quot;</span> <span class="o">+</span> <span class="n">Math</span><span class="o">.</span><span class="na">ceil</span><span class="o">(</span><span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">]));</span>

<span class="c1">//=&gt; number  int     floor   ceil</span>
<span class="c1">//=&gt; </span>
<span class="c1">//=&gt;  3.3     3.0     3.0     4.0</span>
<span class="c1">//=&gt; </span>
<span class="c1">//=&gt;  3.5     3.0     3.0     4.0</span>
<span class="c1">//=&gt; </span>
<span class="c1">//=&gt;  3.7     3.0     3.0     4.0</span>
<span class="c1">//=&gt; </span>
<span class="c1">//=&gt; -3.3    -3.0    -4.0    -3.0</span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN82"
>Converting Between Binary and Decimal</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">s</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="s">&quot;0110110&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span> <span class="c1">// i = 54</span>
<span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="mi">54</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>     <span class="c1">// s = 110110</span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN85"
>Operating on a Series of Integers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">X</span><span class="o">,</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">Y</span><span class="o">,</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="n">i</span> <span class="n">is</span> <span class="n">set</span> <span class="n">to</span> <span class="n">every</span> <span class="n">integer</span> <span class="n">from</span> <span class="n">X</span> <span class="n">to</span> <span class="n">Y</span><span class="o">,</span> <span class="n">inclusive</span>
<span class="o">}</span>

<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">X</span><span class="o">,</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">Y</span><span class="o">,</span> <span class="n">i</span><span class="o">+=</span><span class="mi">7</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">i</span> <span class="n">is</span> <span class="n">set</span> <span class="n">to</span> <span class="n">every</span> <span class="n">integer</span> <span class="n">from</span> <span class="n">X</span> <span class="n">to</span> <span class="n">Y</span><span class="o">,</span> <span class="n">stepsize</span> <span class="o">=</span> <span class="mi">7</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">&quot;Childhood is: &quot;</span><span class="o">);</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">5</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="mi">12</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="s">&quot; &quot;</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>

<span class="c1">//=&gt; Childhood is: 5 6 7 8 9 10 11 12 </span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN88"
>Working with Roman Numerals</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// no roman module available</span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN91"
>Generating Random Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">Random</span> <span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">();</span>
<span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="n">Y</span><span class="o">-</span><span class="n">X</span><span class="o">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="n">X</span><span class="o">;</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">51</span><span class="o">)</span> <span class="o">+</span> <span class="mi">25</span><span class="o">;</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">String</span> <span class="n">elt</span> <span class="o">=</span> <span class="n">array</span><span class="o">[</span><span class="n">random</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="n">array</span><span class="o">.</span><span class="na">length</span><span class="o">)];</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">StringBuffer</span> <span class="n">buffer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">8</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
    <span class="n">buffer</span><span class="o">.</span><span class="na">append</span><span class="o">((</span><span class="kt">char</span><span class="o">)</span> <span class="o">(</span><span class="n">random</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">43</span><span class="o">)</span> <span class="o">+</span> <span class="mi">48</span><span class="o">));</span>
<span class="n">String</span> <span class="n">password</span> <span class="o">=</span> <span class="n">buffer</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN94"
>Generating Different Random Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">long</span> <span class="n">seed</span><span class="o">;</span>
<span class="n">Random</span> <span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">(</span><span class="n">seed</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">DataInputStream</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DataInputStream</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">);</span>
    <span class="n">Random</span> <span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">(</span><span class="n">input</span><span class="o">.</span><span class="na">readLong</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Exception occured while initialising random seed&quot;</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN97"
>Making Numbers Even More Random</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// java.util.Random class already uses a 48-bit seed</span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN100"
>Generating Biased Random Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// use Random.nextGaussian() method</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="cm">/*</span>
<span class="cm"> * WeightedDistribution.java</span>
<span class="cm"> */</span>
<span class="kn">package</span> <span class="n">pleac</span><span class="o">.</span><span class="na">ch02</span><span class="o">.</span><span class="na">part10</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Random</span><span class="o">;</span>
<span class="cm">/**</span>
<span class="cm"> * A weighted distribution of values</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WeightedDistribution</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">Random</span> <span class="n">random</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Object</span><span class="o">[]</span> <span class="n">values</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">limits</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">total</span><span class="o">;</span>

    <span class="cm">/**</span>
<span class="cm">     * Creates a new weighted distribution with given values and given weights</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="nf">WeightedDistribution</span><span class="o">(</span><span class="n">Object</span><span class="o">[]</span> <span class="n">values</span><span class="o">,</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">weights</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">values</span><span class="o">.</span><span class="na">length</span> <span class="o">!=</span> <span class="n">weights</span><span class="o">.</span><span class="na">length</span><span class="o">)</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span>
                    <span class="s">&quot;values and weights array size don&#39;t match&quot;</span><span class="o">);</span>

        <span class="k">this</span><span class="o">.</span><span class="na">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">();</span>
        <span class="k">this</span><span class="o">.</span><span class="na">values</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[</span><span class="n">values</span><span class="o">.</span><span class="na">length</span><span class="o">];</span>
        <span class="k">this</span><span class="o">.</span><span class="na">limits</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">weights</span><span class="o">.</span><span class="na">length</span><span class="o">];</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">values</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">values</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">values</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="n">total</span> <span class="o">+=</span> <span class="n">weights</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="k">this</span><span class="o">.</span><span class="na">limits</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">total</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Draws a random value</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">token</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="n">total</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">limits</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">token</span> <span class="o">&lt;=</span> <span class="n">limits</span><span class="o">[</span><span class="n">i</span><span class="o">])</span>
                <span class="k">return</span> <span class="n">values</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>

<span class="n">Object</span> <span class="n">values</span><span class="o">[];</span>
<span class="kt">int</span> <span class="n">weights</span><span class="o">[];</span>

<span class="c1">// creates distribution</span>
<span class="n">WeightedDistribution</span> <span class="n">distribution</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WeightedDistribution</span><span class="o">(</span><span class="n">values</span><span class="o">,</span> <span class="n">weights</span><span class="o">);</span>
<span class="c1">// draws a value from it</span>
<span class="n">Object</span> <span class="n">value</span> <span class="o">=</span> <span class="n">distribution</span><span class="o">.</span><span class="na">draw</span><span class="o">();</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">Random</span> <span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">();</span>
<span class="kt">int</span> <span class="n">mean</span> <span class="o">=</span> <span class="mi">25</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">sdev</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>
<span class="kt">double</span> <span class="n">salary</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="na">nextGaussian</span><span class="o">()</span> <span class="o">*</span> <span class="n">sdev</span> <span class="o">+</span> <span class="n">mean</span><span class="o">;</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;You have been hired at &quot;</span> <span class="o">+</span> <span class="n">salary</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN103"
>Doing Trigonometry in Degrees, not Radians</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// use Math.toDegrees() and Math.toRadians() methods</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">double</span> <span class="n">radians</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">toRadians</span><span class="o">(</span><span class="n">degrees</span><span class="o">);</span>
<span class="kt">double</span> <span class="n">degrees</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">toDegrees</span><span class="o">(</span><span class="n">radians</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="cm">/**</span>
<span class="cm"> * Returns sine of an angle expressed in degrees</span>
<span class="cm"> */</span>
<span class="kt">double</span> <span class="nf">degreeSine</span><span class="o">(</span><span class="kt">double</span> <span class="n">a</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Math</span><span class="o">.</span><span class="na">sin</span><span class="o">(</span><span class="n">Math</span><span class="o">.</span><span class="na">toRadians</span><span class="o">(</span><span class="n">a</span><span class="o">));</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN106"
>Calculating More Trigonometric Functions</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// use Math.tan() method</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">double</span> <span class="n">y</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">acos</span><span class="o">(</span><span class="mf">3.7</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN109"
>Taking Logarithms</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">double</span> <span class="n">log</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mf">10000.00</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="cm">/**</span>
<span class="cm"> * Returns log in given base of given value</span>
<span class="cm"> */</span>
<span class="kt">double</span> <span class="nf">logBase</span><span class="o">(</span><span class="kt">int</span> <span class="n">base</span><span class="o">,</span> <span class="kt">double</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Math</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="n">value</span><span class="o">)/</span><span class="n">Math</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="n">base</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">double</span> <span class="n">answer</span> <span class="o">=</span> <span class="n">logBase</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mf">10000.00</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;log10(10000) = &quot;</span> <span class="o">+</span> <span class="n">answer</span><span class="o">);</span>
<span class="n">log10</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span><span class="mi">000</span><span class="o">)</span> <span class="o">=</span> <span class="mi">4</span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN112"
>Multiplying Matrices</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="cm">/**</span>
<span class="cm"> * Compute multiplication of two given matrices</span>
<span class="cm"> */</span>
<span class="kt">int</span><span class="o">[][]</span> <span class="nf">multiplyMatrix</span><span class="o">(</span><span class="kt">int</span><span class="o">[][]</span> <span class="n">matrix1</span><span class="o">,</span> <span class="kt">int</span><span class="o">[][]</span> <span class="n">matrix2</span><span class="o">)</span> <span class="o">{</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">matrix1</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">&quot;Null height matrix1&quot;</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">rows1</span> <span class="o">=</span> <span class="n">matrix1</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">matrix1</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">&quot;Null width matrix1&quot;</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">cols1</span> <span class="o">=</span> <span class="n">matrix1</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">length</span><span class="o">;</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">matrix2</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">&quot;Null height matrix2&quot;</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">rows2</span> <span class="o">=</span> <span class="n">matrix2</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">matrix2</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">&quot;Null width matrix2&quot;</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">cols2</span> <span class="o">=</span> <span class="n">matrix2</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">length</span><span class="o">;</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">cols1</span> <span class="o">!=</span> <span class="n">rows2</span><span class="o">)</span> 
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">&quot;Matrices don&#39;t match: &quot;</span> <span class="o">+</span> <span class="n">cols1</span> <span class="o">+</span> <span class="s">&quot; != &quot;</span> <span class="o">+</span> <span class="n">rows2</span><span class="o">);</span>

    <span class="kt">int</span><span class="o">[][]</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">rows1</span><span class="o">][</span><span class="n">cols2</span><span class="o">];</span>

    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">rows1</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> 
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">cols2</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span>
	    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">k</span><span class="o">&lt;</span><span class="n">cols1</span><span class="o">;</span> <span class="n">k</span><span class="o">++)</span>
                <span class="n">result</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">+=</span> <span class="n">matrix1</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">k</span><span class="o">]</span> <span class="o">*</span> <span class="n">matrix2</span><span class="o">[</span><span class="n">k</span><span class="o">][</span><span class="n">j</span><span class="o">];</span>

    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">int</span><span class="o">[][]</span> <span class="n">matrix1</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[][]</span> <span class="o">{</span>
   <span class="o">{</span><span class="mi">3</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">},</span>
   <span class="o">{</span><span class="mi">5</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">8</span><span class="o">}</span>
<span class="o">};</span>

<span class="kt">int</span><span class="o">[][]</span> <span class="n">matrix2</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[][]</span> <span class="o">{</span>
   <span class="o">{</span><span class="mi">4</span><span class="o">,</span> <span class="mi">7</span><span class="o">},</span>
   <span class="o">{</span><span class="mi">9</span><span class="o">,</span> <span class="mi">3</span><span class="o">},</span>
   <span class="o">{</span><span class="mi">8</span><span class="o">,</span> <span class="mi">1</span><span class="o">}</span>
<span class="o">};</span>

<span class="kt">int</span><span class="o">[][]</span> <span class="n">product</span> <span class="o">=</span> <span class="n">multiplyMatrix</span><span class="o">(</span><span class="n">matrix1</span><span class="o">,</span> <span class="n">matrix2</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN115"
>Using Complex Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="cm">/**</span>
<span class="cm"> * A basic complex number implementation</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Complex</span> <span class="o">{</span>
    
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">real</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">imaginary</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Complex</span><span class="o">(</span><span class="kt">int</span> <span class="n">real</span><span class="o">,</span> <span class="kt">int</span> <span class="n">imaginary</span><span class="o">)</span> <span class="o">{</span>
	<span class="k">this</span><span class="o">.</span><span class="na">real</span> <span class="o">=</span> <span class="n">real</span><span class="o">;</span>
	<span class="k">this</span><span class="o">.</span><span class="na">imaginary</span> <span class="o">=</span> <span class="n">imaginary</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getReal</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">real</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getImaginary</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">imaginary</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Complex</span> <span class="nf">multiply</span><span class="o">(</span><span class="n">Complex</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
	<span class="k">return</span> <span class="k">new</span> <span class="nf">Complex</span><span class="o">(</span>
           <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">real</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="na">getReal</span><span class="o">())</span> <span class="o">-</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">imaginary</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="na">getImaginary</span><span class="o">()),</span>
           <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">real</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="na">getImaginary</span><span class="o">())</span> <span class="o">+</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">imaginary</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="na">getReal</span><span class="o">())</span>
       <span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">imaginary</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
	    <span class="k">return</span> <span class="n">real</span> <span class="o">+</span> <span class="s">&quot;+&quot;</span> <span class="o">+</span> <span class="n">Math</span><span class="o">.</span><span class="na">abs</span><span class="o">(</span><span class="n">imaginary</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;i&quot;</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">imaginary</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span>
	    <span class="k">return</span> <span class="n">real</span> <span class="o">+</span> <span class="s">&quot;-&quot;</span> <span class="o">+</span> <span class="n">Math</span><span class="o">.</span><span class="na">abs</span><span class="o">(</span><span class="n">imaginary</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;i&quot;</span><span class="o">;</span>
	<span class="k">return</span> <span class="n">real</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">Complex</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Complex</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">5</span><span class="o">);</span>  <span class="c1">// 3 + 5i</span>
<span class="n">Complex</span> <span class="n">b</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Complex</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">);</span> <span class="c1">// 2 - 2i</span>
<span class="n">Complex</span> <span class="n">c</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">b</span><span class="o">);</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;c = &quot;</span> <span class="o">+</span> <span class="n">c</span><span class="o">);</span>
<span class="c1">//=&gt; c = 16+4i</span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN118"
>Converting Between Octal and Hexadecimal</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">int</span> <span class="n">number</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">hexadecimal</span><span class="o">,</span> <span class="mi">16</span><span class="o">);</span> <span class="c1">// hexadecimal</span>
<span class="kt">int</span> <span class="n">number</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">octal</span><span class="o">,</span> <span class="mi">8</span><span class="o">);</span>        <span class="c1">// octal</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Gimme a number in decimal, octal, or hex: &quot;</span><span class="o">);</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">BufferedReader</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>
    <span class="n">String</span> <span class="n">num</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">().</span><span class="na">trim</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">number</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">num</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;0x&quot;</span><span class="o">))</span>
	<span class="n">number</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">num</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="mi">16</span><span class="o">);</span>
	<span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">num</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;0&quot;</span><span class="o">))</span>
	    <span class="n">number</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">num</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="mi">8</span><span class="o">);</span>
	    <span class="k">else</span>
		<span class="n">number</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">num</span><span class="o">);</span>

    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Decimal value: &quot;</span> <span class="o">+</span> <span class="n">number</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Exception occured while getting input&quot;</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">NumberFormatException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Exception occured while parsing input&quot;</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Enter file permission in octal: &quot;</span><span class="o">);</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">BufferedReader</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>
    <span class="n">String</span> <span class="n">num</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">().</span><span class="na">trim</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">permission</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">num</span><span class="o">,</span> <span class="mi">8</span><span class="o">);</span>

    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Decimal value: &quot;</span> <span class="o">+</span> <span class="n">permission</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Exception occured while getting input&quot;</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">NumberFormatException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Exception occured while parsing input&quot;</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN121"
>Putting Commas in Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// using a localized number format</span>
<span class="n">NumberFormat</span> <span class="n">format</span> <span class="o">=</span> <span class="n">NumberFormat</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">locale</span><span class="o">);</span>

<span class="n">format</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// using a customized number format</span>
<span class="n">DecimalFormatSymbols</span> <span class="n">symbols</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DecimalFormatSymbols</span><span class="o">();</span>
<span class="n">symbols</span><span class="o">.</span><span class="na">setGroupingSeparator</span><span class="o">(</span><span class="sc">&#39;,&#39;</span><span class="o">);</span>
<span class="n">DecimalFormat</span> <span class="n">format</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DecimalFormat</span><span class="o">();</span>
<span class="n">format</span><span class="o">.</span><span class="na">setDecimalFormatSymbols</span><span class="o">(</span><span class="n">symbols</span><span class="o">);</span>

<span class="n">format</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">int</span> <span class="n">hits</span> <span class="o">=</span> <span class="n">truly_random_value</span><span class="o">();</span> <span class="c1">// negative hits!</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Your web page received &quot;</span> <span class="o">+</span> <span class="n">format</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">hits</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; accesses last month.&quot;</span><span class="o">);</span>
<span class="c1">//=&gt; Your web page received -1,740,525,205 accesses last month.</span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN124"
>Printing Correct Plurals</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;It took &quot;</span> <span class="o">+</span> <span class="n">time</span> <span class="o">+</span> <span class="s">&quot; hour&quot;</span> <span class="o">+</span> <span class="o">((</span><span class="n">time</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">?</span> <span class="s">&quot;&quot;</span> <span class="o">:</span> <span class="s">&quot;s&quot;</span><span class="o">));</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">time</span> <span class="o">+</span> <span class="s">&quot; hour&quot;</span> <span class="o">+</span> <span class="o">((</span><span class="n">time</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">?</span> <span class="s">&quot; is&quot;</span> <span class="o">:</span> <span class="s">&quot;s are&quot;</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; enough&quot;</span><span class="o">);</span>  
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="kt">double</span><span class="o">[]</span> <span class="n">limits</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">double</span><span class="o">[]</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="n">ChoiceFormat</span><span class="o">.</span><span class="na">nextDouble</span><span class="o">(</span><span class="mi">1</span><span class="o">)};</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">names</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span><span class="s">&quot;century&quot;</span><span class="o">,</span> <span class="s">&quot;centuries&quot;</span><span class="o">};</span>
<span class="n">ChoiceFormat</span> <span class="n">format</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ChoiceFormat</span><span class="o">(</span><span class="n">limits</span><span class="o">,</span> <span class="n">names</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;It took &quot;</span> <span class="o">+</span> <span class="n">time</span> <span class="o">+</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="n">format</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">time</span><span class="o">));</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">Perl5Util</span> <span class="n">util</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Perl5Util</span><span class="o">();</span>
<span class="cm">/**</span>
<span class="cm"> * Compute plural of given noun</span>
<span class="cm"> */</span>
<span class="n">String</span> <span class="nf">nounPlural</span><span class="o">(</span><span class="n">String</span> <span class="n">noun</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// order really matters here!</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/ss$/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">))</span>
	<span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/ss$/sses&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/([psc]h)$/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">))</span>
	<span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/([psc]h)$/${1}es/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/z$/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">))</span>
	<span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/z$/zes/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/ff$/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">))</span>
	<span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/ff$/ffs/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/f$/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">))</span>
	<span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/f$/ves/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/ey$/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">))</span>
	<span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/ey$/eys/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/y$/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">))</span>
	<span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/y$/ies/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/ix$/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">))</span>
	<span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/ix$/ices/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">util</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="s">&quot;/([sx])$/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">))</span>
	<span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/([sx])$/$1es/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="na">substitute</span><span class="o">(</span><span class="s">&quot;s/$/s/&quot;</span><span class="o">,</span> <span class="n">noun</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN127"
>Program: Calculating Prime Factors</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">//=&gt; # java pleac.ch02.part19.BigFact 8 9 96 2178</span>
<span class="c1">//=&gt; 8: 2^3</span>
<span class="c1">//=&gt; 9: 3^2</span>
<span class="c1">//=&gt; 96: 2^5 3</span>
<span class="c1">//=&gt; 2178: 2 3^2 11^2</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">//=&gt; # java pleac.ch02.part19.BigFact 25000000000000000000000000</span>
<span class="c1">//=&gt; 25000000000000000000000000: 2^24 5^26</span>
<span class="c1">//=&gt; # java pleac.ch02.part19.BigFact 239322000000000000000000</span>
<span class="c1">//=&gt; 239322000000000000000000: 2^19 3 5^18 39887</span>
<span class="c1">//----------------------------------------------------------------------------------</span>
<span class="cm">/*</span>
<span class="cm"> * BigFact.java</span>
<span class="cm"> */</span>
<span class="kn">package</span> <span class="n">pleac</span><span class="o">.</span><span class="na">ch02</span><span class="o">.</span><span class="na">part19</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.math.BigInteger</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="cm">/**</span>
<span class="cm"> * Calculate prime factors</span>
<span class="cm"> * Usage: java pleac.ch02.part19.BigFact [-b] &lt;number&gt;</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BigFact</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Integer</span> <span class="n">ONE</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">TreeMap</span> <span class="nf">getFactors</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">orig</span> <span class="o">=</span> <span class="n">n</span><span class="o">;</span>
        <span class="n">TreeMap</span> <span class="n">factors</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeMap</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">i</span><span class="o">,</span> <span class="n">sqi</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="o">,</span> <span class="n">sqi</span> <span class="o">=</span> <span class="mi">4</span><span class="o">;</span> <span class="n">sqi</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="o">;</span> <span class="n">sqi</span> <span class="o">+=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">i</span><span class="o">++</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">n</span> <span class="o">/=</span> <span class="n">i</span><span class="o">;</span>
                <span class="n">Integer</span> <span class="n">factor</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(!</span> <span class="n">factors</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">factor</span><span class="o">))</span>
                    <span class="n">factors</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">factor</span><span class="o">,</span> <span class="n">ONE</span><span class="o">);</span>
                <span class="k">else</span>
                    <span class="n">factors</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">factor</span><span class="o">,</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(((</span><span class="n">Integer</span><span class="o">)</span> <span class="n">factors</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">factor</span><span class="o">)).</span><span class="na">intValue</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">));</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">((</span><span class="n">n</span> <span class="o">!=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">n</span> <span class="o">!=</span> <span class="n">orig</span><span class="o">))</span>
            <span class="n">factors</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="n">n</span><span class="o">),</span> <span class="n">ONE</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">factors</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">TreeMap</span> <span class="nf">getFactors</span><span class="o">(</span><span class="n">BigInteger</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">BigInteger</span> <span class="n">orig</span> <span class="o">=</span> <span class="n">n</span><span class="o">;</span>
        <span class="n">TreeMap</span> <span class="n">factors</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeMap</span><span class="o">();</span>
        <span class="n">BigInteger</span> <span class="n">i</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">&quot;2&quot;</span><span class="o">);</span>
        <span class="n">BigInteger</span> <span class="n">sqi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">&quot;4&quot;</span><span class="o">);</span>
        <span class="n">BigInteger</span> <span class="n">step</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">&quot;2&quot;</span><span class="o">);</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">sqi</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">n</span><span class="o">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">n</span><span class="o">.</span><span class="na">mod</span><span class="o">(</span><span class="n">i</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">ZERO</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="na">divide</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(!</span> <span class="n">factors</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">i</span><span class="o">))</span>
                    <span class="n">factors</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">);</span>
                <span class="k">else</span>
                    <span class="n">factors</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="o">((</span><span class="n">BigInteger</span><span class="o">)</span> <span class="n">factors</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">)).</span><span class="na">add</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">));</span>
            <span class="o">}</span>
            <span class="n">sqi</span> <span class="o">=</span> <span class="n">sqi</span><span class="o">.</span><span class="na">add</span><span class="o">((</span><span class="n">i</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">step</span><span class="o">)).</span><span class="na">add</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">));</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">((!</span> <span class="n">n</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">))</span> <span class="o">&amp;&amp;</span> <span class="o">(!</span> <span class="n">n</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">orig</span><span class="o">)))</span>
            <span class="n">factors</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">n</span><span class="o">,</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">factors</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">displayFactors</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">,</span> <span class="n">TreeMap</span> <span class="n">factors</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">n</span> <span class="o">+</span> <span class="s">&quot;: &quot;</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">factors</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;PRIME&quot;</span><span class="o">);</span>
        <span class="k">else</span> <span class="o">{</span>
            <span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">factors</span><span class="o">.</span><span class="na">keySet</span><span class="o">().</span><span class="na">iterator</span><span class="o">();</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">Object</span> <span class="n">factor</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
                <span class="n">Object</span> <span class="n">power</span> <span class="o">=</span> <span class="n">factors</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">factor</span><span class="o">);</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">factor</span> <span class="o">+</span> <span class="o">((</span><span class="n">power</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">ONE</span><span class="o">))?</span> <span class="s">&quot;&quot;</span><span class="o">:</span> <span class="s">&quot;^&quot;</span> <span class="o">+</span> <span class="n">power</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; &quot;</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">displayFactors</span><span class="o">(</span><span class="n">BigInteger</span> <span class="n">n</span><span class="o">,</span> <span class="n">TreeMap</span> <span class="n">factors</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">n</span> <span class="o">+</span> <span class="s">&quot;: &quot;</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">factors</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;PRIME&quot;</span><span class="o">);</span>
        <span class="k">else</span> <span class="o">{</span>
            <span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">factors</span><span class="o">.</span><span class="na">keySet</span><span class="o">().</span><span class="na">iterator</span><span class="o">();</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">Object</span> <span class="n">factor</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
                <span class="n">Object</span> <span class="n">power</span> <span class="o">=</span> <span class="n">factors</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">factor</span><span class="o">);</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">factor</span> <span class="o">+</span> <span class="o">((</span><span class="n">power</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">))?</span> <span class="s">&quot;&quot;</span><span class="o">:</span> <span class="s">&quot;^&quot;</span> <span class="o">+</span> <span class="n">power</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; &quot;</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Usage: java pleac.ch02.part19.BigFact [-b] &lt;number&gt;...&quot;</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kt">boolean</span> <span class="n">useBigInteger</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">equals</span><span class="o">(</span><span class="s">&quot;-b&quot;</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">useBigInteger</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">index</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">args</span><span class="o">.</span><span class="na">length</span><span class="o">;</span><span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">useBigInteger</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">BigInteger</span> <span class="n">n</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
                <span class="n">displayFactors</span><span class="o">(</span><span class="n">n</span><span class="o">,</span> <span class="n">getFactors</span><span class="o">(</span><span class="n">n</span><span class="o">));</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
                <span class="n">displayFactors</span><span class="o">(</span><span class="n">n</span><span class="o">,</span> <span class="n">getFactors</span><span class="o">(</span><span class="n">n</span><span class="o">));</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">NumberFormatException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">BigInteger</span> <span class="n">n</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
                    <span class="n">displayFactors</span><span class="o">(</span><span class="n">n</span><span class="o">,</span> <span class="n">getFactors</span><span class="o">(</span><span class="n">n</span><span class="o">));</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>

    <span class="o">}</span>
    
<span class="o">}</span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="strings.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="datesandtimes.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Strings</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Dates and Times</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>