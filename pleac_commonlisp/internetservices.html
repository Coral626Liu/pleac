<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Internet Services</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="PLEAC-Common Lisp"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Sockets"
HREF="sockets.html"><LINK
REL="NEXT"
TITLE="CGI Programming"
HREF="cgiprogramming.html"><style type="text/css">td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
pre { line-height: 125%; }

  </style></head
><BODY TEXT="#cecece" BGCOLOR="#4f6f6f" LINK="#f5deb3" VLINK="#d5ae83"
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PLEAC-Common Lisp</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="sockets.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="cgiprogramming.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="INTERNETSERVICES"
>18. Internet Services</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN978"
>Simple DNS Lookups</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">;;;-----------------------------</span>
<span class="p">(</span><span class="nb">use-package</span> <span class="ss">:sb-bsd-sockets</span><span class="p">)</span>
<span class="p">(</span><span class="nb">defparameter</span> <span class="vg">*addresses*</span> <span class="p">(</span><span class="nv">host-ent-addresses</span> <span class="p">(</span><span class="nv">get-host-by-name</span> <span class="nv">name</span><span class="p">)))</span>
<span class="c1">;; *addresses* is a list of IP addresses (#(192 48 96 9) #(192 48 96 23))</span>
<span class="c1">;;;-----------------------------</span>
<span class="p">(</span><span class="nb">defun</span> <span class="nv">inet-ntoa</span> <span class="p">(</span><span class="nv">packed-address</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">format</span> <span class="no">nil</span> <span class="s">&quot;~{~D~^.~}&quot;</span> <span class="p">(</span><span class="nb">coerce</span> <span class="nv">packed-address</span> <span class="ss">&#39;list</span><span class="p">)))</span>

<span class="p">(</span><span class="nb">defparameter</span> <span class="vg">*address*</span> <span class="p">(</span><span class="nv">inet-ntoa</span> <span class="p">(</span><span class="nv">make-inet-address</span> <span class="vg">*name*</span><span class="p">)))</span>
<span class="c1">;;;-----------------------------</span>
<span class="p">(</span><span class="nb">use-package</span> <span class="ss">:sb-bsd-sockets</span><span class="p">)</span>
<span class="p">(</span><span class="nb">defparameter</span> <span class="vg">*name*</span> <span class="p">(</span><span class="nv">get-host-by-address</span> <span class="o">#(</span><span class="mi">192</span> <span class="mi">48</span> <span class="mi">96</span> <span class="mi">9</span><span class="p">)))</span>
<span class="c1">;; *NAME* is the hostname &quot;ftp.uu.net&quot;</span>
<span class="c1">;;;-----------------------------</span>
<span class="p">(</span><span class="nb">use-package</span> <span class="ss">:sb-bsd-sockets</span><span class="p">)</span>
<span class="p">(</span><span class="nb">defparameter</span> <span class="vg">*packed-address*</span> <span class="p">(</span><span class="nv">make-inet-address</span> <span class="s">&quot;208.146.140.1&quot;</span><span class="p">))</span>
<span class="p">(</span><span class="nb">defparameter</span> <span class="vg">*ascii-address*</span> <span class="p">(</span><span class="nv">inet-ntoa</span> <span class="vg">*packed-address*</span><span class="p">))</span> <span class="c1">; INET-NTOA defined above</span>
<span class="c1">;;;-----------------------------</span>
<span class="p">(</span><span class="nb">use-package</span> <span class="ss">:sb-bsd-sockets</span><span class="p">)</span>
<span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nv">packed</span> <span class="p">(</span><span class="nv">get-host-by-name</span> <span class="vg">*hostname*</span><span class="p">))</span> <span class="c1">; no need for die, will signal a condition</span>
       <span class="p">(</span><span class="nv">address</span> <span class="p">(</span><span class="nv">host-ent-address</span> <span class="nv">packed</span><span class="p">)))</span>
  <span class="p">(</span><span class="nb">format</span> <span class="no">t</span> <span class="s">&quot;I will use ~A as the address for ~A~%&quot;</span> <span class="nv">address</span> <span class="vg">*hostname*</span><span class="p">))</span>
<span class="c1">;;;-----------------------------</span>
<span class="c1">;; *address* is the IP address I&#39;m checking, like &quot;128.138.243.20&quot;</span>
<span class="p">(</span><span class="nb">use-package</span> <span class="ss">:sb-bsd-sockets</span><span class="p">)</span>
<span class="p">(</span><span class="nb">defparameter</span> <span class="vg">*name*</span> <span class="p">(</span><span class="nv">host-ent-name</span>
                      <span class="p">(</span><span class="nv">get-host-by-address</span> <span class="p">(</span><span class="nv">make-inet-address</span> <span class="vg">*address*</span><span class="p">))))</span>
<span class="p">(</span><span class="nb">defparameter</span> <span class="vg">*addresses*</span> <span class="p">(</span><span class="nv">host-ent-addresses</span> <span class="p">(</span><span class="nv">get-host-by-name</span> <span class="vg">*name*</span><span class="p">)))</span>
<span class="p">(</span><span class="nb">defparameter</span> <span class="vg">*found*</span> <span class="p">(</span><span class="nb">member</span> <span class="vg">*address*</span> <span class="vg">*addresses*</span> <span class="ss">:test</span> <span class="ss">&#39;equal</span> <span class="ss">:key</span> <span class="ss">&#39;inet-ntoa</span><span class="p">))</span>
<span class="c1">;;;-----------------------------</span>
<span class="c1">;;; @@INCOMPLETE@@</span>
<span class="c1">;;;-----------------------------</span>
</pre></div>
</body>
</html></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN981"
>Being an FTP Client</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN984"
>Sending Mail</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN987"
>Reading and Posting Usenet News Messages</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN990"
>Reading Mail with POP3</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN993"
>Simulating Telnet from a Program</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN996"
>Pinging a Machine</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN999"
>Using Whois to Retrieve Information from the InterNIC</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1002"
>Program: expn and vrfy</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="sockets.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="cgiprogramming.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Sockets</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>CGI Programming</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>