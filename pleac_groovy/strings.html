<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Strings</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="PLEAC-Groovy"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="PLEAC-Groovy"
HREF="index.html"><LINK
REL="NEXT"
TITLE="Numbers"
HREF="numbers.html"><style type="text/css">td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
pre { line-height: 125%; }

  </style></head
><BODY TEXT="#cecece" BGCOLOR="#4f6f6f" LINK="#f5deb3" VLINK="#d5ae83"
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PLEAC-Groovy</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="index.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="numbers.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="STRINGS"
>1. Strings</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN14"
>Introduction</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;\\n&#39;</span>                    <span class="c1">// two characters, \ and an n</span>
<span class="k">assert</span> <span class="n">string</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">2</span>
<span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;\n&quot;</span>                     <span class="c1">// a &quot;newline&quot; character</span>
<span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;\n&#39;</span>                     <span class="c1">// a &quot;newline&quot; character</span>

<span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;Jon &#39;Maddog&#39; Orwant&quot;</span>    <span class="c1">// literal single quote inside double quotes</span>
<span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;Jon \&#39;Maddog\&#39; Orwant&#39;</span>  <span class="c1">// escaped single quotes</span>

<span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;Jon &quot;Maddog&quot; Orwant&#39;</span>    <span class="c1">// literal double quotes inside single quotes</span>
<span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;Jon \&quot;Maddog\&quot; Orwant&quot;</span>  <span class="c1">// escaped double quotes</span>

<span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">This is a multiline string declaration</span>
<span class="s1">using single quotes (you can use double quotes)</span>
<span class="s1">&#39;&#39;&#39;</span>
<span class="c1">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN17"
>Accessing Substrings</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="c1">// accessing substrings</span>
<span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;hippopotamus&#39;</span>
<span class="n">start</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">7</span><span class="o">;</span> <span class="n">endplus1</span> <span class="o">=</span> <span class="mi">8</span>
<span class="k">assert</span> <span class="n">string</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">start</span><span class="o">,</span> <span class="n">endplus1</span><span class="o">)</span> <span class="o">==</span> <span class="s1">&#39;pot&#39;</span>
<span class="k">assert</span> <span class="n">string</span><span class="o">[</span><span class="n">start</span><span class="o">..</span><span class="na">end</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;pot&#39;</span>

<span class="k">assert</span> <span class="n">string</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">start</span><span class="o">)</span> <span class="o">==</span> <span class="s1">&#39;potamus&#39;</span>
<span class="k">assert</span> <span class="n">string</span><span class="o">[</span><span class="n">start</span><span class="o">..-</span><span class="mi">1</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;potamus&#39;</span>

<span class="c1">// String is immutable but new strings can be created in various ways</span>
<span class="k">assert</span> <span class="n">string</span> <span class="o">-</span> <span class="s1">&#39;hippo&#39;</span> <span class="o">-</span> <span class="s1">&#39;mus&#39;</span> <span class="o">+</span> <span class="s1">&#39;to&#39;</span> <span class="o">==</span> <span class="s1">&#39;potato&#39;</span>
<span class="k">assert</span> <span class="n">string</span><span class="o">.</span><span class="na">replace</span><span class="o">(</span><span class="s1">&#39;ppopotam&#39;</span><span class="o">,</span><span class="s1">&#39;bisc&#39;</span><span class="o">)</span> <span class="o">==</span> <span class="s1">&#39;hibiscus&#39;</span>
<span class="k">assert</span> <span class="n">string</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">+</span> <span class="s1">&#39;bisc&#39;</span> <span class="o">+</span> <span class="n">string</span><span class="o">[-</span><span class="mi">2</span><span class="o">..-</span><span class="mi">1</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;hibiscus&#39;</span>
<span class="c1">// StringBuffer is mutable</span>
<span class="n">sb</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">(</span><span class="n">string</span><span class="o">)</span>
<span class="n">sb</span><span class="o">[</span><span class="mi">2</span><span class="o">..-</span><span class="mi">3</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;bisc&#39;</span>
<span class="k">assert</span> <span class="n">sb</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span> <span class="o">==</span> <span class="s1">&#39;hibiscus&#39;</span>

<span class="c1">// No exact pack/unpack equivalents exist in Groovy. Examples here use a custom</span>
<span class="c1">// implementation to split an original string into chunks of specified length</span>
<span class="c1">// the method is a modified version of the Java PLEAC version</span>

<span class="c1">// get a 5-character string, skip 8, then grab 2 5-character strings</span>
<span class="c1">// skipping the trailing spaces, then grab the rest</span>
<span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;hippopotamus means river horse&#39;</span>
<span class="kt">def</span> <span class="n">fields</span> <span class="o">=</span> <span class="n">unpack</span><span class="o">(</span><span class="s1">&#39;A5 x8 A5 x1 A5 x1 A*&#39;</span><span class="o">,</span> <span class="n">data</span><span class="o">)</span>
<span class="k">assert</span> <span class="n">fields</span> <span class="o">==</span> <span class="o">[</span><span class="s1">&#39;hippo&#39;</span><span class="o">,</span> <span class="s1">&#39;means&#39;</span><span class="o">,</span> <span class="s1">&#39;river&#39;</span><span class="o">,</span> <span class="s1">&#39;horse&#39;</span><span class="o">]</span>

<span class="c1">// On a Java 5 or 6 JVM, Groovy can also make use of Scanners:</span>
<span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="n">data</span><span class="o">)</span>
<span class="n">s</span><span class="o">.</span><span class="na">findInLine</span><span class="o">(</span><span class="s">/(.{5}).{8}(.{5}) (.{5}) (.*)/</span><span class="o">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">match</span><span class="o">()</span>
<span class="n">fields</span> <span class="o">=</span> <span class="o">[]</span>
<span class="o">(</span><span class="mi">1</span><span class="o">..</span><span class="na">m</span><span class="o">.</span><span class="na">groupCount</span><span class="o">()).</span><span class="na">each</span><span class="o">{</span> <span class="n">fields</span> <span class="o">&lt;&lt;</span> <span class="n">m</span><span class="o">.</span><span class="na">group</span><span class="o">(</span><span class="n">it</span><span class="o">)</span> <span class="o">}</span>
<span class="k">assert</span> <span class="n">fields</span> <span class="o">==</span> <span class="o">[</span><span class="s1">&#39;hippo&#39;</span><span class="o">,</span> <span class="s1">&#39;means&#39;</span><span class="o">,</span> <span class="s1">&#39;river&#39;</span><span class="o">,</span> <span class="s1">&#39;horse&#39;</span><span class="o">]</span>

<span class="c1">// another scanner example similar to the javadoc example</span>
<span class="n">input</span> <span class="o">=</span> <span class="s1">&#39;1 fish 2 fish red fish blue fish&#39;</span>
<span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="n">input</span><span class="o">).</span><span class="na">useDelimiter</span><span class="o">(</span><span class="s">/\s*fish\s*/</span><span class="o">)</span>
<span class="n">fields</span> <span class="o">=</span> <span class="o">[]</span>
<span class="mi">2</span><span class="o">.</span><span class="na">times</span><span class="o">{</span> <span class="n">fields</span> <span class="o">&lt;&lt;</span> <span class="n">s</span><span class="o">.</span><span class="na">nextInt</span><span class="o">()</span> <span class="o">}</span>
<span class="mi">2</span><span class="o">.</span><span class="na">times</span><span class="o">{</span> <span class="n">fields</span> <span class="o">&lt;&lt;</span> <span class="n">s</span><span class="o">.</span><span class="na">next</span><span class="o">()</span> <span class="o">}</span>
<span class="k">assert</span> <span class="n">fields</span> <span class="o">==</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="s1">&#39;red&#39;</span><span class="o">,</span> <span class="s1">&#39;blue&#39;</span><span class="o">]</span>

<span class="c1">// split at five characters boundaries</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">fivers</span> <span class="o">=</span> <span class="n">unpack</span><span class="o">(</span><span class="s1">&#39;A5 &#39;</span> <span class="o">*</span> <span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="s">/ 5), data)</span>
<span class="s">assert fivers == [&quot;hippo&quot;, &quot;potam&quot;, &quot;us me&quot;, &quot;ans r&quot;, &quot;iver &quot;, &quot;horse&quot;]</span>

<span class="s">// chop string into individual characters</span>
<span class="s">assert &#39;abcd&#39; as String[] == [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;]</span>

<span class="s">string = &quot;This is what you have&quot;</span>
<span class="s">// Indexing forwards  (left to right)</span>
<span class="s">// tens   000000000011111111112</span>
<span class="s">// units +012345678901234567890</span>
<span class="s">// Indexing backwards (right to left)</span>
<span class="s">// tens   221111111111000000000</span>
<span class="s">// units  109876543210987654321-</span>

<span class="s">assert string[0]          == &#39;T&#39;</span>
<span class="s">assert string[5..6]       == &#39;is&#39;</span>
<span class="s">assert string[13..-1]     == &#39;you have&#39;</span>
<span class="s">assert string[-1]         == &#39;e&#39;</span>
<span class="s">assert string[-4..-1]     == &#39;have&#39;</span>
<span class="s">assert string[-8, -7, -6] == &#39;you&#39;</span>

<span class="s">data = new StringBuffer(string)</span>
<span class="s">data[5..6] = &quot;wasn&#39;t&quot;       ; assert data.toString() == &quot;This wasn&#39;t what you have&quot;</span>
<span class="s">data[-12..-1] = &quot;ondrous&quot;   ; assert data.toString() == &quot;This wasn&#39;t wondrous&quot;</span>
<span class="s">data[0..0] = &quot;&quot;             ; assert data.toString() == &quot;his wasn&#39;t wondrous&quot;</span>
<span class="s">data[-10..-1]  = &quot;&quot;         ; assert data.toString() == &quot;his wasn&#39;&quot;</span>

<span class="s">string = &quot;This wasn&#39;t wondrous&quot;</span>
<span class="s">// check last ten characters match some pattern</span>
<span class="s">assert string[-10..-1] =~ /</span><span class="o">^</span><span class="n">t</span><span class="err">\</span><span class="n">sw</span><span class="o">.*</span><span class="n">s</span><span class="s">$/</span>

<span class="s">string = &#39;This is a test&#39;</span>
<span class="s">assert string[0..4].replaceAll(&#39;is&#39;, &#39;at&#39;) + string[5..-1] == &#39;That is a test&#39;</span>

<span class="s">// exchange the first and last letters in a string</span>
<span class="s">string = &#39;make a hat&#39;</span>
<span class="s">string = string[-1] + string[1..-2] + string[0]</span>
<span class="s">assert string == &#39;take a ham&#39;</span>

<span class="s">// extract column with unpack</span>
<span class="s">string = &#39;To be or not to be&#39;</span>

<span class="s">// skip 6, grab 6</span>
<span class="s">assert unpack(&quot;x6 A6&quot;, string) == [&#39;or not&#39;]</span>

<span class="s">// forward 6, grab 2, backward 5, grab 2</span>
<span class="s">assert unpack(&quot;x6 A2 X5 A2&quot;, string) == [&#39;or&#39;, &#39;be&#39;]</span>

<span class="s">assert cut2fmt([8, 14, 20, 26, 30]) == &#39;A7 A6 A6 A6 A4 A*&#39;</span>

<span class="s">// utility method (derived from Java PLEAC version)</span>
<span class="s">def unpack(String format, String data) {</span>
<span class="s">    def result = []</span>
<span class="s">    int formatOffset = 0, dataOffset = 0</span>
<span class="s">    int minDataOffset = 0, maxDataOffset = data.size()</span>

<span class="s">    new StringTokenizer(format).each{ token -&gt;</span>
<span class="s">        int tokenLen = token.length()</span>

<span class="s">        // count determination</span>
<span class="s">        int count = 0</span>
<span class="s">        if (tokenLen == 1) count = 1</span>
<span class="s">        else if (token.charAt(1) == &#39;*&#39;) count = -1</span>
<span class="s">        else count = token[1..-1].toInteger()</span>

<span class="s">        // action determination</span>
<span class="s">        char action = token.charAt(0)</span>
<span class="s">        switch (action) {</span>
<span class="s">            case &#39;A&#39;:</span>
<span class="s">                if (count == -1) {</span>
<span class="s">                    start = [dataOffset, maxDataOffset].min()</span>
<span class="s">                    result.add(data[start..-1])</span>
<span class="s">                    dataOffset = maxDataOffset</span>
<span class="s">                } else {</span>
<span class="s">                    start = [dataOffset, maxDataOffset].min()</span>
<span class="s">                    end = [dataOffset + count, maxDataOffset].min()</span>
<span class="s">                    result.add(data[start..&lt;end])</span>
<span class="s">                    dataOffset += count</span>
<span class="s">                }</span>
<span class="s">                break</span>
<span class="s">            case &#39;x&#39;:</span>
<span class="s">                if (count == -1) dataOffset = maxDataOffset</span>
<span class="s">                else dataOffset += count</span>
<span class="s">                break</span>
<span class="s">            case &#39;X&#39;:</span>
<span class="s">                if (count == -1) dataOffset = minDataOffset</span>
<span class="s">                else dataOffset -= count</span>
<span class="s">                break</span>
<span class="s">            default:</span>
<span class="s">                throw new RuntimeException(&#39;Unknown action token&#39;, formatOffset)</span>
<span class="s">        }</span>
<span class="s">        formatOffset += tokenLen + 1</span>
<span class="s">    }</span>
<span class="s">    return result as String[]</span>
<span class="s">}</span>

<span class="s">// utility method</span>
<span class="s">def cut2fmt(positions) {</span>
<span class="s">    template = &#39;&#39;</span>
<span class="s">    lastpos = 1</span>
<span class="s">    for (pos in positions) {</span>
<span class="s">        template += &#39;A&#39; + (pos - lastpos) + &#39; &#39;</span>
<span class="s">        lastpos = pos</span>
<span class="s">    }</span>
<span class="s">    return template + &#39;A*&#39;</span>
<span class="s">}</span>
<span class="s">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN20"
>Establishing a Default Value</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="s"></span><span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">// use b if b is true, else c</span>
<span class="s">b = false; c = &#39;cat&#39;</span>
<span class="s">assert (b ? b : c) == &#39;cat&#39;</span>
<span class="s">b = true</span>
<span class="s">assert (b ? b : c)</span>
<span class="s">// can be simplified to &#39;b || c&#39; if c is a boolean</span>
<span class="s">// strictly speaking, b doesn&#39;t have to be a boolean,</span>
<span class="s">// e.g. an empty list is coerced to boolean false</span>
<span class="s">b = []</span>
<span class="s">assert (b ? b : c) == &#39;cat&#39;</span>

<span class="s">// set x to y unless x is already true</span>
<span class="s">x = false; y = &#39;dog&#39;</span>
<span class="s">if (!x) x = y</span>
<span class="s">assert x == &#39;dog&#39;</span>
<span class="s">// can be simplified to &#39;x ||= y&#39; if y is a boolean</span>
<span class="s">// x doesn&#39;t need to be a boolean, e.g. a non-empty</span>
<span class="s">// string is coerced to boolean true</span>
<span class="s">x = &#39;cat&#39;</span>
<span class="s">if (!x) x = y</span>
<span class="s">assert x == &#39;cat&#39;</span>

<span class="s">// JVM supplies user name</span>
<span class="s">// otherwise could use exec or built-in Ant features for reading environment vars</span>
<span class="s">assert System.getProperty(&#39;user.name&#39;)</span>

<span class="s">// test for nullity then for emptyness</span>
<span class="s">def setDefaultIfNullOrEmpty(startingPoint) {</span>
<span class="s">    (!startingPoint || startingPoint.length() == 0) ? &#39;Greenwich&#39; : startingPoint</span>
<span class="s">}</span>
<span class="s">assert setDefaultIfNullOrEmpty(null) == &#39;Greenwich&#39;</span>
<span class="s">assert setDefaultIfNullOrEmpty(&#39;&#39;) == &#39;Greenwich&#39;</span>
<span class="s">assert setDefaultIfNullOrEmpty(&#39;Something else&#39;) == &#39;Something else&#39;</span>
<span class="s">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN23"
>Exchanging Values Without Using Temporary Variables</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="s"></span><span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">v1 = &#39;alpha&#39;; v2 = &#39;omega&#39;</span>
<span class="s">// this can done with explicit swapping via a temp variable</span>
<span class="s">// or in a slightly more interesting way with a closure</span>
<span class="s">swap = { temp = v1; v1 = v2; v2 = temp }</span>
<span class="s">swap()</span>
<span class="s">assert v1 == &#39;omega&#39; &amp;&amp; v2 == &#39;alpha&#39;</span>
<span class="s">// a more generic swap() is also possible using Groovy&#39;s metaclass mechanisms</span>
<span class="s">// but is not idiomatic of Groovy usage</span>
<span class="s">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN26"
>Converting Between ASCII Characters and Values</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="s"></span><span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">// char and int are interchangable, apart from precision difference</span>
<span class="s">// char use 16 bits while int use 32, requiring a cast from int to char</span>
<span class="s">char ch = &#39;e&#39;</span>
<span class="s">int num = ch         // no problem</span>
<span class="s">ch = (char) num  // needs an explicit cast</span>

<span class="s">s1 = &quot;Number &quot; + num + &quot; is character &quot; + (char) num</span>
<span class="s">assert s1 == &#39;Number 101 is character e&#39;</span>
<span class="s">s2 = &quot;Character &quot; + ch + &quot; is number &quot; + (int) ch</span>
<span class="s">assert s2 == &#39;Character e is number 101&#39;</span>

<span class="s">// easy conversion between char arrays, char lists and Strings</span>
<span class="s">char[] ascii = &quot;sample&quot;.toCharArray() // {115, 97, 109, 112, 108, 101}</span>
<span class="s">assert new String(ascii) == &quot;sample&quot;</span>
<span class="s">assert new String([115, 97, 109, 112, 108, 101] as char[]) == &quot;sample&quot;</span>

<span class="s">// convert &#39;HAL&#39; to &#39;IBM&#39; (in increasing order of Grooviness)</span>
<span class="s">assert &quot;HAL&quot;.toCharArray().collect{new String(it+1 as char[])}.join() == &#39;IBM&#39;</span>
<span class="s">assert (&quot;HAL&quot; as String[]).collect{it.next()}.join() == &#39;IBM&#39;</span>
<span class="s">assert &quot;HAL&quot;.replaceAll(&#39;.&#39;, {it.next()}) == &#39;IBM&#39;</span>
<span class="s">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN29"
>Processing a String One Character at a Time</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="s"></span><span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">string = &quot;an apple a day&quot;</span>
<span class="s">assert string[3..7].split(&#39;&#39;)[1..5] == [&#39;a&#39;, &#39;p&#39;, &#39;p&#39;, &#39;l&#39;, &#39;e&#39;]</span>
<span class="s">assert string.split(&#39;&#39;).toList().unique().sort().join() == &#39; adelnpy&#39;</span>

<span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">// CheckSum.groovy: Compute 16-bit checksum of input file</span>
<span class="s">// Usage: groovy CheckSum &lt;file&gt;</span>
<span class="s">// script:</span>
<span class="s">checksum = 0</span>
<span class="s">new File(args[0]).eachByte{ checksum += it }</span>
<span class="s">checksum %= (int) Math.pow(2, 16) - 1</span>
<span class="s">println checksum</span>
<span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">// to run on its own source code:</span>
<span class="s">//=&gt; % groovy CheckSum CheckSum.groovy</span>
<span class="s">//=&gt; 9349</span>
<span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">// Slowcat.groovy: Emulate a  s l o w  line printer</span>
<span class="s">// Usage: groovy Slowcat &lt;file&gt; &lt;delay_millis_between_each_char&gt;</span>
<span class="s">// script:</span>
<span class="s">delay = args[1].toInteger()</span>
<span class="s">new File(args[0]).eachByte{ print ((char) it); Thread.sleep(delay) }</span>
<span class="s">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN32"
>Reversing a String by Word or Character</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="s"></span><span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">assert &#39;string&#39;.reverse() == &#39;gnirts&#39;</span>

<span class="s">string = &#39;Yoda said, &quot;can you see this?&quot;&#39;</span>
<span class="s">revwords = string.split(&#39; &#39;).toList().reverse().join(&#39; &#39;)</span>
<span class="s">assert revwords == &#39;this?&quot; see you &quot;can said, Yoda&#39;</span>

<span class="s">words = [&#39;bob&#39;, &#39;alpha&#39;, &#39;rotator&#39;, &#39;omega&#39;, &#39;reviver&#39;]</span>
<span class="s">long_palindromes = words.findAll{ w -&gt; w == w.reverse() &amp;&amp; w.size() &gt; 5 }</span>
<span class="s">assert long_palindromes == [&#39;rotator&#39;, &#39;reviver&#39;]</span>
<span class="s">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN35"
>Expanding and Compressing Tabs</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="s"></span><span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">s1 = &#39;abc\t def\tghi \n\tx&#39;</span>
<span class="s">s2 = &#39;abc      def    ghi \n        x&#39;</span>
<span class="s">def expand(s) {</span>
<span class="s">    s.split(&#39;\n&#39;).toList().collect{</span>
<span class="s">        line = it</span>
<span class="s">        while (line.contains(&#39;\t&#39;)) {</span>
<span class="s">            line = line.replaceAll(/([^\t]*)(\t)(.*)/){</span>
<span class="s">                all,pre,tab,suf -&gt; pre + &#39; &#39; * (8 - pre.size() % 8) + suf</span>
<span class="s">            }</span>
<span class="s">        }</span>
<span class="s">        return line</span>
<span class="s">    }.join(&#39;\n&#39;)</span>
<span class="s">}</span>
<span class="s">def unexpand(s) {</span>
<span class="s">    s.split(&#39;\n&#39;).toList().collect{</span>
<span class="s">        line = it</span>
<span class="s">        for (i in line.size()-1..1) {</span>
<span class="s">            if (i % 8 == 0) {</span>
<span class="s">                prefix = line[0..&lt;i]</span>
<span class="s">                if (prefix.trim().size() != prefix.size()) {</span>
<span class="s">                    line = prefix.trim() + &#39;\t&#39; + line[i..-1]</span>
<span class="s">                }</span>
<span class="s">            }</span>
<span class="s">        }</span>
<span class="s">        return line</span>
<span class="s">    }.join(&#39;\n&#39;)</span>
<span class="s">}</span>
<span class="s">assert expand(s1) == s2</span>
<span class="s">assert unexpand(s2) == s1</span>
<span class="s">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN38"
>Expanding Variables in User Input</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="s"></span><span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">debt = 150</span>
<span class="s">assert &quot;You owe $debt to me&quot; == &#39;You owe 150 to me&#39;</span>

<span class="s">rows = 24; cols = 80</span>
<span class="s">assert &quot;I am $rows high and $cols wide&quot; == &#39;I am 24 high and 80 wide&#39;</span>

<span class="s">assert &#39;I am 17 years old&#39;.replaceAll(/\d+/, {2*it.toInteger()}) == &#39;I am 34 years old&#39;</span>
<span class="s">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN41"
>Controlling Case</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="s"></span><span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">assert &quot;bo peep&quot;.toUpperCase() == &#39;BO PEEP&#39;</span>
<span class="s">assert &#39;JOHN&#39;.toLowerCase() == &#39;john&#39;</span>
<span class="s">def capitalize(s) {s[0].toUpperCase() + (s.size()&lt;2 ? &#39;&#39; : s[1..-1]?.toLowerCase())}</span>
<span class="s">assert capitalize(&#39;joHn&#39;) == &#39;John&#39;</span>

<span class="s">s = &quot;thIS is a loNG liNE&quot;.replaceAll(/\w+/){capitalize(it)}</span>
<span class="s">assert s == &#39;This Is A Long Line&#39;</span>

<span class="s">s1 = &#39;JOhn&#39;; s2 = &#39;joHN&#39;</span>
<span class="s">assert s1.equalsIgnoreCase(s2)</span>

<span class="s">private Random rand</span>
<span class="s">def randomCase(char ch) {</span>
<span class="s">    (rand.nextInt(100) &lt; 20) ? Character.toLowerCase(ch) : ch</span>
<span class="s">}</span>
<span class="s">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN44"
>Interpolating Functions and Expressions Within Strings</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="s"></span><span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">n = 10</span>
<span class="s">assert &quot;I have ${n+1} guanacos.&quot; == &#39;I have 11 guanacos.&#39;</span>
<span class="s">assert &quot;I have &quot; + (n+1) + &quot; guanacos.&quot; == &#39;I have 11 guanacos.&#39;</span>

<span class="s">// sending templated email is solved in two parts: templating and sending</span>
<span class="s">// Part 1: creating an email template</span>
<span class="s">naughty = &#39;Mr Bad Credit&#39;</span>
<span class="s">def get_manager_list(s) { &#39;The Big Boss&#39; }</span>
<span class="s">msg = &quot;&quot;&quot;</span>
<span class="s">To: $naughty</span>
<span class="s">From: Your Bank</span>
<span class="s">Cc: ${ get_manager_list(naughty) }</span>
<span class="s">Date: ${ new Date() }</span>

<span class="s">Dear $naughty,</span>

<span class="s">Today, you bounced check number ${ 500 + new Random().nextInt(100) } to us.</span>
<span class="s">Your account is now closed.</span>

<span class="s">Sincerely,</span>
<span class="s">the management</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="s">expected = &#39;&#39;&#39;</span>
<span class="s">To: Mr Bad Credit</span>
<span class="s">From: Your Bank</span>
<span class="s">Cc: The Big Boss</span>
<span class="s">Date: XXX</span>

<span class="s">Dear Mr Bad Credit,</span>

<span class="s">Today, you bounced check number XXX to us.</span>
<span class="s">Your account is now closed.</span>

<span class="s">Sincerely,</span>
<span class="s">the management</span>
<span class="s">&#39;&#39;&#39;</span>
<span class="s">sanitized = msg.replaceAll(&#39;(?m)^Date: (.*)$&#39;,&#39;Date: XXX&#39;)</span>
<span class="s">sanitized = sanitized.replaceAll(/(?m)check number (\d+) to/,&#39;check number XXX to&#39;)</span>
<span class="s">assert sanitized == expected</span>
<span class="s">// note: Groovy also has several additional built-in templating facilities</span>
<span class="s">// Part 2: sending email</span>
<span class="s">// SendMail.groovy: Send email</span>
<span class="s">// Usage: groovy SendEmail &lt;msgfile&gt;</span>
<span class="s">// script:</span>
<span class="s">ant = new AntBuilder()</span>
<span class="s">ant.mail(from:&#39;manager@grumpybank.com&#39;, tolist:&#39;innocent@poorhouse.com&#39;,</span>
<span class="s">    encoding:&#39;plain&#39;, mailhost:&#39;mail.someserver.com&#39;,</span>
<span class="s">    subject:&#39;Friendly Letter&#39;, message:&#39;this is a test message&#39;)</span>
<span class="s">// Ant has many options for setting encoding, security, attachments, etc., see:</span>
<span class="s">// http://ant.apache.org/manual/CoreTasks/mail.html</span>
<span class="s">// Groovy could also use the Java Mail Api directly if required</span>
<span class="s">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN47"
>Indenting Here Documents</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="s"></span><span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">def raw = &#39;&#39;&#39;</span>
<span class="s">    your text</span>
<span class="s">    goes here</span>
<span class="s">&#39;&#39;&#39;</span>

<span class="s">def expected = &#39;&#39;&#39;</span>
<span class="s">your text</span>
<span class="s">goes here</span>
<span class="s">&#39;&#39;&#39;</span>

<span class="s">assert raw.split(&#39;\n&#39;).toList().collect{</span>
<span class="s">    it.replaceAll(/^\s+/,&#39;&#39;)</span>
<span class="s">}.join(&#39;\n&#39;) + &#39;\n&#39; == expected</span>
<span class="s">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN50"
>Reformatting Paragraphs</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="s"></span><span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">input = &#39;&#39;&#39;Folding and splicing is the work of an editor,</span>
<span class="s"> not a mere collection of silicon</span>
<span class="s"> and</span>
<span class="s"> mobile electrons!&#39;&#39;&#39;</span>

<span class="s">expected = &#39;&#39;&#39;Folding and splicing</span>
<span class="s">is the work of an</span>
<span class="s">editor, not a mere</span>
<span class="s">collection of</span>
<span class="s">silicon and mobile</span>
<span class="s">electrons!&#39;&#39;&#39;</span>

<span class="s">def wrap(text, maxSize) {</span>
<span class="s">    all = []</span>
<span class="s">    line = &#39;&#39;</span>
<span class="s">    text.eachMatch(/\S+/) {</span>
<span class="s">        word = it[0]</span>
<span class="s">        if (line.size() + 1 + word.size() &gt; maxSize) {</span>
<span class="s">            all += line</span>
<span class="s">            line = word</span>
<span class="s">        } else {</span>
<span class="s">            line += (line == &#39;&#39; ? word : &#39; &#39; + word)</span>
<span class="s">        }</span>
<span class="s">    }</span>
<span class="s">    all += line</span>
<span class="s">    return all.join(&#39;\n&#39;)</span>
<span class="s">}</span>
<span class="s">assert wrap(input, 20) == expected</span>
<span class="s">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN53"
>Escaping Characters</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="s"></span><span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">string = /Mom said, &quot;Don&#39;t do that.&quot;/</span>
<span class="s">// backslash special chars</span>
<span class="s">assert string.replaceAll(/[&#39;&quot;]/){/\\/+it[0]} == /Mom said, \&quot;Don\&#39;t do that.\&quot;/   //&#39;</span>
<span class="s">// double special chars</span>
<span class="s">assert string.replaceAll(/[&#39;&quot;]/){it[0]+it[0]} == /Mom said, &quot;&quot;Don&#39;&#39;t do that.&quot;&quot;/  //&#39;</span>
<span class="s">//backslash quote all non-capital letters</span>
<span class="s">assert &quot;DIR /?&quot;.replaceAll(/[^A-Z]/){/\\/+it[0]} == /DIR\ \/\?/</span>
<span class="s">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN56"
>Trimming Blanks from the Ends of a String</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="s"></span><span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">assert &#39;     x     &#39;.trim() == &#39;x&#39;</span>
<span class="s">// print what&#39;s typed, but surrounded by &gt;&lt; symbols</span>
<span class="s">// script:</span>
<span class="s">new BufferedReader(new InputStreamReader(System.in)).eachLine{</span>
<span class="s">    println(&quot;&gt;&quot; + it.trim() + &quot;&lt;&quot;);</span>
<span class="s">}</span>
<span class="s">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN59"
>Parsing Comma-Separated Data</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="s"></span><span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">pattern = /&quot;([^\&quot;\\]*(?:\\.[^\&quot;\\]*)*)&quot;,?|([^,]+),?|,/</span>
<span class="s">line = /XYZZY,&quot;&quot;,&quot;O&#39;Reilly, Inc&quot;,&quot;Wall, Larry&quot;,&quot;a \&quot;glug\&quot; bit,&quot;,5,&quot;Error, Core Dumped&quot;/</span>
<span class="s">m = line =~ pattern</span>
<span class="s">expected = [/XYZZY/, &#39;&#39;, /O&#39;Reilly, Inc/, /Wall, Larry/,     //&#39;</span>
<span class="s">            /a \&quot;glug\&quot; bit,/, /5/, /Error, Core Dumped/]</span>
<span class="s">for (i in 0..&lt;m.size().toInteger())</span>
<span class="s">    assert expected[i] == (m[i][2] ? m[i][2] : m[i][1])</span>

<span class="s">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN62"
>Soundex Matching</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="s"></span><span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">// A quick google search found several Java implementations.</span>
<span class="s">// As an example, how to use commons codec is shown below.</span>
<span class="s">// Just place the respective jar in your classpath.</span>
<span class="s">// Further details: http://jakarta.apache.org/commons/codec</span>
<span class="s">// require(groupId:&#39;commons-codec&#39;, artifactId:&#39;commons-codec&#39;, version:&#39;1.3&#39;)</span>
<span class="s">soundex = new org.apache.commons.codec.language.Soundex()</span>
<span class="s">assert soundex.soundex(&#39;Smith&#39;) == soundex.soundex(&#39;Smyth&#39;)</span>
<span class="s">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN65"
>Program: fixstyle</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="s"></span><span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">input = &#39;&#39;&#39;I have analysed the new part. As long as you</span>
<span class="s">aren&#39;t worried about the colour, it is a dropin replacement.&#39;&#39;&#39;        //&#39;</span>

<span class="s">expected = &#39;&#39;&#39;I have analyzed the new part. As long as you</span>
<span class="s">aren&#39;t worried about the color, it is a drop-in replacement.&#39;&#39;&#39;        //&#39;</span>

<span class="s">translations = [colour:&#39;color&#39;, analysed:&#39;analyzed&#39;, dropin:&#39;drop-in&#39;]</span>

<span class="s">def fixstyle(s) {</span>
<span class="s">    s.split(&#39;\n&#39;).toList().collect{</span>
<span class="s">        line = it</span>
<span class="s">        translations.each{ key, value -&gt;</span>
<span class="s">            line = line.replaceAll(/(?&lt;=\W)/ + key + /(?=\W)/, value)</span>
<span class="s">        }</span>
<span class="s">        return line</span>
<span class="s">    }.join(&#39;\n&#39;)</span>
<span class="s">}</span>
<span class="s">assert fixstyle(input) == expected</span>
<span class="s">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN68"
>Program: psgrep</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="s"></span><span class="s">//----------------------------------------------------------------------------------</span>
<span class="s">// Solved in two parts: &#39;screenscrape&#39; text stream and return stream from process</span>
<span class="s">// Part 1: text scraping</span>
<span class="s">input = &#39;&#39;&#39;</span>
<span class="s">      PID    PPID    PGID     WINPID  TTY  UID    STIME COMMAND</span>
<span class="s">     4636       1    4636       4636  con 1005 08:24:50 /usr/bin/bash</span>
<span class="s">      676    4636     676        788  con 1005 13:53:32 /usr/bin/ps</span>
<span class="s">&#39;&#39;&#39;</span>
<span class="s">select1 = &#39;&#39;&#39;</span>
<span class="s">      PID    PPID    PGID     WINPID  TTY  UID    STIME COMMAND</span>
<span class="s">      676    4636     676        788  con 1005 13:53:32 /usr/bin/ps</span>
<span class="s">&#39;&#39;&#39;</span>
<span class="s">select2 = &#39;&#39;&#39;</span>
<span class="s">      PID    PPID    PGID     WINPID  TTY  UID    STIME COMMAND</span>
<span class="s">     4636       1    4636       4636  con 1005 08:24:50 /usr/bin/bash</span>
<span class="s">&#39;&#39;&#39;</span>

<span class="s">// line below must be configured for your unix - this one&#39;s cygwin</span>
<span class="s">format = cut2fmt([10, 18, 26, 37, 42, 47, 56])</span>
<span class="s">def psgrep(s) {</span>
<span class="s">    out = []</span>
<span class="s">    lines = input.split(&#39;\n&#39;).findAll{ it.size() }</span>
<span class="s">    vars = unpack(format, lines[0]).toList().collect{ it.toLowerCase().trim() }</span>
<span class="s">    out += lines[0]</span>
<span class="s">    lines[1..-1].each{</span>
<span class="s">        values = unpack(format, it).toList().collect{</span>
<span class="s">            try {</span>
<span class="s">                return it.toInteger()</span>
<span class="s">            } catch(NumberFormatException e) {</span>
<span class="s">                return it.trim()</span>
<span class="s">            }</span>
<span class="s">        }</span>
<span class="s">        vars.eachWithIndex{ var, i -&gt;</span>
<span class="s">            binding.setVariable(var, values[i])</span>
<span class="s">        }</span>
<span class="s">        if (new GroovyShell(binding).evaluate(s)) out += it</span>
<span class="s">    }</span>
<span class="s">    return &#39;\n&#39; + out.join(&#39;\n&#39;) + &#39;\n&#39;</span>
<span class="s">}</span>
<span class="s">assert psgrep(&#39;winpid &lt; 800&#39;) == select1</span>
<span class="s">assert psgrep(&#39;uid % 5 == 0 &amp;&amp; command =~ /sh$/&#39;) == select2</span>
<span class="s">// Part 2: obtaining text stream from process</span>
<span class="s">// unixScript:</span>
<span class="s">input = &#39;ps&#39;.execute().text</span>
<span class="s">// cygwinScript:</span>
<span class="s">input = &#39;path_to_cygwin/bin/ps.exe&#39;.execute().text</span>
<span class="s">// windowsScript:</span>
<span class="s">// can use something like sysinternal.com s pslist (with minor script tweaks)</span>
<span class="s">input = &#39;pslist.exe&#39;.execute().text</span>
<span class="s">//----------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="numbers.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>PLEAC-Groovy</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Numbers</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>