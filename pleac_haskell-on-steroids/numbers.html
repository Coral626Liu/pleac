<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Numbers</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="PLEAC-Haskell"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Strings"
HREF="strings.html"><LINK
REL="NEXT"
TITLE="Dates and Times"
HREF="datesandtimes.html"><style type="text/css">td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
pre { line-height: 125%; }

  </style></head
><BODY TEXT="#cecece" BGCOLOR="#4f6f6f" LINK="#f5deb3" VLINK="#d5ae83"
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PLEAC-Haskell</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="strings.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="datesandtimes.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="NUMBERS"
>2. Numbers</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN73"
>Checking Whether a String Is a Valid Number</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">is_integer</span> <span class="n">s</span> <span class="ow">=</span> <span class="kr">if</span> <span class="n">s</span> <span class="o">=~</span> <span class="s">&quot;^[+-]?</span><span class="se">\\</span><span class="s">d+$&quot;</span> 
	       <span class="kr">then</span> <span class="n">putStrLn</span> <span class="s">&quot;is an integer&quot;</span>
	       <span class="kr">else</span> <span class="n">putStrLn</span> <span class="s">&quot;is not&quot;</span>
<span class="nf">m0</span> <span class="n">s</span> <span class="ow">=</span> <span class="kr">do</span> <span class="n">putStrLn</span> <span class="s">&quot;has non digits&quot;</span> <span class="p">`</span><span class="n">when</span><span class="p">`</span>   <span class="p">(</span><span class="n">s</span> <span class="o">=~</span> <span class="s">&quot;[^</span><span class="se">\\</span><span class="s">d]&quot;</span><span class="p">)</span> <span class="c1">-- no \D</span>
	  <span class="n">putStrLn</span> <span class="s">&quot;not a natural&quot;</span>  <span class="p">`</span><span class="n">unless</span><span class="p">`</span> <span class="p">(</span><span class="n">s</span> <span class="o">=~</span> <span class="s">&quot;^</span><span class="se">\\</span><span class="s">d+$&quot;</span><span class="p">)</span>
	  <span class="n">putStrLn</span> <span class="s">&quot;not an integer&quot;</span> <span class="p">`</span><span class="n">unless</span><span class="p">`</span> <span class="p">(</span><span class="n">s</span> <span class="o">=~</span> <span class="s">&quot;^-?</span><span class="se">\\</span><span class="s">d+$&quot;</span><span class="p">)</span>
	  <span class="n">putStrLn</span> <span class="s">&quot;not an integer&quot;</span> <span class="p">`</span><span class="n">unless</span><span class="p">`</span> <span class="p">(</span><span class="n">s</span> <span class="o">=~</span> <span class="s">&quot;^[+-]?</span><span class="se">\\</span><span class="s">d+$&quot;</span><span class="p">)</span>
	  <span class="n">putStrLn</span> <span class="s">&quot;not a decimal&quot;</span>  <span class="p">`</span><span class="n">unless</span><span class="p">`</span> <span class="p">(</span><span class="n">s</span> <span class="o">=~</span> <span class="s">&quot;^-?</span><span class="se">\\</span><span class="s">d+</span><span class="se">\\</span><span class="s">.</span><span class="se">\\</span><span class="s">d*$&quot;</span><span class="p">)</span>
	  <span class="n">putStrLn</span> <span class="s">&quot;not a float&quot;</span>    <span class="p">`</span><span class="n">unless</span><span class="p">`</span> <span class="p">(</span><span class="n">s</span> <span class="o">=~</span> <span class="s">&quot;^[+-]?</span><span class="se">\\</span><span class="s">d+((</span><span class="se">\\</span><span class="s">.</span><span class="se">\\</span><span class="s">d+([eE]-?</span><span class="se">\\</span><span class="s">d+)?)|([eE]-?</span><span class="se">\\</span><span class="s">d+))$&quot;</span><span class="p">)</span>
<span class="c1">-- in haskell, regexp are first class, then can be appended, sometimes easier to read</span>
<span class="nf">m0&#39;</span> <span class="n">s</span> <span class="ow">=</span> <span class="kr">let</span> <span class="n">sign</span>       <span class="ow">=</span> <span class="s">&quot;-&quot;</span>
	    <span class="n">opt_sign</span>   <span class="ow">=</span> <span class="n">sign</span> <span class="o">++</span> <span class="s">&quot;?&quot;</span>
	    <span class="n">dec_number</span> <span class="ow">=</span> <span class="s">&quot;</span><span class="se">\\</span><span class="s">d+&quot;</span>
	    <span class="n">integer</span>    <span class="ow">=</span> <span class="n">opt_sign</span> <span class="o">++</span> <span class="n">dec_number</span>
	    <span class="n">exp</span>        <span class="ow">=</span> <span class="s">&quot;eE&quot;</span> <span class="o">++</span> <span class="n">opt_sign</span> <span class="o">++</span> <span class="n">dec_number</span>
	    <span class="n">real</span>       <span class="ow">=</span> <span class="s">&quot;(&quot;</span> <span class="o">++</span> <span class="n">opt_sign</span> <span class="o">++</span> <span class="n">dec_number</span> <span class="o">++</span> <span class="s">&quot;</span><span class="se">\\</span><span class="s">.&quot;</span> <span class="o">++</span> <span class="n">dec_number</span> <span class="o">++</span> <span class="n">exp</span> <span class="o">++</span><span class="s">&quot;?&quot;</span> <span class="o">++</span> <span class="s">&quot;)&quot;</span> <span class="o">++</span>
			 <span class="s">&quot;|&quot;</span> <span class="o">++</span> <span class="s">&quot;(&quot;</span> <span class="o">++</span> <span class="n">opt_sign</span> <span class="o">++</span> <span class="n">dec_number</span> <span class="o">++</span> <span class="n">exp</span> <span class="o">++</span> <span class="s">&quot;)&quot;</span> <span class="kr">in</span>
	    <span class="kr">do</span> <span class="n">putStrLn</span> <span class="s">&quot;not a natural&quot;</span>  <span class="p">`</span><span class="n">unless</span><span class="p">`</span> <span class="p">(</span><span class="n">s</span> <span class="o">==~</span> <span class="n">dec_number</span><span class="p">)</span>
	       <span class="n">putStrLn</span> <span class="s">&quot;not an integer&quot;</span> <span class="p">`</span><span class="n">unless</span><span class="p">`</span> <span class="p">(</span><span class="n">s</span> <span class="o">==~</span> <span class="n">integer</span><span class="p">)</span>
	       <span class="n">putStrLn</span> <span class="s">&quot;not a decimal&quot;</span>  <span class="p">`</span><span class="n">unless</span><span class="p">`</span> <span class="p">(</span><span class="n">s</span> <span class="o">==~</span> <span class="p">(</span><span class="n">integer</span> <span class="o">++</span> <span class="s">&quot;</span><span class="se">\\</span><span class="s">.&quot;</span> <span class="o">++</span> <span class="n">dec_number</span><span class="p">))</span>
	       <span class="n">putStrLn</span> <span class="s">&quot;not a float&quot;</span>    <span class="p">`</span><span class="n">unless</span><span class="p">`</span> <span class="p">(</span><span class="n">s</span> <span class="o">==~</span> <span class="n">real</span><span class="p">)</span>

<span class="nf">m0test</span> <span class="ow">=</span> <span class="n">m0</span> <span class="s">&quot;124&quot;</span>      </PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN76"
>Comparing Floating-Point Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">equal_num</span> <span class="n">n1</span> <span class="n">n2</span> <span class="n">nbdecimal</span> <span class="ow">=</span> <span class="p">(</span><span class="n">abs</span> <span class="p">(</span><span class="n">n1</span> <span class="o">-</span> <span class="n">n2</span><span class="p">))</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">10</span> <span class="o">^^</span> <span class="n">nbdecimal</span><span class="p">)</span>
<span class="nf">eqnum</span> <span class="ow">=</span> <span class="n">equal_num</span> <span class="mf">10.001</span> <span class="mf">10.002</span> <span class="mi">4</span> <span class="c1">-- with 3 give True cos 10.001 - 10.002 != 0.001 but 0.000999</span>

<span class="nf">wage</span> <span class="ow">=</span> <span class="mi">536</span>          <span class="c1">-- $5.36/hour</span>
<span class="nf">week</span> <span class="ow">=</span> <span class="mi">40</span> <span class="o">*</span> <span class="n">wage</span>    <span class="c1">-- $214.40</span>
<span class="nf">weekwage</span> <span class="ow">=</span> <span class="n">putStrLn</span> <span class="p">(</span><span class="s">&quot;One week&#39;s wage is: $&quot;</span><span class="o">++</span><span class="n">show_float</span> <span class="mi">2</span> <span class="p">(</span><span class="n">tonum</span> <span class="n">week</span><span class="o">/</span><span class="mf">100.0</span><span class="p">))</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN79"
>Rounding Floating-Point Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">i</span> <span class="ow">=</span> <span class="mf">2.3</span><span class="o">.</span><span class="n">round</span>
<span class="nf">a2</span>  <span class="ow">=</span> <span class="mf">0.255</span>
<span class="nf">sa2</span> <span class="ow">=</span> <span class="n">show_float</span> <span class="mi">2</span> <span class="n">a2</span>
<span class="nf">mprinta</span> <span class="ow">=</span> <span class="n">putStrLn</span> <span class="p">(</span><span class="s">&quot;Unrounded: &quot;</span><span class="o">^</span><span class="n">a2</span><span class="o">^</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Rounded: &quot;</span><span class="o">^</span><span class="n">sa2</span><span class="p">)</span>

<span class="c1">-- TODO, i dont exactly produce the good ouput, negative number are not centered</span>
<span class="nf">mprintfloat</span> <span class="ow">=</span> <span class="kr">do</span> <span class="n">putStrLn</span> <span class="s">&quot;number</span><span class="se">\t</span><span class="s">int</span><span class="se">\t</span><span class="s">floor</span><span class="se">\t</span><span class="s">ceil&quot;</span>
		 <span class="p">[</span><span class="mf">3.3</span> <span class="p">,</span> <span class="mf">3.5</span> <span class="p">,</span> <span class="mf">3.7</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.3</span><span class="p">]</span><span class="o">.</span><span class="n">each</span><span class="p">(</span><span class="nf">\</span><span class="n">n</span> <span class="ow">-&gt;</span> <span class="n">putStrLn</span> <span class="p">((</span><span class="n">show_float</span> <span class="mi">1</span> <span class="n">n</span><span class="p">)</span><span class="o">^</span><span class="s">&quot;</span><span class="se">\t</span><span class="s">&quot;</span><span class="o">^</span>
							      <span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">round</span><span class="p">)</span><span class="o">^</span><span class="s">&quot;</span><span class="se">\t</span><span class="s">&quot;</span><span class="o">^</span>
							      <span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">floor</span><span class="p">)</span><span class="o">^</span><span class="s">&quot;</span><span class="se">\t</span><span class="s">&quot;</span><span class="o">^</span>
							      <span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">ceiling</span><span class="p">)))</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN82"
>Converting Between Binary and Decimal</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">-- TODO? not exacly this, as 54 = 110 110 we dont see the pb of big endian</span>
<span class="nf">bin2i</span> <span class="n">xs</span> <span class="ow">=</span> <span class="n">aux</span> <span class="mi">1</span> <span class="p">(</span><span class="n">reverse</span> <span class="n">xs</span><span class="p">)</span>
    <span class="kr">where</span> <span class="n">aux</span> <span class="n">power</span> <span class="kt">[]</span>     <span class="ow">=</span> <span class="mi">0</span>
	  <span class="n">aux</span> <span class="n">power</span> <span class="p">(</span><span class="n">x</span><span class="kt">:</span><span class="n">xs</span><span class="p">)</span> <span class="ow">=</span> <span class="n">aux</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">power</span><span class="p">)</span> <span class="n">xs</span><span class="o">+</span><span class="p">(</span><span class="kr">if</span> <span class="n">x</span> <span class="o">==</span> <span class="sc">&#39;0&#39;</span> <span class="kr">then</span> <span class="mi">0</span> <span class="kr">else</span> <span class="n">power</span><span class="p">)</span>
<span class="nf">bin2i&#39;</span> <span class="n">xs</span> <span class="ow">=</span> <span class="n">xs</span><span class="o">.</span><span class="n">reverse</span><span class="o">.</span><span class="n">map</span> <span class="p">(</span><span class="nf">\</span><span class="n">c</span> <span class="ow">-&gt;</span> <span class="n">read</span> <span class="p">[</span><span class="n">c</span><span class="p">])</span><span class="o">.</span><span class="n">zipWith</span> <span class="p">(</span><span class="nf">\</span><span class="n">a</span> <span class="n">b</span> <span class="ow">-&gt;</span> <span class="n">b</span><span class="o">*</span><span class="p">(</span><span class="mi">2</span><span class="o">^^</span><span class="n">a</span><span class="p">))</span> <span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span>
<span class="nf">i10</span> <span class="ow">=</span> <span class="n">bin2i&#39;</span> <span class="s">&quot;0110110&quot;</span> <span class="c1">-- 54</span>

<span class="nf">i2bin</span> <span class="n">i</span> <span class="ow">=</span> <span class="kr">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="kr">then</span> <span class="s">&quot;0&quot;</span> <span class="kr">else</span> <span class="n">aux</span> <span class="n">i</span>
	  <span class="kr">where</span> <span class="n">aux</span> <span class="n">i</span> <span class="ow">=</span> <span class="kr">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span>  <span class="kr">then</span> <span class="s">&quot;&quot;</span> <span class="kr">else</span> <span class="n">aux</span> <span class="p">(</span><span class="n">i</span> <span class="p">`</span><span class="n">div</span><span class="p">`</span> <span class="mi">2</span><span class="p">)</span> <span class="o">++</span> <span class="n">show</span> <span class="p">(</span><span class="n">i</span> <span class="p">`</span><span class="n">mod</span><span class="p">`</span> <span class="mi">2</span><span class="p">)</span>
<span class="nf">bin10</span> <span class="ow">=</span> <span class="n">i2bin</span> <span class="mi">54</span> <span class="c1">-- &quot;110110&quot;</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN85"
>Operating on a Series of Integers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">m1</span> <span class="ow">=</span> <span class="n">putStr</span> <span class="s">&quot;Infancy is: &quot;</span> <span class="o">&gt;&gt;</span> <span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">each</span><span class="p">(</span><span class="nf">\</span><span class="n">e</span> <span class="ow">-&gt;</span> <span class="n">putStr</span> <span class="p">(</span><span class="n">e</span><span class="o">^</span><span class="s">&quot; &quot;</span><span class="p">))</span>
<span class="nf">m2</span> <span class="ow">=</span> <span class="n">putStr</span> <span class="s">&quot;Infancy is: &quot;</span> <span class="o">&gt;&gt;</span> <span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">map</span> <span class="n">show</span><span class="o">.</span><span class="n">unwords</span><span class="o">.</span><span class="n">putStr</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN88"
>Working with Roman Numerals</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">-- code from comp.lang.functionnal</span>
<span class="nf">inttorom</span> <span class="n">n</span> <span class="ow">=</span> <span class="p">(</span><span class="n">concat</span>  <span class="err">°</span> <span class="n">reverse</span><span class="p">)</span> <span class="p">(</span><span class="n">zipWith</span> <span class="n">roman</span> <span class="n">sets</span> <span class="n">digits</span><span class="p">)</span>  <span class="kr">where</span>
     <span class="n">digits</span> <span class="ow">=</span> <span class="n">reverse</span> <span class="p">(</span><span class="n">map</span> <span class="p">(</span><span class="nf">\</span><span class="n">x</span> <span class="ow">-&gt;</span> <span class="n">fromInt</span> <span class="p">(</span><span class="n">read</span> <span class="p">[</span><span class="n">x</span><span class="p">]))</span> <span class="p">(</span><span class="n">show</span> <span class="n">n</span><span class="p">))</span>
     <span class="n">roman</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">v</span><span class="p">,</span><span class="n">x</span><span class="p">)</span> <span class="n">n</span> <span class="ow">=</span> <span class="kr">case</span> <span class="n">n</span> <span class="kr">of</span> <span class="p">{</span> 
         <span class="mi">0</span> <span class="ow">-&gt;</span> <span class="kt">[]</span><span class="p">;</span>  <span class="mi">1</span> <span class="ow">-&gt;</span> <span class="p">[</span><span class="n">i</span><span class="p">];</span>   <span class="mi">2</span> <span class="ow">-&gt;</span> <span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="p">];</span>   <span class="mi">3</span> <span class="ow">-&gt;</span> <span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="p">];</span>   <span class="mi">4</span> <span class="ow">-&gt;</span> <span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">v</span><span class="p">];</span> 
         <span class="mi">5</span> <span class="ow">-&gt;</span> <span class="p">[</span><span class="n">v</span><span class="p">];</span> <span class="mi">6</span> <span class="ow">-&gt;</span> <span class="p">[</span><span class="n">v</span><span class="p">,</span><span class="n">i</span><span class="p">];</span> <span class="mi">7</span> <span class="ow">-&gt;</span> <span class="p">[</span><span class="n">v</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="p">];</span> <span class="mi">8</span> <span class="ow">-&gt;</span> <span class="p">[</span><span class="n">v</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="p">];</span> <span class="mi">9</span> <span class="ow">-&gt;</span> <span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">x</span><span class="p">]</span> <span class="p">}</span>
     <span class="n">sets</span> <span class="ow">=</span> <span class="p">[(</span><span class="sc">&#39;I&#39;</span><span class="p">,</span><span class="sc">&#39;V&#39;</span><span class="p">,</span><span class="sc">&#39;X&#39;</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;X&#39;</span><span class="p">,</span><span class="sc">&#39;L&#39;</span><span class="p">,</span><span class="sc">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;C&#39;</span><span class="p">,</span><span class="sc">&#39;D&#39;</span><span class="p">,</span><span class="sc">&#39;M&#39;</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;M&#39;</span><span class="p">,</span><span class="sc">&#39;?&#39;</span><span class="p">,</span><span class="sc">&#39;?&#39;</span><span class="p">)]</span> 

<span class="nf">mroman</span> <span class="ow">=</span> <span class="n">putStrLn</span> <span class="p">(</span><span class="s">&quot;Roman for &quot;</span><span class="o">^</span><span class="mi">15</span><span class="o">^</span><span class="s">&quot; is :&quot;</span><span class="o">^</span><span class="n">inttorom</span> <span class="mi">15</span><span class="p">)</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN91"
>Generating Random Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">ran</span> <span class="ow">=</span> <span class="n">rand</span> <span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">75</span><span class="p">)</span> <span class="c1">-- [25,75]</span>

<span class="nf">chars</span> <span class="ow">=</span> <span class="n">concat</span> <span class="p">[[</span><span class="sc">&#39;A&#39;</span><span class="o">..</span><span class="sc">&#39;Z&#39;</span><span class="p">],[</span><span class="n">&#39;a&#39;</span><span class="o">..</span><span class="n">&#39;z&#39;</span><span class="p">],[</span><span class="sc">&#39;0&#39;</span><span class="o">..</span><span class="sc">&#39;9&#39;</span><span class="p">],</span><span class="s">&quot;!@$%^&amp;*&quot;</span><span class="p">]</span>

<span class="c1">--password = [1..8].foldM (\a _ -&gt; rand (0, chars.length -1) &gt;&gt;= (\i -&gt; return (a++chars![i]))) &quot;&quot; </span>
<span class="c1">--password = [1..8].mapM (\_ -&gt; rand (0, chars.length -1) &gt;&gt;= (\i -&gt; return (chars!!i)))</span>
<span class="nf">password</span> <span class="ow">=</span> <span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">8</span><span class="p">]</span><span class="o">.</span><span class="n">mapM</span> <span class="p">(</span><span class="nf">\</span><span class="kr">_</span> <span class="ow">-&gt;</span> <span class="n">rand</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">chars</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="n">chars</span><span class="o">!</span><span class="p">))</span> <span class="c1">-- no join, string = [Char] :) hihi section :)</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN94"
>Generating Different Random Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">randfixed</span> <span class="ow">=</span> <span class="kr">do</span> <span class="n">srand</span> <span class="mi">2</span>
	       <span class="n">rand</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN97"
>Making Numbers Even More Random</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">-- uses a Perl module.., in haskell too you can provide your own random generator by</span>
<span class="c1">-- playing with the StdGen type</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN100"
>Generating Biased Random Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">gaussian_rand</span> <span class="ow">=</span> <span class="kr">do</span> <span class="n">r1</span> <span class="ow">&lt;-</span> <span class="n">stdrand</span>
		   <span class="n">r2</span> <span class="ow">&lt;-</span> <span class="n">stdrand</span>
		   <span class="kr">let</span> <span class="n">u1</span> <span class="ow">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">r1</span> <span class="o">-</span> <span class="mi">1</span>
		       <span class="n">u2</span> <span class="ow">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">r2</span> <span class="o">-</span> <span class="mi">1</span>
		       <span class="n">w</span>  <span class="ow">=</span> <span class="n">u1</span><span class="o">*</span><span class="n">u1</span> <span class="o">+</span> <span class="n">u2</span><span class="o">*</span><span class="n">u2</span> <span class="kr">in</span>
		       <span class="kr">if</span> <span class="n">w</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="kr">then</span> <span class="n">gaussian_rand</span>
		       <span class="kr">else</span> <span class="kr">let</span> <span class="n">w2</span> <span class="ow">=</span> <span class="n">sqrt</span> <span class="p">((</span><span class="o">-</span><span class="mi">2</span> <span class="o">*</span> <span class="n">log</span> <span class="n">w</span><span class="p">)</span><span class="o">/</span><span class="n">w</span><span class="p">)</span> <span class="kr">in</span>
				<span class="n">return</span> <span class="p">[</span><span class="n">u2</span><span class="o">*</span><span class="n">w2</span><span class="p">,</span> <span class="n">u1</span><span class="o">*</span><span class="n">w2</span><span class="p">]</span>

<span class="nf">mean</span> <span class="ow">=</span> <span class="mi">25</span>
<span class="nf">sdev</span> <span class="ow">=</span> <span class="mi">2</span>
<span class="nf">salary</span> <span class="ow">=</span> <span class="n">gaussian_rand</span> <span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="nf">\</span><span class="n">l</span> <span class="ow">-&gt;</span> <span class="n">l</span><span class="o">.</span><span class="n">head</span> <span class="o">*</span> <span class="p">(</span><span class="n">tonum</span> <span class="n">sdev</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">tonum</span> <span class="n">mean</span><span class="p">))</span>
<span class="nf">msalary</span> <span class="ow">=</span> <span class="kr">do</span> <span class="n">r</span> <span class="ow">&lt;-</span> <span class="n">salary</span>
	     <span class="n">putStrLn</span> <span class="p">(</span><span class="s">&quot;You have been hired at $&quot;</span><span class="o">^</span><span class="n">show_float</span> <span class="mi">2</span> <span class="n">r</span><span class="p">)</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN103"
>Doing Trigonometry in Degrees, not Radians</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">deg2rad</span> <span class="n">d</span> <span class="ow">=</span> <span class="n">d</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span>
<span class="nf">rad2deg</span> <span class="n">r</span> <span class="ow">=</span> <span class="n">r</span> <span class="o">*</span> <span class="mi">180</span> <span class="o">/</span> <span class="n">pi</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN106"
>Calculating More Trigonometric Functions</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">sin_val</span> <span class="ow">=</span> <span class="n">sin</span> <span class="n">pi</span>
<span class="nf">cos_val</span> <span class="ow">=</span> <span class="n">cos</span> <span class="n">pi</span>
<span class="nf">tan_val</span> <span class="ow">=</span> <span class="n">tan</span> <span class="n">pi</span>

<span class="nf">asin_val</span> <span class="ow">=</span> <span class="n">asin</span> <span class="mi">1</span>
<span class="nf">acos_val</span> <span class="ow">=</span> <span class="n">acos</span> <span class="mi">1</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN109"
>Taking Logarithms</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">log_e</span> <span class="ow">=</span> <span class="n">log</span> <span class="mi">10</span>
<span class="nf">log_10</span> <span class="ow">=</span> <span class="n">log10</span> <span class="mi">100</span> <span class="c1">-- 2</span>

<span class="c1">-- in haskell we dont have by default log10 but we have logBase</span>
<span class="nf">log10</span> <span class="ow">=</span> <span class="n">logBase</span> <span class="mi">10</span>

<span class="nf">answer</span> <span class="ow">=</span> <span class="n">logBase</span> <span class="mi">10</span> <span class="mi">10000</span>
<span class="nf">mlog</span> <span class="ow">=</span> <span class="n">putStrLn</span> <span class="p">(</span><span class="s">&quot;log10(10,000)=&quot;</span><span class="o">^</span><span class="n">answer</span><span class="p">)</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN112"
>Multiplying Matrices</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">matrixa</span> <span class="ow">=</span> <span class="kt">Matrix</span><span class="p">[[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> 
		 <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">]]</span>
<span class="nf">matrixb</span> <span class="ow">=</span> <span class="kt">Matrix</span><span class="p">[[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> 
		 <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> 
		 <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
<span class="nf">matrixc</span> <span class="ow">=</span> <span class="n">matrixa</span> <span class="o">*</span> <span class="n">matrixb</span>

<span class="nf">masize</span> <span class="ow">=</span> <span class="n">matrixa</span><span class="o">.</span><span class="n">row_size</span>
<span class="nf">mbsize</span> <span class="ow">=</span> <span class="n">matrixa</span><span class="o">.</span><span class="n">column_size</span>

<span class="c1">--TODO,transposed = matrixc.transpose</span>
<span class="c1">--determined = matrixa.det</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN115"
>Using Complex Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">ca</span> <span class="ow">=</span> <span class="mi">3</span> <span class="kt">:+</span> <span class="mi">5</span>
<span class="nf">cb</span> <span class="ow">=</span> <span class="mi">2</span> <span class="kt">:+</span> <span class="o">-</span><span class="mi">2</span>
<span class="nf">mcomplex</span> <span class="ow">=</span> <span class="n">putStrLn</span> <span class="p">(</span><span class="s">&quot;c = &quot;</span><span class="o">^</span><span class="p">(</span><span class="n">ca</span><span class="o">*</span><span class="n">cb</span><span class="p">))</span>
<span class="nf">cc</span> <span class="ow">=</span> <span class="n">ca</span><span class="o">*</span><span class="n">cb</span>
<span class="nf">cd</span> <span class="ow">=</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span><span class="o">*</span><span class="n">complex_i</span>

<span class="nf">mcomplex2</span> <span class="ow">=</span> <span class="n">putStrLn</span> <span class="p">(</span><span class="s">&quot;sqrt(&quot;</span><span class="o">^</span><span class="n">cd</span><span class="o">^</span><span class="s">&quot;) = &quot;</span><span class="o">^</span><span class="n">sqrt</span> <span class="n">cd</span><span class="p">)</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN118"
>Converting Between Octal and Hexadecimal</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">i2</span> <span class="ow">=</span> <span class="n">hex</span> <span class="s">&quot;0x45&quot;</span>
<span class="nf">i3</span> <span class="ow">=</span> <span class="n">oct</span> <span class="s">&quot;0o45&quot;</span>

<span class="nf">m3</span> <span class="ow">=</span> <span class="kr">do</span> <span class="n">putStrLn</span> <span class="s">&quot;Gimme a number in decimal, octal, or hex: &quot;</span>
	<span class="n">s</span> <span class="ow">&lt;-</span> <span class="n">getLine</span>
	<span class="kr">let</span> <span class="n">i</span> <span class="ow">=</span> <span class="n">s</span><span class="o">.</span><span class="n">pattern_matches</span> <span class="p">[(</span><span class="s">&quot;^0x&quot;</span><span class="p">,</span> <span class="n">hex</span> <span class="n">s</span><span class="p">),(</span><span class="s">&quot;^0o&quot;</span><span class="p">,</span> <span class="n">oct</span> <span class="n">s</span><span class="p">),(</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">read</span> <span class="n">s</span><span class="p">)]</span> <span class="kr">in</span>
		<span class="n">putStrLn</span> <span class="p">(</span><span class="n">concat</span> <span class="p">[</span><span class="n">show</span> <span class="n">i</span><span class="p">,</span><span class="s">&quot; &quot;</span><span class="p">,</span><span class="n">tohex</span> <span class="n">i</span><span class="p">,</span><span class="s">&quot; &quot;</span><span class="p">,</span> <span class="n">tooct</span> <span class="n">i</span><span class="p">,</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">])</span>
<span class="c1">-- no printf :((</span>

<span class="nf">m3&#39;</span> <span class="ow">=</span> <span class="kr">do</span> <span class="n">putStrLn</span> <span class="s">&quot;Enter file permission in octal: &quot;</span>
	 <span class="n">permissions</span> <span class="ow">&lt;-</span> <span class="n">getLine</span>
	 <span class="n">putStrLn</span> <span class="p">(</span><span class="s">&quot;The decimal value is &quot;</span><span class="o">^</span><span class="n">permissions</span><span class="o">.</span><span class="n">oct</span><span class="p">)</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN121"
>Putting Commas in Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">commify</span> <span class="n">s</span> <span class="ow">=</span> <span class="kr">if</span> <span class="n">s</span><span class="o">.</span><span class="n">length</span> <span class="o">&lt;=</span> <span class="mi">3</span> <span class="kr">then</span> <span class="n">s</span> <span class="kr">else</span> 
	    <span class="kr">let</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span> <span class="ow">=</span> <span class="n">splitAt</span> <span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span><span class="mi">3</span><span class="p">)</span> <span class="n">s</span> <span class="kr">in</span> <span class="n">commify</span> <span class="n">a</span> <span class="o">++</span> <span class="s">&quot;,&quot;</span> <span class="o">++</span> <span class="n">b</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN124"
>Printing Correct Plurals</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">plurals</span> <span class="n">i</span>   <span class="ow">=</span> <span class="kr">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="kr">then</span> <span class="s">&quot;s&quot;</span> <span class="kr">else</span> <span class="s">&quot;&quot;</span>
<span class="nf">pluralies</span> <span class="n">i</span> <span class="ow">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="s">&quot;ies&quot;</span><span class="p">,</span><span class="s">&quot;y&quot;</span><span class="p">)</span>

<span class="nf">hours</span> <span class="ow">=</span> <span class="mi">2</span>
<span class="nf">century</span> <span class="ow">=</span> <span class="mi">2</span>
<span class="nf">flies</span> <span class="ow">=</span> <span class="mi">3</span>
<span class="nf">mplural</span>  <span class="ow">=</span> <span class="n">putStrLn</span> <span class="p">(</span><span class="s">&quot;It took &quot;</span><span class="o">^</span><span class="n">hours</span><span class="o">^</span><span class="s">&quot; hour&quot;</span><span class="o">^</span><span class="p">(</span><span class="n">plurals</span> <span class="n">hours</span><span class="p">))</span>
<span class="nf">mplural2</span> <span class="ow">=</span> <span class="n">putStrLn</span> <span class="p">(</span><span class="s">&quot;It took &quot;</span><span class="o">^</span><span class="n">century</span><span class="o">^</span><span class="s">&quot; centur&quot;</span><span class="o">^</span><span class="p">(</span><span class="n">pluralies</span> <span class="n">century</span><span class="p">))</span>

<span class="c1">-- TODO, the suffix program and prime factor</span>

<span class="c1">----------------------------------------------------------------------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN127"
>Program: Calculating Prime Factors</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="strings.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="datesandtimes.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Strings</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Dates and Times</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>