<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Hashes</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="PLEAC-Haskell"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Arrays"
HREF="arrays.html"><LINK
REL="NEXT"
TITLE="Pattern Matching"
HREF="patternmatching.html"><style type="text/css">td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
pre { line-height: 125%; }

  </style></head
><BODY TEXT="#cecece" BGCOLOR="#4f6f6f" LINK="#f5deb3" VLINK="#d5ae83"
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PLEAC-Haskell</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="arrays.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="patternmatching.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="HASHES"
>5. Hashes</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN232"
>Introduction</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span>
<span class="c1">-- this choose for association the traditionnal assoc list representation</span>
<span class="nf">age</span> <span class="ow">=</span> <span class="p">[</span> <span class="p">(</span><span class="s">&quot;Nat&quot;</span><span class="p">,</span><span class="mi">24</span><span class="p">)</span>
	<span class="p">,(</span><span class="s">&quot;Jules&quot;</span><span class="p">,</span><span class="mi">25</span><span class="p">)</span>
	<span class="p">,(</span><span class="s">&quot;Josh&quot;</span><span class="p">,</span><span class="mi">17</span><span class="p">)]</span>
<span class="c1">-- if you preprend the list with fromList, then you can decide what representaion to choose by typing age</span>
<span class="nf">age&#39;</span><span class="ow">::</span> <span class="kt">Assoc</span> <span class="kt">String</span> <span class="kt">Int</span>
<span class="nf">age&#39;</span> <span class="ow">=</span> <span class="n">fromList</span> <span class="p">[</span> <span class="p">(</span><span class="s">&quot;Nat&quot;</span><span class="p">,</span><span class="mi">24</span><span class="p">)</span>
		  <span class="p">,(</span><span class="s">&quot;Jules&quot;</span><span class="p">,</span><span class="mi">25</span><span class="p">)</span>
		  <span class="p">,(</span><span class="s">&quot;Josh&quot;</span><span class="p">,</span><span class="mi">17</span><span class="p">)]</span>

<span class="nf">age1</span><span class="ow">::</span> <span class="kt">Assoc</span> <span class="kt">String</span> <span class="kt">Int</span>
<span class="nf">age1</span> <span class="ow">=</span> <span class="n">empty</span>
<span class="nf">age2</span> <span class="ow">=</span> <span class="n">age1</span><span class="o">.</span><span class="n">insert</span> <span class="p">(</span><span class="s">&quot;Nat&quot;</span><span class="p">,</span><span class="mi">24</span><span class="p">)</span>
<span class="nf">age3</span> <span class="ow">=</span> <span class="n">age2</span><span class="o">.</span><span class="n">insert</span> <span class="p">(</span><span class="s">&quot;Jules&quot;</span><span class="p">,</span><span class="mi">25</span><span class="p">)</span>
<span class="nf">age4</span> <span class="ow">=</span> <span class="n">age3</span><span class="o">.</span><span class="n">insert</span> <span class="p">(</span><span class="s">&quot;Josh&quot;</span><span class="p">,</span><span class="mi">17</span><span class="p">)</span>

<span class="nf">food_color</span> <span class="ow">::</span> <span class="kt">Assoc</span> <span class="kt">String</span> <span class="kt">String</span>
<span class="nf">food_color</span> <span class="ow">=</span>  <span class="n">fromList</span> <span class="p">[</span> <span class="s">&quot;Apple&quot;</span>  <span class="o">==&gt;</span> <span class="s">&quot;red&quot;</span>
			<span class="p">,</span><span class="s">&quot;Banana&quot;</span> <span class="o">==&gt;</span> <span class="s">&quot;yellow&quot;</span>
			<span class="p">,</span><span class="s">&quot;Lemon&quot;</span>  <span class="o">==&gt;</span> <span class="s">&quot;yellow&quot;</span>
			<span class="p">,</span><span class="s">&quot;Carrot&quot;</span> <span class="o">==&gt;</span> <span class="s">&quot;orange&quot;</span>
			<span class="p">]</span>

<span class="c1">-- In haskell, you cannot avoid the double quoting while manipulatin hashes</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN235"
>Adding an Element to a Hash</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">food_color&#39;</span> <span class="ow">=</span> <span class="n">food_color</span><span class="o">.</span><span class="n">insert</span> <span class="p">(</span><span class="s">&quot;Raspberry&quot;</span> <span class="o">==&gt;</span> <span class="s">&quot;pink&quot;</span><span class="p">)</span>
<span class="nf">mfood_color</span> <span class="ow">=</span> <span class="n">putStrLn</span> <span class="p">(</span><span class="s">&quot;Know foods: &quot;</span><span class="o">^</span><span class="p">(</span><span class="n">unwords</span> <span class="p">(</span><span class="n">food_color</span><span class="o">.</span><span class="n">keys</span><span class="p">)))</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN238"
>Testing for the Presence of a Key in a Hash</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">-- does hash have a value for key ?</span>

<span class="nf">mhash</span> <span class="ow">=</span> <span class="p">[</span><span class="s">&quot;Banana&quot;</span><span class="p">,</span> <span class="s">&quot;Martini&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mapM</span><span class="p">(</span><span class="nf">\</span><span class="n">name</span> <span class="ow">-&gt;</span> 
	<span class="n">putStrLn</span> <span class="p">(</span><span class="n">name</span><span class="o">^</span><span class="s">&quot; is a &quot;</span><span class="o">^</span><span class="p">(</span><span class="n">food_color</span><span class="o">.</span><span class="n">has_key</span> <span class="n">name</span> <span class="o">?</span> <span class="p">(</span><span class="s">&quot;food&quot;</span><span class="p">,</span><span class="s">&quot;drink&quot;</span><span class="p">)))</span>
				  <span class="p">)</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN241"
>Deleting from a Hash</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">food_color2</span> <span class="ow">=</span> <span class="n">food_color</span><span class="o">.</span><span class="n">delete_key</span> <span class="s">&quot;Banana&quot;</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN244"
>Traversing a Hash</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span>
<span class="nf">mhash2</span> <span class="ow">=</span> <span class="n">food_color</span><span class="o">.</span><span class="n">each</span> <span class="p">(</span><span class="nf">\</span><span class="p">(</span><span class="n">food</span><span class="p">,</span><span class="n">color</span><span class="p">)</span> <span class="ow">-&gt;</span>
	 <span class="n">putStrLn</span> <span class="p">(</span><span class="n">food</span><span class="o">^</span><span class="s">&quot; is &quot;</span><span class="o">^</span><span class="n">color</span><span class="p">)</span>
	 <span class="p">)</span>
<span class="nf">mhash3</span> <span class="ow">=</span> <span class="n">food_color</span><span class="o">.</span><span class="n">each_key</span><span class="p">(</span><span class="nf">\</span><span class="n">food</span> <span class="ow">-&gt;</span> 
	 <span class="n">putStrLn</span> <span class="p">(</span><span class="n">food</span><span class="o">^</span><span class="s">&quot; is &quot;</span><span class="o">^</span><span class="p">(</span><span class="n">food_color</span><span class="o">!</span><span class="n">food</span><span class="p">))</span>
	 <span class="p">)</span>

<span class="c1">-- IMO too (as gc), this demonstrates that OO style is by far more readable</span>
<span class="nf">mhash4</span> <span class="ow">=</span> <span class="n">food_color</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">sort</span><span class="o">.</span><span class="n">each</span><span class="p">(</span><span class="nf">\</span><span class="n">food</span> <span class="ow">-&gt;</span>
	 <span class="n">putStrLn</span> <span class="p">(</span><span class="n">food</span><span class="o">^</span><span class="s">&quot; is &quot;</span><span class="o">^</span><span class="p">(</span><span class="n">food_color</span><span class="o">!</span><span class="n">food</span><span class="p">))</span>
         <span class="p">)</span>
<span class="c1">---------------------------------------</span>
<span class="o">#!/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">runhugs</span> <span class="o">-</span><span class="mi">98</span>
<span class="kr">module</span> <span class="nn">Main</span> <span class="kr">where</span>

<span class="kr">import</span> <span class="nn">Prelude</span> <span class="k">hiding</span> <span class="p">((</span><span class="o">$</span><span class="p">),(</span><span class="o">^</span><span class="p">),(</span><span class="o">.</span><span class="p">),(</span><span class="o">!!</span><span class="p">),</span><span class="nf">map</span><span class="p">,</span><span class="nf">take</span><span class="p">,</span><span class="nf">lookup</span><span class="p">,</span><span class="nf">drop</span><span class="p">,</span><span class="nf">splitAt</span><span class="p">,</span><span class="nf">reverse</span><span class="p">,</span><span class="nf">filter</span><span class="p">,</span><span class="nf">takeWhile</span><span class="p">,</span><span class="nf">dropWhile</span><span class="p">,</span><span class="nf">null</span><span class="p">,</span><span class="nf">foldl</span><span class="p">,</span><span class="nf">length</span><span class="p">)</span>
<span class="kr">import</span> <span class="nn">Common</span>
<span class="c1">-- TODO, very slow, try with ghc</span>

<span class="c1">-- countfrom - count number of messages from each sender</span>
<span class="nf">main</span> <span class="ow">=</span> <span class="kr">do</span> <span class="n">lines</span> <span class="ow">&lt;-</span> <span class="p">(</span><span class="o">&lt;&gt;</span><span class="p">)</span>
	  <span class="n">lines</span><span class="o">.</span><span class="n">foldl</span><span class="p">(</span><span class="nf">\</span><span class="n">from</span> <span class="n">l</span> <span class="ow">-&gt;</span> 
		     <span class="kr">if</span> <span class="n">l</span> <span class="o">=~</span> <span class="s">&quot;^From: &quot;</span> 
		     <span class="kr">then</span> <span class="kr">let</span> <span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="ow">=</span> <span class="n">l</span><span class="o">.</span><span class="n">match</span> <span class="s">&quot;^From: (.*)&quot;</span> <span class="kr">in</span> <span class="n">from</span><span class="o">.</span><span class="n">update</span> <span class="n">name</span> <span class="p">(</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
		     <span class="kr">else</span> <span class="n">from</span>
		     <span class="p">)</span> <span class="p">(</span><span class="n">empty</span><span class="ow">::</span><span class="kt">AssocDefault</span> <span class="kt">String</span> <span class="kt">Int</span><span class="p">)</span>
		<span class="o">.</span><span class="n">toList</span><span class="o">.</span><span class="n">sortBy</span> <span class="p">(</span><span class="nf">\</span><span class="p">(</span><span class="kr">_</span><span class="p">,</span><span class="n">a</span><span class="p">)</span> <span class="p">(</span><span class="kr">_</span><span class="p">,</span><span class="n">b</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="n">b</span> <span class="o">&lt;=&gt;</span> <span class="n">a</span><span class="p">)</span>
		<span class="o">.</span><span class="n">each</span> <span class="p">(</span><span class="nf">\</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="n">putStrLn</span> <span class="p">(</span><span class="n">b</span><span class="o">^</span><span class="s">&quot;: &quot;</span><span class="o">^</span><span class="n">a</span><span class="p">))</span>
<span class="c1">---------------------------------------</span>
			      
			   </PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN247"
>Printing a Hash</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">-- You may use the not built-in &#39;show&#39; (poor ruby)</span>
<span class="nf">mhash5</span> <span class="ow">=</span> <span class="n">putStrLn</span> <span class="p">(</span><span class="n">age4</span><span class="o">.</span><span class="n">show</span><span class="p">)</span>
	 
<span class="c1">-- Or do it the Cookbook way:</span>
<span class="nf">mhash5&#39;</span> <span class="ow">=</span> <span class="n">age4</span><span class="o">.</span><span class="n">each</span> <span class="p">(</span><span class="nf">\</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="n">putStrLn</span> <span class="p">(</span><span class="n">k</span><span class="o">^</span><span class="s">&quot; =&gt; &quot;</span><span class="o">^</span><span class="n">v</span><span class="p">))</span>

<span class="c1">-- Sorted by keys</span>
<span class="nf">mhash6</span> <span class="ow">=</span> <span class="n">age4</span><span class="o">.</span><span class="n">toList</span><span class="o">.</span><span class="n">sortBy</span> <span class="p">(</span><span class="nf">\</span><span class="n">a</span> <span class="n">b</span> <span class="ow">-&gt;</span> <span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">fst</span><span class="p">)</span> <span class="o">&lt;=&gt;</span> <span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">fst</span><span class="p">))</span><span class="o">.</span><span class="n">each</span><span class="p">(</span><span class="nf">\</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="n">putStrLn</span> <span class="p">(</span><span class="n">k</span><span class="o">^</span><span class="s">&quot; =&gt; &quot;</span><span class="o">^</span><span class="n">v</span><span class="p">))</span>
<span class="c1">-- Sorted by values</span>
<span class="nf">mhash7</span> <span class="ow">=</span> <span class="n">age4</span><span class="o">.</span><span class="n">toList</span><span class="o">.</span><span class="n">sortBy</span> <span class="p">(</span><span class="nf">\</span><span class="n">a</span> <span class="n">b</span> <span class="ow">-&gt;</span> <span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">snd</span><span class="p">)</span> <span class="o">&lt;=&gt;</span> <span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">snd</span><span class="p">))</span><span class="o">.</span><span class="n">each</span><span class="p">(</span><span class="nf">\</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="n">putStrLn</span> <span class="p">(</span><span class="n">k</span><span class="o">^</span><span class="s">&quot; =&gt; &quot;</span><span class="o">^</span><span class="n">v</span><span class="p">))</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN250"
>Retrieving from a Hash in Insertion Order</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN253"
>Hashes with Multiple Values Per Key</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">mttys</span> <span class="ow">=</span> <span class="kr">do</span> <span class="n">who</span> <span class="ow">&lt;-</span> <span class="n">exec</span> <span class="s">&quot;who&quot;</span>
	   <span class="n">who</span><span class="o">.</span><span class="n">foldl</span><span class="p">(</span><span class="nf">\</span><span class="n">ttys</span> <span class="n">l</span> <span class="ow">-&gt;</span> 
		    <span class="kr">let</span> <span class="p">(</span><span class="n">user</span><span class="kt">:</span><span class="n">tty</span><span class="kt">:</span><span class="kr">_</span><span class="p">)</span><span class="ow">=</span> <span class="n">l</span><span class="o">.</span><span class="n">words</span> <span class="kr">in</span>
		    <span class="n">ttys</span><span class="o">.</span><span class="n">update</span> <span class="n">tty</span> <span class="p">(</span><span class="n">insert</span> <span class="n">user</span><span class="p">)</span>
		    <span class="p">)</span> <span class="p">(</span><span class="n">empty</span><span class="ow">::</span><span class="kt">AssocDefault</span> <span class="kt">String</span> <span class="p">(</span><span class="kt">SetList</span> <span class="kt">String</span><span class="p">))</span>
		<span class="o">.</span><span class="n">toList</span><span class="o">.</span><span class="n">sortBy</span> <span class="p">(</span><span class="nf">\</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="kr">_</span><span class="p">)</span> <span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="kr">_</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="n">b</span> <span class="o">&lt;=&gt;</span> <span class="n">a</span><span class="p">)</span>
		<span class="o">.</span><span class="n">each</span> <span class="p">(</span><span class="nf">\</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="n">putStrLn</span> <span class="p">(</span><span class="n">a</span><span class="o">^</span><span class="s">&quot;: &quot;</span><span class="o">^</span><span class="n">commify_series</span> <span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">toList</span><span class="p">)))</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN256"
>Inverting a Hash</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">surname</span><span class="ow">::</span> <span class="kt">Assoc</span> <span class="kt">String</span> <span class="kt">String</span>
<span class="nf">surname</span> <span class="ow">=</span> <span class="n">fromList</span> <span class="p">[</span><span class="s">&quot;Mickey&quot;</span> <span class="o">==&gt;</span> <span class="s">&quot;Mantle&quot;</span><span class="p">,</span> <span class="s">&quot;Babe&quot;</span>  <span class="o">==&gt;</span> <span class="s">&quot;Ruth&quot;</span><span class="p">]</span>
<span class="nf">mhash8</span> <span class="ow">=</span> <span class="n">surname</span><span class="o">.</span><span class="n">keyss</span> <span class="s">&quot;Mantle&quot;</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">putStrLn</span>

<span class="nf">invert_surname</span><span class="ow">::</span> <span class="kt">Assoc</span> <span class="kt">String</span> <span class="kt">String</span>
<span class="nf">invert_surname</span> <span class="ow">=</span> <span class="n">surname</span><span class="o">.</span><span class="n">toList</span><span class="o">.</span><span class="n">map</span> <span class="p">(</span><span class="nf">\</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">a</span><span class="p">))</span><span class="o">.</span><span class="n">fromList</span>

<span class="c1">---------------------------------------</span>
<span class="o">#!/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">runhugs</span> <span class="o">-</span><span class="mi">98</span>
<span class="kr">module</span> <span class="nn">Main</span> <span class="kr">where</span>

<span class="kr">import</span> <span class="nn">Prelude</span> <span class="k">hiding</span> <span class="p">((</span><span class="o">$</span><span class="p">),(</span><span class="o">^</span><span class="p">),(</span><span class="o">.</span><span class="p">),(</span><span class="o">!!</span><span class="p">),</span><span class="nf">map</span><span class="p">,</span><span class="nf">take</span><span class="p">,</span><span class="nf">lookup</span><span class="p">,</span><span class="nf">drop</span><span class="p">,</span><span class="nf">splitAt</span><span class="p">,</span><span class="nf">reverse</span><span class="p">,</span><span class="nf">filter</span><span class="p">,</span><span class="nf">takeWhile</span><span class="p">,</span><span class="nf">dropWhile</span><span class="p">,</span><span class="nf">null</span><span class="p">,</span><span class="nf">foldl</span><span class="p">,</span><span class="nf">length</span><span class="p">)</span>
<span class="kr">import</span> <span class="nn">Common</span>

<span class="nf">color</span> <span class="ow">::</span> <span class="kt">Assoc</span> <span class="kt">String</span> <span class="kt">String</span>
<span class="nf">color</span> <span class="ow">=</span> <span class="n">fromList</span> <span class="p">[</span>
		 <span class="s">&quot;Apple&quot;</span>  <span class="o">==&gt;</span> <span class="s">&quot;red&quot;</span><span class="p">,</span>
		 <span class="s">&quot;Banana&quot;</span> <span class="o">==&gt;</span> <span class="s">&quot;yellow&quot;</span><span class="p">,</span>
		 <span class="s">&quot;Lemon&quot;</span>  <span class="o">==&gt;</span> <span class="s">&quot;yellow&quot;</span><span class="p">,</span>
		 <span class="s">&quot;Carrot&quot;</span> <span class="o">==&gt;</span> <span class="s">&quot;orange&quot;</span>
		 <span class="p">]</span>


<span class="c1">-- foodfind - find match for food or color</span>
<span class="nf">main</span> <span class="ow">=</span> <span class="kr">do</span> <span class="n">args</span> <span class="ow">&lt;-</span> <span class="n">argv</span>
	  <span class="n">usage</span> <span class="s">&quot;foodfind food_or_color&quot;</span> <span class="p">`</span><span class="n">when</span><span class="p">`</span> <span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">null</span><span class="p">)</span>
	  <span class="kr">let</span> <span class="n">given</span> <span class="ow">=</span> <span class="n">args</span><span class="o">.</span><span class="n">head</span> <span class="kr">in</span>
	      <span class="kr">do</span> <span class="n">putStrLn</span> <span class="p">(</span><span class="n">given</span><span class="o">^</span><span class="s">&quot; is a good with color &quot;</span><span class="o">^</span><span class="p">(</span><span class="n">color</span><span class="o">!</span><span class="n">given</span><span class="p">))</span> 
			      <span class="p">`</span><span class="n">when</span><span class="p">`</span> <span class="p">(</span><span class="n">color</span><span class="o">.</span><span class="n">has_key</span>   <span class="n">given</span><span class="p">)</span>
		 <span class="n">putStrLn</span> <span class="p">(</span><span class="n">given</span><span class="o">^</span><span class="s">&quot; is a color with food &quot;</span><span class="o">^</span><span class="p">(</span><span class="n">color</span><span class="o">.</span><span class="n">keyss</span> <span class="n">given</span><span class="o">.</span><span class="n">head</span><span class="p">))</span> 
			      <span class="p">`</span><span class="n">when</span><span class="p">`</span> <span class="p">(</span><span class="n">color</span><span class="o">.</span><span class="n">has_value</span> <span class="n">given</span><span class="p">)</span>
<span class="c1">---------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN259"
>Sorting a Hash</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">-- Sorted by keys</span>
<span class="nf">mhash9</span>  <span class="ow">=</span> <span class="n">age4</span><span class="o">.</span><span class="n">toList</span><span class="o">.</span><span class="n">sortBy</span> <span class="p">(</span><span class="nf">\</span><span class="n">a</span> <span class="n">b</span> <span class="ow">-&gt;</span> <span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">fst</span><span class="p">)</span> <span class="o">&lt;=&gt;</span> <span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">fst</span><span class="p">))</span><span class="o">.</span><span class="n">each</span> <span class="p">(</span><span class="nf">\</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span> <span class="ow">-&gt;</span> 
	  <span class="n">putStrLn</span> <span class="p">(</span><span class="n">k</span><span class="o">^</span><span class="s">&quot; is &quot;</span><span class="o">^</span><span class="n">v</span><span class="p">))</span>
<span class="c1">-- Sorted by values</span>
<span class="nf">mhash10</span> <span class="ow">=</span> <span class="n">age4</span><span class="o">.</span><span class="n">toList</span><span class="o">.</span><span class="n">sortBy</span> <span class="p">(</span><span class="nf">\</span><span class="n">a</span> <span class="n">b</span> <span class="ow">-&gt;</span> <span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">snd</span><span class="p">)</span> <span class="o">&lt;=&gt;</span> <span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">snd</span><span class="p">))</span><span class="o">.</span><span class="n">each</span> <span class="p">(</span><span class="nf">\</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span> <span class="ow">-&gt;</span> 
	  <span class="n">putStrLn</span> <span class="p">(</span><span class="n">k</span><span class="o">^</span><span class="s">&quot; is &quot;</span><span class="o">^</span><span class="n">v</span><span class="p">))</span>

<span class="c1">-- Sorted by length of values</span>
<span class="nf">mhash11</span> <span class="ow">=</span> <span class="n">food_color</span><span class="o">.</span><span class="n">toList</span><span class="o">.</span><span class="n">sortBy</span> <span class="p">(</span><span class="nf">\</span><span class="n">a</span> <span class="n">b</span> <span class="ow">-&gt;</span> <span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">snd</span><span class="o">.</span><span class="n">length</span><span class="p">)</span> <span class="o">&lt;=&gt;</span> <span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">snd</span><span class="o">.</span><span class="n">length</span><span class="p">))</span><span class="o">.</span><span class="n">each</span> <span class="p">(</span><span class="nf">\</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span> <span class="ow">-&gt;</span> 
	  <span class="n">putStrLn</span> <span class="p">(</span><span class="n">k</span><span class="o">^</span><span class="s">&quot; is &quot;</span><span class="o">^</span><span class="n">v</span><span class="p">))</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN262"
>Merging Hashes</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">drink_color</span><span class="ow">::</span> <span class="kt">Assoc</span> <span class="kt">String</span> <span class="kt">String</span>
<span class="nf">drink_color</span> <span class="ow">=</span> <span class="n">fromList</span> <span class="p">[</span><span class="s">&quot;Galliano&quot;</span> <span class="o">==&gt;</span> <span class="s">&quot;yellow&quot;</span><span class="p">,</span> <span class="s">&quot;Mai Tai&quot;</span> <span class="o">==&gt;</span> <span class="s">&quot;blue&quot;</span><span class="p">]</span>

<span class="c1">-- in haskell no clone, we do implictly always clone :)</span>
<span class="nf">ingested_color</span> <span class="ow">=</span> <span class="n">drink_color</span> <span class="p">`</span><span class="n">union</span><span class="p">`</span> <span class="n">food_color</span>

<span class="nf">substance_color</span> <span class="ow">::</span> <span class="kt">IO</span> <span class="p">(</span><span class="kt">Assoc</span> <span class="kt">String</span> <span class="kt">Int</span><span class="p">)</span>
<span class="nf">substance_color</span> <span class="ow">=</span> <span class="p">[</span><span class="n">food_color</span><span class="p">,</span> <span class="n">drink_color</span><span class="p">]</span>
		  <span class="o">.</span><span class="n">foldM</span> <span class="p">(</span><span class="nf">\</span><span class="n">a</span> <span class="n">i</span> <span class="ow">-&gt;</span> 
			  <span class="n">i</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">foldM</span> <span class="p">(</span><span class="nf">\</span><span class="n">a</span> <span class="n">k</span> <span class="ow">-&gt;</span> 
					<span class="kr">if</span> <span class="n">a</span><span class="o">.</span><span class="n">has_key</span> <span class="n">k</span> 
					<span class="kr">then</span> <span class="n">putStrLn</span> <span class="p">(</span><span class="s">&quot;Warning: &quot;</span><span class="o">^</span><span class="n">k</span><span class="o">^</span><span class="s">&quot; seen twice&quot;</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="n">return</span> <span class="n">a</span><span class="p">)</span>
					<span class="kr">else</span> <span class="n">return</span> <span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">insert</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
					<span class="p">)</span> <span class="n">a</span>
			  <span class="p">)</span> <span class="n">empty</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN265"
>Finding Common or Different Keys in Two Hashes</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">common</span> <span class="ow">=</span> <span class="n">food_color</span><span class="o">.</span><span class="n">keys</span> <span class="o">*</span> <span class="n">drink_color</span><span class="o">.</span><span class="n">keys</span>

<span class="nf">this_not_that</span> <span class="ow">=</span> <span class="n">food_color</span><span class="o">.</span><span class="n">keys</span> <span class="o">-</span> <span class="n">drink_color</span><span class="o">.</span><span class="n">keys</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN268"
>Hashing References</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">-- no problem here, haskell handles any kind of object for key-ing</span>

<span class="c1">-- TODO 5.13 AFAIK, not possible in Ruby</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN271"
>Presizing a Hash</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN274"
>Finding the Most Common Anything</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nf">count</span><span class="ow">::</span> <span class="kt">AssocDefault</span> <span class="kt">String</span> <span class="kt">Int</span>
<span class="nf">count</span> <span class="ow">=</span> <span class="p">[</span><span class="s">&quot;toto&quot;</span><span class="p">,</span><span class="s">&quot;toto&quot;</span><span class="p">,</span><span class="s">&quot;toto&quot;</span><span class="p">,</span><span class="s">&quot;tata&quot;</span><span class="p">,</span><span class="s">&quot;tata&quot;</span><span class="p">,</span><span class="s">&quot;tutu&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">foldl</span> <span class="p">(</span><span class="nf">\</span><span class="n">a</span> <span class="n">s</span> <span class="ow">-&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">update</span> <span class="n">s</span> <span class="p">(</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span> <span class="n">empty</span>

<span class="o">--@</span><span class="kt">PLEAC</span><span class="o">@@</span><span class="n">_5</span><span class="o">.</span><span class="mi">15</span>
<span class="nf">father</span><span class="ow">::</span> <span class="kt">Assoc</span> <span class="kt">String</span> <span class="kt">String</span>
<span class="nf">father</span> <span class="ow">=</span> <span class="n">fromList</span> <span class="p">[</span><span class="s">&quot;Cain&quot;</span>      <span class="o">==&gt;</span> <span class="s">&quot;Adam&quot;</span><span class="p">,</span>
		   <span class="s">&quot;Abel&quot;</span>      <span class="o">==&gt;</span> <span class="s">&quot;Adam&quot;</span><span class="p">,</span>
		   <span class="s">&quot;Seth&quot;</span>      <span class="o">==&gt;</span> <span class="s">&quot;Adam&quot;</span><span class="p">,</span>
		   <span class="s">&quot;Enoch&quot;</span>     <span class="o">==&gt;</span> <span class="s">&quot;Cain&quot;</span><span class="p">,</span>
		   <span class="s">&quot;Irad&quot;</span>      <span class="o">==&gt;</span> <span class="s">&quot;Enoch&quot;</span><span class="p">,</span>
		   <span class="s">&quot;Mehujael&quot;</span>  <span class="o">==&gt;</span> <span class="s">&quot;Irad&quot;</span><span class="p">,</span>
		   <span class="s">&quot;Methusael&quot;</span> <span class="o">==&gt;</span> <span class="s">&quot;Mehujael&quot;</span><span class="p">,</span>
		   <span class="s">&quot;Lamech&quot;</span>    <span class="o">==&gt;</span> <span class="s">&quot;Methusael&quot;</span><span class="p">,</span>
		   <span class="s">&quot;Jabal&quot;</span>     <span class="o">==&gt;</span> <span class="s">&quot;Lamech&quot;</span><span class="p">,</span>
		   <span class="s">&quot;Jubal&quot;</span>     <span class="o">==&gt;</span> <span class="s">&quot;Lamech&quot;</span><span class="p">,</span>
		   <span class="s">&quot;Tubalcain&quot;</span> <span class="o">==&gt;</span> <span class="s">&quot;Lamech&quot;</span><span class="p">,</span>
		   <span class="s">&quot;Enos&quot;</span>      <span class="o">==&gt;</span> <span class="s">&quot;Seth&quot;</span>
		   <span class="p">]</span>


<span class="nf">children</span> <span class="ow">::</span> <span class="kt">AssocDefault</span> <span class="kt">String</span> <span class="p">(</span><span class="kt">SetList</span> <span class="kt">String</span><span class="p">)</span>
<span class="nf">children</span> <span class="ow">=</span> <span class="n">father</span><span class="o">.</span><span class="n">foldl</span> <span class="p">(</span><span class="nf">\</span><span class="n">a</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">update</span> <span class="n">v</span> <span class="p">(</span><span class="n">insert</span> <span class="n">k</span><span class="p">))</span> <span class="n">empty</span>

<span class="c1">-- TODO	   </span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN277"
>Representing Relationships Between Data</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN280"
>Program: dutree</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="arrays.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="patternmatching.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Arrays</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Pattern Matching</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>