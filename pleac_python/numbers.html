<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Numbers</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="PLEAC-Python"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Strings"
HREF="strings.html"><LINK
REL="NEXT"
TITLE="Dates and Times"
HREF="datesandtimes.html"><style type="text/css">td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
pre { line-height: 125%; }

  </style></head
><BODY TEXT="#cecece" BGCOLOR="#4f6f6f" LINK="#f5deb3" VLINK="#d5ae83"
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PLEAC-Python</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="strings.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="datesandtimes.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="NUMBERS"
>2. Numbers</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN73"
>Checking Whether a String Is a Valid Number</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="c"># The standard way of validating numbers is to convert them and catch</span>
<span class="c"># an exception on failure</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">myfloat</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">mystr</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">&quot;is a decimal number&quot;</span> 
<span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;is not a decimal number&quot;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">myint</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">mystr</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">&quot;is an integer&quot;</span>
<span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;is not an integer&quot;</span>

<span class="c"># DON&#39;T DO THIS. Explicit checking is prone to errors:</span>
<span class="k">if</span> <span class="n">mystr</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>                         <span class="c"># Fails on &quot;+4&quot;</span>
    <span class="k">print</span> <span class="s">&#39;is a positive integer&#39;</span>   
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&#39;is not&#39;</span>

<span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;[+-]?\d+$&quot;</span><span class="p">,</span> <span class="n">mystr</span><span class="p">):</span>            <span class="c"># Fails on &quot;- 1&quot; </span>
    <span class="k">print</span> <span class="s">&#39;is an integer&#39;</span>           
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&#39;is not&#39;</span>

<span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;-?(?:\d+(?:\.\d*)?|\.\d+)$&quot;</span><span class="p">,</span> <span class="n">mystr</span><span class="p">):</span>  <span class="c"># Opaque, and fails on &quot;- 1&quot;</span>
    <span class="k">print</span> <span class="s">&#39;is a decimal number&#39;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&#39;is not&#39;</span>

<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN76"
>Comparing Floating-Point Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="c"># equal(num1, num2, accuracy) : returns true if num1 and num2 are</span>
<span class="c">#   equal to accuracy number of decimal places</span>

<span class="k">def</span> <span class="nf">equal</span><span class="p">(</span><span class="n">num1</span><span class="p">,</span> <span class="n">num2</span><span class="p">,</span> <span class="n">accuracy</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">num1</span> <span class="o">-</span> <span class="n">num2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="n">accuracy</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>  <span class="c"># use / for float div and // for int div</span>

<span class="n">wage</span> <span class="o">=</span> <span class="mi">536</span>                                      <span class="c"># $5.36/hour</span>
<span class="n">week</span> <span class="o">=</span> <span class="mi">40</span> <span class="o">*</span> <span class="n">wage</span>                                <span class="c"># $214.40</span>
<span class="k">print</span> <span class="s">&quot;One week&#39;s wage is: $</span><span class="si">%.2f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">week</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span>
<span class="c">#=&gt; One week&#39;s wage is: $214.40</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN79"
>Rounding Floating-Point Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="n">rounded</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>            <span class="c"># rounds to integer</span>
<span class="c">#-----------------------------</span>
<span class="n">a</span> <span class="o">=</span> <span class="mf">0.255</span>
<span class="n">b</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%.2f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">a</span>
<span class="k">print</span> <span class="s">&quot;Unrounded: </span><span class="si">%f</span><span class="se">\n</span><span class="s">Rounded: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;Unrounded: </span><span class="si">%f</span><span class="se">\n</span><span class="s">Rounded: </span><span class="si">%.2f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
<span class="c">#=&gt; Unrounded: 0.255000</span>
<span class="c">#=&gt; Rounded: 0.26</span>
<span class="c">#=&gt; Unrounded: 0.255000</span>
<span class="c">#=&gt; Rounded: 0.26</span>
<span class="c">#-----------------------------</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">floor</span><span class="p">,</span> <span class="n">ceil</span>

<span class="k">print</span> <span class="s">&quot;number</span><span class="se">\t</span><span class="s">int</span><span class="se">\t</span><span class="s">floor</span><span class="se">\t</span><span class="s">ceil&quot;</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.3</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">,</span> <span class="mf">3.7</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.3</span><span class="p">]</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;</span><span class="si">% .1f</span><span class="se">\t</span><span class="si">% .1f</span><span class="se">\t</span><span class="si">% .1f</span><span class="se">\t</span><span class="si">% .1f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">floor</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">ceil</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
<span class="c">#=&gt; number  int   floor ceil</span>
<span class="c">#=&gt;  3.3     3.0   3.0   4.0</span>
<span class="c">#=&gt;  3.5     3.0   3.0   4.0</span>
<span class="c">#=&gt;  3.7     3.0   3.0   4.0</span>
<span class="c">#=&gt; -3.3    -3.0  -4.0  -3.0</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN82"
>Converting Between Binary and Decimal</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="c"># To convert a string in any base up to base 36, use the optional arg to int():</span>
<span class="n">num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s">&#39;0110110&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>   <span class="c"># num is 54</span>

<span class="c"># To convert an int to an string representation in another base, you could use</span>
<span class="c"># &lt;http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/111286&gt;:</span>
<span class="kn">import</span> <span class="nn">baseconvert</span> 
<span class="k">def</span> <span class="nf">dec2bin</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">baseconvert</span><span class="o">.</span><span class="n">baseconvert</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">baseconvert</span><span class="o">.</span><span class="n">BASE10</span><span class="p">,</span> <span class="n">baseconvert</span><span class="o">.</span><span class="n">BASE2</span><span class="p">)</span>

<span class="n">binstr</span> <span class="o">=</span> <span class="n">dec2bin</span><span class="p">(</span><span class="mi">54</span><span class="p">)</span>      <span class="c"># binstr is 110110</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN85"
>Operating on a Series of Integers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
    <span class="k">pass</span> <span class="c"># i is set to every integer from x to y, excluding y</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">7</span><span class="p">):</span>
    <span class="k">pass</span> <span class="c"># i is set to every integer from x to y, stepsize = 7</span>

<span class="k">print</span> <span class="s">&quot;Infancy is:&quot;</span><span class="p">,</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">i</span><span class="p">,</span>
<span class="k">print</span>

<span class="k">print</span> <span class="s">&quot;Toddling is:&quot;</span><span class="p">,</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">i</span><span class="p">,</span>
<span class="k">print</span>

<span class="c"># DON&#39;T DO THIS:</span>
<span class="k">print</span> <span class="s">&quot;Childhood is:&quot;</span><span class="p">,</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">5</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">12</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">i</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="c">#=&gt; Infancy is: 0 1 2</span>
<span class="c">#=&gt; Toddling is: 3 4</span>
<span class="c">#=&gt; Childhood is: 5 6 7 8 9 10 11 12</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN88"
>Working with Roman Numerals</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="c"># See http://www.faqts.com/knowledge_base/view.phtml/aid/4442</span>
<span class="c"># for a module that does this</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN91"
>Generating Random Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="kn">import</span> <span class="nn">random</span>          <span class="c"># use help(random) to see the (large) list of funcs</span>

<span class="n">rand</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="n">rand</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">76</span><span class="p">)</span>
<span class="k">print</span> <span class="n">rand</span>
<span class="c">#-----------------------------</span>
<span class="n">elt</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">mylist</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="kn">import</span> <span class="nn">string</span>
<span class="n">chars</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">letters</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">digits</span> <span class="o">+</span> <span class="s">&quot;!@$%^&amp;*&quot;</span>
<span class="n">password</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">chars</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">)])</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN94"
>Generating Different Random Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="c"># Changes the default RNG</span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">()</span>

<span class="c"># Or you can create independent RNGs</span>
<span class="n">gen1</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">Random</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="n">gen2</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">Random</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="n">gen3</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">Random</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">a1</span><span class="p">,</span> <span class="n">b1</span> <span class="o">=</span> <span class="n">gen1</span><span class="o">.</span><span class="n">random</span><span class="p">(),</span> <span class="n">gen1</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
<span class="n">a2</span><span class="p">,</span> <span class="n">b2</span> <span class="o">=</span> <span class="n">gen2</span><span class="o">.</span><span class="n">random</span><span class="p">(),</span> <span class="n">gen2</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
<span class="n">a3</span><span class="p">,</span> <span class="n">b3</span> <span class="o">=</span> <span class="n">gen3</span><span class="o">.</span><span class="n">random</span><span class="p">(),</span> <span class="n">gen3</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
<span class="c"># a1 == a2 and b1 == b2</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN97"
>Making Numbers Even More Random</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="c"># see http://www.sbc.su.se/~per/crng/ or http://www.frohne.westhost.com/rv11reference.htm</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN100"
>Generating Biased Random Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="n">mean</span> <span class="o">=</span> <span class="mi">25</span>
<span class="n">sdev</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">salary</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">gauss</span><span class="p">(</span><span class="n">mean</span><span class="p">,</span> <span class="n">sdev</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;You have been hired at </span><span class="si">%.2f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">salary</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN103"
>Doing Trigonometry in Degrees, not Radians</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="n">radians</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">degrees</span><span class="p">)</span>
<span class="n">degrees</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">radians</span><span class="p">)</span>

<span class="c"># pre-2.3:</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="k">def</span> <span class="nf">deg2rad</span><span class="p">(</span><span class="n">degrees</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">degrees</span> <span class="o">/</span> <span class="mi">180</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span>
<span class="k">def</span> <span class="nf">rad2deg</span><span class="p">(</span><span class="n">radians</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">radians</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span> <span class="o">*</span> <span class="mi">180</span>
<span class="c">#-----------------------------</span>
<span class="c"># Use deg2rad instead of math.radians if you have pre-2.3 Python.</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="k">def</span> <span class="nf">degree_sine</span><span class="p">(</span><span class="n">degrees</span><span class="p">):</span>
    <span class="n">radians</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">degrees</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">radians</span><span class="p">)</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN106"
>Calculating More Trigonometric Functions</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="c"># DON&#39;T DO THIS.  Use math.tan() instead.</span>
<span class="k">def</span> <span class="nf">tan</span><span class="p">(</span><span class="n">theta</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="c">#----------------</span>
<span class="c"># NOTE: this sets y to 16331239353195370.0</span>
<span class="k">try</span><span class="p">:</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
  <span class="n">y</span> <span class="o">=</span> <span class="bp">None</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN109"
>Taking Logarithms</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="n">log_e</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">VALUE</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="n">log_10</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">VALUE</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="k">def</span> <span class="nf">log_base</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="c"># log_base defined as above</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">log_base</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;log10(10,000) =&quot;</span><span class="p">,</span> <span class="n">answer</span>
<span class="c">#=&gt; log10(10,000) = 4.0</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN112"
>Multiplying Matrices</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="c"># NOTE: must have NumPy installed.  See</span>
<span class="c">#   http://www.pfdubois.com/numpy/</span>

<span class="kn">import</span> <span class="nn">Numeric</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">Numeric</span><span class="o">.</span><span class="n">array</span><span class="p">(</span> <span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                    <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="p">),</span> <span class="s">&quot;d&quot;</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Numeric</span><span class="o">.</span><span class="n">array</span><span class="p">(</span> <span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                    <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                    <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="p">),</span> <span class="s">&quot;d&quot;</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">Numeric</span><span class="o">.</span><span class="n">matrixmultiply</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

<span class="k">print</span> <span class="n">c</span>
<span class="c">#=&gt; [[  54.   30.]</span>
<span class="c">#=&gt;  [ 165.   70.]]</span>

<span class="k">print</span> <span class="n">a</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">shape</span>
<span class="c">#=&gt; (2, 3) (3, 2) (2, 2)</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN115"
>Using Complex Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">3</span><span class="o">+</span><span class="mi">5j</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="o">-</span><span class="mi">2j</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
<span class="k">print</span> <span class="s">&quot;c =&quot;</span><span class="p">,</span> <span class="n">c</span>
<span class="c">#=&gt; c = (16+4j)</span>

<span class="k">print</span> <span class="n">c</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">conjugate</span><span class="p">()</span>
<span class="c">#=&gt; 16.0 4.0 (16-4j)</span>
<span class="c">#-----------------------------</span>
<span class="kn">import</span> <span class="nn">cmath</span>
<span class="k">print</span> <span class="n">cmath</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">3</span><span class="o">+</span><span class="mi">4j</span><span class="p">)</span>
<span class="c">#=&gt; (2+1j)</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN118"
>Converting Between Octal and Hexadecimal</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="n">number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">hexadecimal</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">octal</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">s</span> <span class="o">=</span> <span class="nb">hex</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
<span class="n">s</span> <span class="o">=</span> <span class="nb">oct</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>

<span class="n">num</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;Gimme a number in decimal, octal, or hex: &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
<span class="k">if</span> <span class="n">num</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&quot;0x&quot;</span><span class="p">):</span>
    <span class="n">num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="mi">2</span><span class="p">:],</span> <span class="mi">16</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">num</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&quot;0&quot;</span><span class="p">):</span>
    <span class="n">num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="mi">8</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="si">%(num)d</span><span class="s"> </span><span class="si">%(num)x</span><span class="s"> </span><span class="si">%(num)o</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">{</span> <span class="s">&quot;num&quot;</span><span class="p">:</span> <span class="n">num</span> <span class="p">}</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN121"
>Putting Commas in Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="k">def</span> <span class="nf">commify</span><span class="p">(</span><span class="n">amount</span><span class="p">):</span>
    <span class="n">amount</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>
    <span class="n">firstcomma</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span><span class="o">%</span><span class="mi">3</span> <span class="ow">or</span> <span class="mi">3</span>  <span class="c"># set to 3 if would make a leading comma</span>
    <span class="n">first</span><span class="p">,</span> <span class="n">rest</span> <span class="o">=</span> <span class="n">amount</span><span class="p">[:</span><span class="n">firstcomma</span><span class="p">],</span> <span class="n">amount</span><span class="p">[</span><span class="n">firstcomma</span><span class="p">:]</span>
    <span class="n">segments</span> <span class="o">=</span> <span class="p">[</span><span class="n">first</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">rest</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">rest</span><span class="p">),</span> <span class="mi">3</span><span class="p">)]</span>
    <span class="k">return</span> <span class="s">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">segments</span><span class="p">)</span>

<span class="k">print</span> <span class="n">commify</span><span class="p">(</span><span class="mi">12345678</span><span class="p">)</span> 
<span class="c">#=&gt; 12,345,678</span>

<span class="c"># DON&#39;T DO THIS. It works on 2.3+ only and is slower and less straightforward</span>
<span class="c"># than the non-regex version above.</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="k">def</span> <span class="nf">commify</span><span class="p">(</span><span class="n">amount</span><span class="p">):</span>
    <span class="n">amount</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>
    <span class="n">amount</span> <span class="o">=</span> <span class="n">amount</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">amount</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&quot;(\d\d\d)(?=\d)(?!\d*\.)&quot;</span><span class="p">,</span> <span class="s">r&quot;\1,&quot;</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">amount</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN124"
>Printing Correct Plurals</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c"># Printing Correct Plurals</span>
<span class="c">#-----------------------------</span>
<span class="k">def</span> <span class="nf">pluralise</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="n">singular</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">plural</span><span class="o">=</span><span class="s">&quot;s&quot;</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">root</span> <span class="o">+</span> <span class="n">singular</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">root</span> <span class="o">+</span> <span class="n">plural</span>

<span class="k">print</span> <span class="s">&quot;It took&quot;</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">pluralise</span><span class="p">(</span><span class="n">duration</span><span class="p">,</span> <span class="s">&#39;hour&#39;</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;</span><span class="si">%d</span><span class="s"> </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> enough.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">duration</span><span class="p">,</span> 
                            <span class="n">pluralise</span><span class="p">(</span><span class="n">duration</span><span class="p">,</span> <span class="s">&#39;hour&#39;</span><span class="p">),</span> 
                            <span class="n">pluralise</span><span class="p">(</span><span class="n">duration</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;is&#39;</span><span class="p">,</span> <span class="s">&#39;are&#39;</span><span class="p">))</span>
<span class="c">#-----------------------------</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="k">def</span> <span class="nf">noun_plural</span><span class="p">(</span><span class="n">word</span><span class="p">):</span>
    <span class="n">endings</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&quot;ss&quot;</span><span class="p">,</span> <span class="s">&quot;sses&quot;</span><span class="p">),</span>
               <span class="p">(</span><span class="s">&quot;([psc]h)&quot;</span><span class="p">,</span> <span class="s">r&quot;\1es&quot;</span><span class="p">),</span>
               <span class="p">(</span><span class="s">&quot;z&quot;</span><span class="p">,</span> <span class="s">&quot;zes&quot;</span><span class="p">),</span>
               <span class="p">(</span><span class="s">&quot;ff&quot;</span><span class="p">,</span> <span class="s">&quot;ffs&quot;</span><span class="p">),</span>
               <span class="p">(</span><span class="s">&quot;f&quot;</span><span class="p">,</span> <span class="s">&quot;ves&quot;</span><span class="p">),</span>
               <span class="p">(</span><span class="s">&quot;ey&quot;</span><span class="p">,</span> <span class="s">&quot;eys&quot;</span><span class="p">),</span>
               <span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">,</span> <span class="s">&quot;ies&quot;</span><span class="p">),</span>
               <span class="p">(</span><span class="s">&quot;ix&quot;</span><span class="p">,</span> <span class="s">&quot;ices&quot;</span><span class="p">),</span>
               <span class="p">(</span><span class="s">&quot;([sx])&quot;</span><span class="p">,</span> <span class="s">r&quot;\1es&quot;</span><span class="p">),</span>
               <span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;s&quot;</span><span class="p">)]</span>
    <span class="k">for</span> <span class="n">singular</span><span class="p">,</span> <span class="n">plural</span> <span class="ow">in</span> <span class="n">endings</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">,</span> <span class="n">found</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">subn</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">$&quot;</span><span class="o">%</span><span class="n">singular</span><span class="p">,</span> <span class="n">plural</span><span class="p">,</span> <span class="n">word</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">found</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ret</span>
    
<span class="n">verb_singular</span> <span class="o">=</span> <span class="n">noun_plural</span><span class="p">;</span>       <span class="c"># make function alias</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN127"
>Program: Calculating Prime Factors</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c"># Program: Calculating Prime Factors</span>
<span class="c">#-----------------------------</span>
<span class="c">#% bigfact 8 9 96 2178</span>
<span class="c">#8          2**3</span>
<span class="c">#</span>
<span class="c">#9          3**2</span>
<span class="c">#</span>
<span class="c">#96         2**5 3</span>
<span class="c">#</span>
<span class="c">#2178       2 3**2 11**2</span>
<span class="c">#-----------------------------</span>
<span class="c">#% bigfact 239322000000000000000000</span>
<span class="c">#239322000000000000000000 2**19 3 5**18 39887 </span>
<span class="c">#</span>
<span class="c">#</span>
<span class="c">#% bigfact 25000000000000000000000000</span>
<span class="c">#25000000000000000000000000 2**24 5**26</span>
<span class="c">#-----------------------------</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">factorise</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="n">factors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">orig</span> <span class="o">=</span> <span class="n">num</span>
    <span class="k">print</span> <span class="n">num</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span>

    <span class="c"># we take advantage of the fact that (i +1)**2 = i**2 + 2*i +1</span>
    <span class="n">i</span><span class="p">,</span> <span class="n">sqi</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span>
    <span class="k">while</span> <span class="n">sqi</span> <span class="o">&lt;=</span> <span class="n">num</span><span class="p">:</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">num</span><span class="o">%</span><span class="n">i</span><span class="p">:</span>
            <span class="n">num</span> <span class="o">/=</span> <span class="n">i</span>
            <span class="n">factors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">factors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="n">sqi</span> <span class="o">+=</span> <span class="mi">2</span><span class="o">*</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">num</span> <span class="o">!=</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">!=</span> <span class="n">orig</span><span class="p">:</span>
        <span class="n">factors</span><span class="p">[</span><span class="n">num</span><span class="p">]</span> <span class="o">=</span> <span class="n">factors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">factors</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;PRIME&quot;</span>

    <span class="k">for</span> <span class="n">factor</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">factors</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">factor</span><span class="p">:</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">factor</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">factors</span><span class="p">[</span><span class="n">factor</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span> <span class="n">tmp</span> <span class="o">+=</span> <span class="s">&quot;**&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">factors</span><span class="p">[</span><span class="n">factor</span><span class="p">])</span>
            <span class="k">print</span> <span class="n">tmp</span><span class="p">,</span>
    <span class="k">print</span>
    
<span class="c">#--------</span>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Usage:&quot;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&quot; number [number, ]&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">strnum</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">strnum</span><span class="p">)</span>
                <span class="n">factorise</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">print</span> <span class="n">strnum</span><span class="p">,</span> <span class="s">&quot;is not an integer&quot;</span>
<span class="c">#-----------------------------</span>
<span class="c"># A more Pythonic variant (which separates calculation from printing):</span>
<span class="k">def</span> <span class="nf">format_factor</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">exponent</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">exponent</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">**</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">exponent</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">factorise</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="n">factors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">orig</span> <span class="o">=</span> <span class="n">num</span>

    <span class="c"># we take advantage of the fact that (i+1)**2 = i**2 + 2*i +1</span>
    <span class="n">i</span><span class="p">,</span> <span class="n">sqi</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span>
    <span class="k">while</span> <span class="n">sqi</span> <span class="o">&lt;=</span> <span class="n">num</span><span class="p">:</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">num</span><span class="o">%</span><span class="n">i</span><span class="p">:</span>
            <span class="n">num</span> <span class="o">/=</span> <span class="n">i</span>
            <span class="n">factors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">factors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">sqi</span> <span class="o">+=</span> <span class="mi">2</span><span class="o">*</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">num</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">orig</span><span class="p">):</span>
        <span class="n">factors</span><span class="p">[</span><span class="n">num</span><span class="p">]</span> <span class="o">=</span> <span class="n">factors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">factors</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s">&quot;PRIME&quot;</span><span class="p">]</span>

    <span class="n">out</span> <span class="o">=</span> <span class="p">[</span><span class="n">format_factor</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">exponent</span><span class="p">)</span>
           <span class="k">for</span> <span class="n">base</span><span class="p">,</span> <span class="n">exponent</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">factors</span><span class="o">.</span><span class="n">items</span><span class="p">())]</span>
    <span class="k">return</span> <span class="n">out</span>

<span class="k">def</span> <span class="nf">print_factors</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">num</span> <span class="o">!=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Can only factorise an integer&quot;</span><span class="p">)</span>
    <span class="n">factors</span> <span class="o">=</span> <span class="n">factorise</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> 
    <span class="k">print</span> <span class="n">num</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">factors</span><span class="p">)</span></PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="strings.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="datesandtimes.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Strings</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Dates and Times</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>