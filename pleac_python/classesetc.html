<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Classes, Objects, and Ties</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="PLEAC-Python"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Packages, Libraries, and Modules"
HREF="packagesetc.html"><LINK
REL="NEXT"
TITLE="Database Access"
HREF="dbaccess.html"><style type="text/css">td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
pre { line-height: 125%; }

  </style></head
><BODY TEXT="#cecece" BGCOLOR="#4f6f6f" LINK="#f5deb3" VLINK="#d5ae83"
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PLEAC-Python</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="packagesetc.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="dbaccess.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="CLASSESETC"
>13. Classes, Objects, and Ties</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN704"
>Introduction</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="c"># Inside a module named &#39;Data&#39; / file named &#39;Data.py&#39;</span>
<span class="k">class</span> <span class="nc">Encoder</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>
<span class="c">#-----------------------------</span>
<span class="n">obj</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="k">print</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span> <span class="nb">id</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span> <span class="n">ob</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c">## Changing the class of builtin types is not supported</span>
<span class="c">## in Python.</span>

<span class="c">#-----------------------------</span>
<span class="n">obj</span><span class="o">.</span><span class="n">Stomach</span> <span class="o">=</span> <span class="s">&quot;Empty&quot;</span>    <span class="c"># directly accessing an object&#39;s contents</span>
<span class="n">obj</span><span class="o">.</span><span class="n">NAME</span> <span class="o">=</span> <span class="s">&quot;Thag&quot;</span>        <span class="c"># uppercase field name to make it stand out</span>
<span class="p">(</span><span class="n">optional</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="n">encoded</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&quot;data&quot;</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="n">encoded</span> <span class="o">=</span> <span class="n">Data</span><span class="o">.</span><span class="n">Encoder</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&quot;data&quot;</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="k">class</span> <span class="nc">Class</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
<span class="c">#-----------------------------</span>
<span class="nb">object</span> <span class="o">=</span> <span class="n">Class</span><span class="p">()</span>
<span class="c">#-----------------------------</span>
<span class="k">class</span> <span class="nc">Class</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">class_only_method</span><span class="p">():</span>
        <span class="k">pass</span> <span class="c"># more code here</span>
    <span class="n">class_only_method</span> <span class="o">=</span> <span class="nb">staticmethod</span><span class="p">(</span><span class="n">class_only_method</span><span class="p">)</span>

<span class="c">#-----------------------------</span>
<span class="k">class</span> <span class="nc">Class</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">instance_only_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span> <span class="c"># more code here</span>
<span class="c">#-----------------------------</span>
<span class="n">lector</span> <span class="o">=</span> <span class="n">Human</span><span class="o">.</span><span class="n">Cannibal</span><span class="p">()</span>
<span class="n">lector</span><span class="o">.</span><span class="n">feed</span><span class="p">(</span><span class="s">&quot;Zak&quot;</span><span class="p">)</span>
<span class="n">lector</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="s">&quot;New York&quot;</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="c"># NOTE: it is rare to use these forms except inside of</span>
<span class="c"># methods to call specific methods from a parent class</span>
<span class="n">lector</span> <span class="o">=</span> <span class="n">Human</span><span class="o">.</span><span class="n">Cannibal</span><span class="p">()</span>
<span class="n">Human</span><span class="o">.</span><span class="n">Cannibal</span><span class="o">.</span><span class="n">feed</span><span class="p">(</span><span class="n">lector</span><span class="p">,</span> <span class="s">&quot;Zak&quot;</span><span class="p">)</span>
<span class="n">Human</span><span class="o">.</span><span class="n">Cannibal</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">lector</span><span class="p">,</span> <span class="s">&quot;New York&quot;</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="k">print</span><span class="o">&gt;&gt;</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;stuff here</span><span class="se">\n</span><span class="s">&quot;</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN707"
>Constructing an Object</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="k">class</span> <span class="nc">Class</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>
<span class="c">#-----------------------------</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="k">class</span> <span class="nc">Class</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>  <span class="c"># init data fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c">#-----------------------------</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="k">class</span> <span class="nc">Class</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c"># Sets self.start to the current time, and self.age to 0.  If called</span>
        <span class="c"># with arguments, interpret them as key+value pairs to</span>
        <span class="c"># initialize the object with</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN710"
>Destroying an Object</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="k">class</span> <span class="nc">Class</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&quot;dying at&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">ctime</span><span class="p">()</span>
<span class="c">#-----------------------------</span>
<span class="c">## Why is the perl code introducing a cycle?  I guess it&#39;s an</span>
<span class="c">## example of how to keep from calling the finalizer</span>
<span class="bp">self</span><span class="o">.</span><span class="n">WHATEVER</span> <span class="o">=</span> <span class="bp">self</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN713"
>Managing Instance Data</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="c"># It is standard practice to access attributes directly:</span>
<span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;default&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bob&quot;</span>
<span class="k">print</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span>
<span class="n">obj</span><span class="o">.</span><span class="n">age</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="c"># If you later find that you need to compute an attribute, you can always </span>
<span class="c"># retrofit a property(), leaving user code untouched:</span>
<span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="s">&quot;default&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_age</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
    <span class="k">def</span> <span class="nf">set_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>
    <span class="n">name</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_name</span><span class="p">,</span> <span class="n">set_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_age</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_age</span>
    <span class="k">def</span> <span class="nf">set_age</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Invalid age: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">val</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_age</span> <span class="o">=</span> <span class="n">val</span>
    <span class="n">age</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_age</span><span class="p">,</span> <span class="n">set_age</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bob&quot;</span>
<span class="k">print</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span>
<span class="n">obj</span><span class="o">.</span><span class="n">age</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="c"># DON&#39;T DO THIS - explicit getters and setters should not be used:</span>
<span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;default&quot;</span>
    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
    <span class="k">def</span> <span class="nf">set_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">set_name</span><span class="p">(</span><span class="s">&quot;bob&quot;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">obj</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
<span class="c">#-----------------------------</span>
<span class="c">## DON&#39;T DO THIS (It&#39;s complex, ugly, and unnecessary):</span>
<span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;name only takes 0 or 1 arguments&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">age</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">prev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span>
        <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">prev</span>

<span class="c"># sample call of get and set: happy birthday!</span>
<span class="n">obj</span><span class="o">.</span><span class="n">age</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">obj</span><span class="o">.</span><span class="n">age</span><span class="p">())</span>

<span class="c">#-----------------------------</span>
<span class="n">him</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
<span class="n">him</span><span class="o">.</span><span class="n">NAME</span> <span class="o">=</span> <span class="s">&quot;Sylvester&quot;</span>
<span class="n">him</span><span class="o">.</span><span class="n">AGE</span> <span class="o">=</span> <span class="mi">23</span>
<span class="c">#-----------------------------</span>
<span class="c"># Here&#39;s another way to implement the &#39;obj.method()&#39; is a getter</span>
<span class="c"># and &#39;obj.method(value)&#39; is a settor.  Again, this is not a</span>
<span class="c"># common Python idiom and should not be used.  See below for a</span>
<span class="c"># more common way to do parameter checking of attribute assignment.</span>

<span class="kn">import</span> <span class="nn">re</span><span class="o">,</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">carp</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;WARNING: &quot;</span> <span class="o">+</span> <span class="n">s</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Class</span><span class="p">:</span>
    <span class="n">no_name</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">no_name</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="n">Class</span><span class="o">.</span><span class="n">no_name</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">NAME</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enforce_name_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">NAME</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_enforce_name_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;[^\s\w&#39;-]&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="n">carp</span><span class="p">(</span><span class="s">&quot;funny characters in name&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\d&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="n">carp</span><span class="p">(</span><span class="s">&quot;numbers in name&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\S+(\s+\S+)+&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="n">carp</span><span class="p">(</span><span class="s">&quot;prefer multiword name&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\S&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="n">carp</span><span class="p">(</span><span class="s">&quot;name is blank&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>   <span class="c"># enforce capitalization</span>
<span class="c">#-----------------------------</span>
<span class="c"># A more typical way to enforce restrictions on a value</span>
<span class="c"># to set</span>
<span class="k">class</span> <span class="nc">Class</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s">&quot;name&quot;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enforce_name_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>  <span class="c"># Do any conversions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>  <span class="c"># Do the default __setattr__ action</span>

    <span class="k">def</span> <span class="nf">_enforce_name_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;[^\s\w&#39;-]&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="n">carp</span><span class="p">(</span><span class="s">&quot;funny characters in name&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\d&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="n">carp</span><span class="p">(</span><span class="s">&quot;numbers in name&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\S+(\s+\S+)+&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="n">carp</span><span class="p">(</span><span class="s">&quot;prefer multiword name&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\S&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="n">carp</span><span class="p">(</span><span class="s">&quot;name is blank&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>   <span class="c"># enforce capitalization</span>

<span class="c">#-----------------------------</span>
<span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">age</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">peers</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">peers</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="n">peers</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c"># See Python FAQ 6.25</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">peers</span> <span class="o">=</span> <span class="n">peers</span>

    <span class="k">def</span> <span class="nf">exclaim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;Hi, I&#39;m </span><span class="si">%s</span><span class="s">, age </span><span class="si">%d</span><span class="s">, working with </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> \
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span><span class="p">,</span> <span class="s">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">peers</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">happy_birthday</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN716"
>Managing Class Data</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="c">## In the module named &#39;Person&#39; ...</span>
<span class="k">def</span> <span class="nf">population</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">Person</span><span class="o">.</span><span class="n">body_count</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">body_count</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>        <span class="c"># class variable - shared across all instances</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">body_count</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>      <span class="c"># Beware - may be non-deterministic (Jython)!</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">body_count</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>

<span class="c"># later, the user can say this:</span>
<span class="kn">import</span> <span class="nn">Person</span>
<span class="n">people</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">people</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Person</span><span class="o">.</span><span class="n">Person</span><span class="p">())</span>
<span class="k">print</span> <span class="s">&quot;There are&quot;</span><span class="p">,</span> <span class="n">Person</span><span class="o">.</span><span class="n">population</span><span class="p">(),</span> <span class="s">&quot;people alive.&quot;</span>

<span class="c">#=&gt; There are 10 people alive.</span>
<span class="c">#-----------------------------</span>
<span class="n">him</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
<span class="n">him</span><span class="o">.</span><span class="n">gender</span> <span class="o">=</span> <span class="s">&quot;male&quot;</span>

<span class="n">her</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
<span class="n">her</span><span class="o">.</span><span class="n">gender</span> <span class="o">=</span> <span class="s">&quot;female&quot;</span>

<span class="c">#-----------------------------</span>
<span class="n">FixedArray</span><span class="o">.</span><span class="n">max_bounds</span> <span class="o">=</span> <span class="mi">100</span>                <span class="c"># set for whole class</span>
<span class="n">alpha</span> <span class="o">=</span> <span class="n">FixedArray</span><span class="o">.</span><span class="n">FixedArray</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;Bound on alpha is&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">.</span><span class="n">max_bounds</span>
<span class="c">#=&gt;100</span>

<span class="n">beta</span> <span class="o">=</span> <span class="n">FixedArray</span><span class="o">.</span><span class="n">FixedArray</span><span class="p">()</span>
<span class="n">beta</span><span class="o">.</span><span class="n">max_bounds</span> <span class="o">=</span> <span class="mi">50</span>                      <span class="c"># still sets for whole class</span>
<span class="k">print</span> <span class="s">&quot;Bound on alpha is&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">.</span><span class="n">max_bounds</span>
<span class="c">#=&gt;50</span>
<span class="c">#-----------------------------</span>
<span class="c"># In the module named &#39;FixedArray&#39;</span>

<span class="k">class</span> <span class="nc">FixedArray</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">_max_bounds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">]</span>        <span class="c"># Shared across whole class</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">bounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">max_bounds</span> <span class="o">=</span> <span class="n">bounds</span>

    <span class="k">def</span> <span class="nf">get_max_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">def</span> <span class="nf">set_max_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
    <span class="n">max_bounds</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_max_bounds</span><span class="p">,</span> <span class="n">set_max_bounds</span><span class="p">)</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN719"
>Using Classes as Structs</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="c"># There isn&#39;t the severe separation between scalar, arrays and hashs</span>
<span class="c"># in Python, so there isn&#39;t a direct equivalent to the Perl code.</span>
<span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">peers</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">peers</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> 
            <span class="n">peers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">peers</span> <span class="o">=</span> <span class="n">peers</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="s">&quot;Jason Smythe&quot;</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;Wilbur&quot;</span><span class="p">,</span> <span class="s">&quot;Ralph&quot;</span><span class="p">,</span> <span class="s">&quot;Fred&quot;</span><span class="p">])</span>

<span class="c"># or this way.  (This is not the prefered style as objects should</span>
<span class="c"># be constructed with all the appropriate data, if possible.)</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>  <span class="c"># allocate an empty Person</span>
<span class="n">p</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Jason Smythe&quot;</span>                         <span class="c"># set its name field</span>
<span class="n">p</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">13</span>                                      <span class="c"># set its age field</span>
<span class="n">p</span><span class="o">.</span><span class="n">peers</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span> <span class="p">[</span><span class="s">&quot;Wilbur&quot;</span><span class="p">,</span> <span class="s">&quot;Ralph&quot;</span><span class="p">,</span> <span class="s">&quot;Fred&quot;</span> <span class="p">]</span> <span class="p">)</span>  <span class="c"># set its peers field</span>

<span class="n">p</span><span class="o">.</span><span class="n">peers</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;Wilbur&quot;</span><span class="p">,</span> <span class="s">&quot;Ralph&quot;</span><span class="p">,</span> <span class="s">&quot;Fred&quot;</span><span class="p">]</span>

<span class="n">p</span><span class="o">.</span><span class="n">peers</span><span class="p">[:]</span><span class="o">=</span> <span class="p">[</span><span class="s">&quot;Wilbur&quot;</span><span class="p">,</span> <span class="s">&quot;Ralph&quot;</span><span class="p">,</span> <span class="s">&quot;Fred&quot;</span><span class="p">]</span>

<span class="c"># fetch various values, including the zeroth friend</span>
<span class="k">print</span> <span class="s">&quot;At age </span><span class="si">%d</span><span class="s">, </span><span class="si">%s</span><span class="s">&#39;s first friend is </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> \
    <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">age</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">peers</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="c">#-----------------------------</span>
<span class="c"># This isn&#39;t very Pythonic - should create objects with the</span>
<span class="c"># needed data, and not depend on defaults and modifing the object.</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="k">def</span> <span class="nf">carp</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;WARNING: &quot;</span> <span class="o">+</span> <span class="n">s</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
    <span class="k">def</span> <span class="nf">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s">&quot;age&quot;</span><span class="p">:</span>
            <span class="c"># This is very unpythonic</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="mi">0</span><span class="p">)):</span>
                <span class="n">carp</span><span class="p">(</span><span class="s">&quot;age &#39;</span><span class="si">%s</span><span class="s">&#39; isn&#39;t numeric&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">value</span><span class="p">,))</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">150</span><span class="p">:</span> <span class="n">carp</span><span class="p">(</span><span class="s">&quot;age &#39;</span><span class="si">%s</span><span class="s">&#39; is unreasonable&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">value</span><span class="p">,))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

<span class="k">class</span> <span class="nc">Family</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">head</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">address</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">members</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">members</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="n">members</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">=</span> <span class="n">head</span> <span class="ow">or</span> <span class="n">Person</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="n">address</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">members</span> <span class="o">=</span> <span class="n">members</span>

<span class="n">folks</span> <span class="o">=</span> <span class="n">Family</span><span class="p">()</span>

<span class="n">dad</span> <span class="o">=</span> <span class="n">folks</span><span class="o">.</span><span class="n">head</span>
<span class="n">dad</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;John&quot;</span>
<span class="n">dad</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">34</span>

<span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">&#39;s age is </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">folks</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">folks</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">age</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="k">class</span> <span class="nc">Card</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">cost</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="nb">type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">release</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cost</span> <span class="o">=</span> <span class="n">cost</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">release</span> <span class="o">=</span> <span class="n">release</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">type</span>
<span class="c">#-----------------------------</span>
<span class="c"># For positional args</span>
<span class="k">class</span> <span class="nc">Card</span><span class="p">:</span>
    <span class="n">_names</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="s">&quot;color&quot;</span><span class="p">,</span> <span class="s">&quot;cost&quot;</span><span class="p">,</span> <span class="s">&quot;type&quot;</span><span class="p">,</span> <span class="s">&quot;release&quot;</span><span class="p">,</span> <span class="s">&quot;type&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="c"># For keyword args</span>
<span class="k">class</span> <span class="nc">Card</span><span class="p">:</span>
    <span class="n">_names</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="s">&quot;color&quot;</span><span class="p">,</span> <span class="s">&quot;cost&quot;</span><span class="p">,</span> <span class="s">&quot;type&quot;</span><span class="p">,</span> <span class="s">&quot;release&quot;</span><span class="p">,</span> <span class="s">&quot;type&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="p">:</span>  <span class="c"># Set the defaults</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c"># add in the kwargs</span>
            <span class="k">assert</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="p">,</span> <span class="s">&quot;Unexpected kwarg: &quot;</span> <span class="o">+</span> <span class="n">k</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="k">class</span> <span class="nc">hostent</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">addr_list</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">length</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">addrtype</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">aliases</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addr_list</span> <span class="o">=</span> <span class="n">addr_list</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">length</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addrtype</span> <span class="o">=</span> <span class="n">addrtype</span> <span class="ow">or</span> <span class="s">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aliases</span> <span class="o">=</span> <span class="n">aliases</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="ow">or</span> <span class="s">&quot;&quot;</span>
<span class="c">#-----------------------------</span>
<span class="c">## XXX What do I do with these?</span>
<span class="c">#define h_type h_addrtype</span>
<span class="c">#define h_addr h_addr_list[0]</span>
<span class="c">#-----------------------------</span>
<span class="c"># make (hostent object)-&gt;type() same as (hostent object)-&gt;addrtype()</span>
<span class="c">#</span>
<span class="c"># *hostent::type = \&amp;hostent::addrtype;</span>
<span class="c">#</span>
<span class="c"># # make (hostenv object)-&gt;</span>
<span class="c"># addr()</span>
<span class="c">#  same as (hostenv object)-&gt;addr_list(0)</span>
<span class="c">#sub hostent::addr { shift-&gt;addr_list(0,@_) }</span>
<span class="c">#-----------------------------</span>
<span class="c"># No equivalent to Net::hostent (Python uses an unnamed tuple)</span>
<span class="c">#package Extra::hostent;</span>
<span class="c">#use Net::hostent;</span>
<span class="c">#@ISA = qw(hostent);</span>
<span class="c">#sub addr { shift-&gt;addr_list(0,@_) }</span>
<span class="c">#1;</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN722"
>Cloning Objects</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="k">class</span> <span class="nc">Class</span><span class="p">(</span><span class="n">Parent</span><span class="p">):</span>
    <span class="k">pass</span>
<span class="c">#-----------------------------</span>
<span class="c">## Note: this is unusual in Python code</span>
<span class="n">ob1</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
<span class="c"># later on</span>
<span class="n">ob2</span> <span class="o">=</span> <span class="n">ob1</span><span class="o">.</span><span class="n">__class__</span><span class="p">()</span>
<span class="c">#-----------------------------</span>
<span class="c">## Note: this is unusual in Python code</span>
<span class="n">ob1</span> <span class="o">=</span> <span class="n">Widget</span><span class="p">()</span>
<span class="n">ob2</span> <span class="o">=</span> <span class="n">ob1</span><span class="o">.</span><span class="n">__class__</span><span class="p">()</span>
<span class="c">#-----------------------------</span>
<span class="c"># XXX I do not know the intent of the original Perl code</span>
<span class="c"># Do not use this style of programming in Python.</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">possible</span><span class="p">,</span><span class="n">base</span><span class="p">,</span><span class="n">classes</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c"># Call the parents&#39; constructors, if there are any</span>
        <span class="k">for</span> <span class="n">baseclass</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__bases__</span><span class="p">:</span>
            <span class="n">init</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">baseclass</span><span class="p">,</span> <span class="s">&quot;__init__&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">init</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">PARENT</span> <span class="o">=</span> <span class="n">parent</span>      <span class="c"># init data fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">START</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">AGE</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN725"
>Calling Methods Indirectly</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="n">methname</span> <span class="o">=</span> <span class="s">&quot;flicker&quot;</span>
<span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">methname</span><span class="p">)(</span><span class="mi">10</span><span class="p">)</span>    <span class="c"># calls obj-&gt;flicker(10);</span>

<span class="c"># call three methods on the object, by name</span>
<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;start&quot;</span><span class="p">,</span> <span class="s">&quot;run&quot;</span><span class="p">,</span> <span class="s">&quot;stop&quot;</span><span class="p">):</span>
    <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">m</span><span class="p">)()</span>
<span class="c">#-----------------------------</span>
<span class="n">methods</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="s">&quot;rank&quot;</span><span class="p">,</span> <span class="s">&quot;serno&quot;</span><span class="p">)</span>
<span class="n">his_info</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">methods</span><span class="p">:</span>
   <span class="n">his_info</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">ob</span><span class="p">,</span> <span class="n">m</span><span class="p">)()</span>

<span class="c"># same as this:</span>

<span class="n">his_info</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="n">ob</span><span class="o">.</span><span class="n">name</span><span class="p">(),</span>
    <span class="s">&#39;rank&#39;</span><span class="p">:</span> <span class="n">ob</span><span class="o">.</span><span class="n">rank</span><span class="p">(),</span>
    <span class="s">&#39;serno&#39;</span><span class="p">:</span> <span class="n">ob</span><span class="o">.</span><span class="n">serno</span><span class="p">(),</span>
<span class="p">}</span>
<span class="c">#-----------------------------</span>
<span class="n">fnref</span> <span class="o">=</span> <span class="n">ob</span><span class="o">.</span><span class="n">method</span>
<span class="c">#-----------------------------</span>
<span class="n">fnref</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s">&quot;fred&quot;</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="n">obj</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s">&quot;fred&quot;</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="c"># XXX Not sure if this is the correct translation.</span>
<span class="c"># XXX Is &#39;can&#39; special?</span>
<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj_target</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">__class__</span><span class="p">):</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">can</span><span class="p">(</span><span class="s">&#39;method_name&#39;</span><span class="p">)(</span><span class="n">obj_target</span><span class="p">,</span> <span class="o">*</span><span class="n">arguments</span><span class="p">)</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN728"
>Determining Subclass Membership</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">mimetools</span><span class="o">.</span><span class="n">Message</span><span class="p">)</span>
<span class="nb">issubclass</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">mimetools</span><span class="o">.</span><span class="n">Message</span><span class="p">)</span>

<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">&quot;method_name&quot;</span><span class="p">):</span>  <span class="c"># check method validity</span>
    <span class="k">pass</span>
<span class="c">#-----------------------------</span>
<span class="c">## Explicit type checking is needed fewer times than you think.</span>
<span class="n">his_print_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">&quot;as_string&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">Some_Module</span><span class="o">.</span><span class="n">__version__</span>

<span class="c"># Almost never used, and doesn&#39;t work for builtin types, which don&#39;t</span>
<span class="c"># have a __module__.</span>

<span class="n">his_vers</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">__module__</span><span class="o">.</span><span class="n">__version__</span>
<span class="c">#-----------------------------</span>
<span class="k">if</span> <span class="n">Some_Module</span><span class="o">.</span><span class="n">__version__</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
  <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="s">&quot;Some_Module version </span><span class="si">%s</span><span class="s"> is too old, expected (3, 0)&quot;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">Some_Module</span><span class="o">.</span><span class="n">__version__</span><span class="p">,))</span>
<span class="c"># or more simply</span>
<span class="k">assert</span> <span class="n">Some_Module</span><span class="o">.</span><span class="n">__version__</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s">&quot;version too old&quot;</span>

<span class="c">#-----------------------------</span>
<span class="n">__VERSION__</span> <span class="o">=</span> <span class="s">&#39;1.01&#39;</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN731"
>Writing an Inheritable Class</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="c"># Note: This uses the standard Python idiom of accessing the</span>
<span class="c"># attributes directly rather than going through a method call.</span>
<span class="c"># See earlier in this chapter for examples of how this does</span>
<span class="c"># not break encapsulation.</span>
<span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
<span class="c">#-----------------------------</span>
<span class="c"># Prefered: dude = Person(&quot;Jason&quot;, 23)</span>
<span class="n">dude</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
<span class="n">dude</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Jason&quot;</span>
<span class="n">dude</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">23</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> is age </span><span class="si">%d</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dude</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">dude</span><span class="o">.</span><span class="n">age</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="k">class</span> <span class="nc">Employee</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="k">pass</span>
<span class="c">#-----------------------------</span>
<span class="c"># Prefered: empl = Employee(&quot;Jason&quot;, 23)</span>
<span class="n">emp</span> <span class="o">=</span> <span class="n">Employee</span><span class="p">()</span>
<span class="n">empl</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Jason&quot;</span>
<span class="n">empl</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">23</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> is age </span><span class="si">%d</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">empl</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">empl</span><span class="o">.</span><span class="n">age</span><span class="p">)</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN734"
>Accessing Overridden Methods</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="c"># This doesn&#39;t need to be done since if &#39;method&#39; doesn&#39;t</span>
<span class="c"># exist in the Class it will be looked for in its BaseClass(es)</span>
<span class="k">class</span> <span class="nc">Class</span><span class="p">(</span><span class="n">BaseClass</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">BaseClass</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="c"># This lets you pick the specific method in one of the base classes</span>
<span class="k">class</span> <span class="nc">Class</span><span class="p">(</span><span class="n">BaseClass1</span><span class="p">,</span> <span class="n">BaseClass2</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">BaseClass2</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="c"># This looks for the first method in the base class(es) without</span>
<span class="c"># specifically knowing which base class.  This reimplements</span>
<span class="c"># the default action so isn&#39;t really needed.</span>
<span class="k">class</span> <span class="nc">Class</span><span class="p">(</span><span class="n">BaseClass1</span><span class="p">,</span> <span class="n">BaseClass2</span><span class="p">,</span> <span class="n">BaseClass3</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">baseclass</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__bases__</span><span class="p">:</span>
            <span class="n">f</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">baseclass</span><span class="p">,</span> <span class="s">&quot;method&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">f</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s">&quot;method&quot;</span><span class="p">)</span>

<span class="c">#-----------------------------</span>
<span class="bp">self</span><span class="o">.</span><span class="n">meth</span><span class="p">()</span>   <span class="c"># Call wherever first meth is found</span>

<span class="n">Where</span><span class="o">.</span><span class="n">meth</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c"># Call in the base class &quot;Where&quot;</span>

<span class="c"># XXX Does Perl only have single inheritence?  Or does</span>
<span class="c"># it check all base classes?  No directly equivalent way</span>
<span class="c"># to do this in Python, but see above.</span>
<span class="c">#-----------------------------</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c"># The Perl code calls a private &#39;_init&#39; function, but in</span>
<span class="c"># Python there&#39;s need for the complexity of &#39;new&#39; mechanism</span>
<span class="c"># so it&#39;s best just to put the &#39;_init&#39; code in &#39;__init__&#39;.</span>
<span class="k">class</span> <span class="nc">Class</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="c"># init data fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">START</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">AGE</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EXTRA</span> <span class="o">=</span> <span class="n">args</span>          <span class="c"># anything extra</span>
<span class="c">#-----------------------------</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">Widget</span><span class="p">(</span><span class="n">haircolor</span> <span class="o">=</span> <span class="s">&quot;red&quot;</span><span class="p">,</span> <span class="n">freckles</span> <span class="o">=</span> <span class="mi">121</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="k">class</span> <span class="nc">Class</span><span class="p">(</span><span class="n">Base1</span><span class="p">,</span> <span class="n">Base2</span><span class="p">,</span> <span class="n">Base3</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">base</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__bases__</span><span class="p">:</span>
            <span class="n">f</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="s">&quot;__init__&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">f</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN737"
>Generating Attribute Methods Using AUTOLOAD</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="c"># NOTE: Python prefers direct attribute lookup rather than</span>
<span class="c"># method calls.  Python 2.2 will introduce a &#39;get_set&#39; which</span>
<span class="c"># *may* be equivalent, but I don&#39;t know enough about it.  So</span>
<span class="c"># instead I&#39;ll describe a class that lets you restrict access</span>
<span class="c"># to only specific attributes.</span>

<span class="k">class</span> <span class="nc">Private</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__names</span> <span class="o">=</span> <span class="n">names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__data</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">def</span> <span class="nf">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__names</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__data</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&quot;_Private&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__names</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__data</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">return</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;cannot set the attribute </span><span class="si">%r</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,))</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Private</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
        <span class="n">Private</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="s">&quot;age&quot;</span><span class="p">,</span> <span class="s">&quot;peers&quot;</span><span class="p">,</span> <span class="s">&quot;parent&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
    <span class="k">def</span> <span class="nf">new_child</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Person</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<span class="c">#-----------------------------</span>
<span class="n">dad</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
<span class="n">dad</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Jason&quot;</span>
<span class="n">dad</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">23</span>
<span class="n">kid</span> <span class="o">=</span> <span class="n">dad</span><span class="o">.</span><span class="n">new_child</span><span class="p">()</span>
<span class="n">kid</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Rachel&quot;</span>
<span class="n">kid</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">2</span>
<span class="k">print</span> <span class="s">&quot;Kid&#39;s parent is&quot;</span><span class="p">,</span> <span class="n">kid</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span>
<span class="c">#=&gt;Kid&#39;s parent is Jason</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN740"
>Solving the Data Inheritance Problem</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="c">## XXX No clue on what this does.  For that matter, what&#39;s</span>
<span class="c">## &quot;The Data Inheritance Problem&quot;?</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN743"
>Coping with Circular Data Structures</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="n">node</span><span class="o">.</span><span class="n">NEXT</span> <span class="o">=</span> <span class="n">node</span>
<span class="c">#-----------------------------</span>
<span class="c"># This is not a faithful copy of the Perl code, but it does</span>
<span class="c"># show how to have the container&#39;s __del__ remove cycles in</span>
<span class="c"># its contents.  Note that Python 2.0 includes a garbage</span>
<span class="c"># collector that is able to remove these sorts of cycles, but</span>
<span class="c"># it&#39;s still best to prevent cycles in your code.</span>
<span class="k">class</span> <span class="nc">Node</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prev</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

<span class="k">class</span> <span class="nc">Ring</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ring</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Helpful when debugging, to print the contents of the ring</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;#</span><span class="si">%d</span><span class="s">: &quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ring</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">s</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">next</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">ring</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">s</span> <span class="o">+</span> <span class="s">&quot; -&gt; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span> <span class="o">+</span> <span class="s">&quot; -&gt;&quot;</span>

    <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ring</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">value</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">node</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">next</span>
            <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">ring</span><span class="p">:</span>
                <span class="k">break</span>

    <span class="k">def</span> <span class="nf">insert_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ring</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">node</span><span class="o">.</span><span class="n">prev</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ring</span><span class="o">.</span><span class="n">prev</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ring</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ring</span><span class="o">.</span><span class="n">prev</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ring</span><span class="o">.</span><span class="n">prev</span> <span class="o">=</span> <span class="n">node</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ring</span> <span class="o">=</span> <span class="n">node</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">delete_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">delete_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="n">node</span><span class="o">.</span><span class="n">next</span><span class="p">:</span>
            <span class="n">node</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">prev</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ring</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">node</span><span class="o">.</span><span class="n">prev</span><span class="o">.</span><span class="n">next</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">next</span><span class="o">.</span><span class="n">prev</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">next</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">prev</span>
            <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">ring</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ring</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">next</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">ring</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">delete_node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ring</span><span class="p">)</span>

<span class="n">COUNT</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="k">for</span> <span class="n">rep</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">Ring</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">COUNT</span><span class="p">):</span>
        <span class="n">r</span><span class="o">.</span><span class="n">insert_value</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="c">#-----------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN746"
>Overloading Operators</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">#-----------------------------</span>
<span class="kn">import</span> <span class="nn">UserString</span>
<span class="k">class</span> <span class="nc">MyString</span><span class="p">(</span><span class="n">UserString</span><span class="o">.</span><span class="n">UserString</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__cmp__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">cmp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">other</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">idnum</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">idnum</span> <span class="o">=</span> <span class="n">idnum</span>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> (</span><span class="si">%05d</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">capitalize</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">idnum</span><span class="p">)</span>

<span class="c">#-----------------------------</span>
<span class="k">class</span> <span class="nc">TimeNumber</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hours</span><span class="p">,</span> <span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">minutes</span> <span class="o">&lt;</span> <span class="mi">60</span> <span class="ow">and</span> <span class="n">seconds</span> <span class="o">&lt;</span> <span class="mi">60</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hours</span> <span class="o">=</span> <span class="n">hours</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minutes</span> <span class="o">=</span> <span class="n">minutes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seconds</span> <span class="o">=</span> <span class="n">seconds</span>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;</span><span class="si">%d</span><span class="s">:</span><span class="si">%02d</span><span class="s">:</span><span class="si">%02d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hours</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">minutes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">seconds</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">seconds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">seconds</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">seconds</span>
        <span class="n">minutes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minutes</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">minutes</span>
        <span class="n">hours</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hours</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">hours</span>
        <span class="k">if</span> <span class="n">seconds</span> <span class="o">&gt;=</span> <span class="mi">60</span><span class="p">:</span>
            <span class="n">seconds</span> <span class="o">%=</span> <span class="mi">60</span>
            <span class="n">minutes</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">minutes</span> <span class="o">&gt;=</span> <span class="mi">60</span><span class="p">:</span>
            <span class="n">minutes</span> <span class="o">%=</span> <span class="mi">60</span>
            <span class="n">hours</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">TimeNumber</span><span class="p">(</span><span class="n">hours</span><span class="p">,</span> <span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">__div__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

<span class="n">t1</span> <span class="o">=</span> <span class="n">TimeNumber</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">59</span><span class="p">)</span>
<span class="n">sec</span> <span class="o">=</span> <span class="n">TimeNumber</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="nb">min</span> <span class="o">=</span> <span class="n">TimeNumber</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="k">print</span> <span class="n">t1</span> <span class="o">+</span> <span class="n">sec</span> <span class="o">+</span> <span class="nb">min</span> <span class="o">+</span> <span class="nb">min</span>
<span class="c"># 1:01:00</span>

<span class="c">#-----------------------------</span>
<span class="c"># For demo purposes only - the StrNum class is superfluous in this</span>
<span class="c"># case as plain strings would give the same result.</span>
<span class="k">class</span> <span class="nc">StrNum</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">__cmp__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>  <span class="c"># both &lt;=&gt; and cmp</span>
        <span class="c"># providing &lt;=&gt; gives us &lt;, ==, etc. for free.</span>
        <span class="c"># __lt__, __eq__, and __gt__ can also be individually specified</span>
        <span class="k">return</span> <span class="nb">cmp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c"># &quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>

    <span class="k">def</span> <span class="nf">__nonzero__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>   <span class="c"># bool</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__int__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>   <span class="c"># 0+</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>   <span class="c"># +</span>
        <span class="k">return</span> <span class="n">StrNum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>   <span class="c"># +, inverted</span>
        <span class="k">return</span> <span class="n">StrNum</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>   <span class="c"># *</span>
        <span class="k">return</span> <span class="n">StrNum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>   <span class="c"># *, inverted</span>
        <span class="k">return</span> <span class="n">StrNum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="n">other</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">demo</span><span class="p">():</span>
    <span class="c"># show_strnum - demo operator overloading</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">StrNum</span><span class="p">(</span><span class="s">&quot;Red&quot;</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">StrNum</span><span class="p">(</span><span class="s">&quot;Black&quot;</span><span class="p">)</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">z</span> <span class="o">*</span> <span class="mi">3</span>
    <span class="k">print</span> <span class="s">&quot;values are </span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">, and </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;LT&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;GE&quot;</span>
    <span class="k">print</span> <span class="n">x</span><span class="p">,</span> <span class="s">&quot;is&quot;</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">y</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">demo</span><span class="p">()</span>
<span class="c"># values are Red, Black, RedBlack, and RedBlackRedBlackRedBlack</span>
<span class="c"># Red is GE Black</span>

<span class="c">#-----------------------------</span>
<span class="c">#!/usr/bin/env python</span>
<span class="c"># demo_fixnum - show operator overloading</span>

<span class="c"># sum of STRFixNum: 40 and STRFixNum: 12 is STRFixNum: 52</span>
<span class="c"># product of STRFixNum: 40 and STRFixNum: 12 is STRFixNum: 480</span>
<span class="c"># STRFixNum: 3 has 0 places</span>
<span class="c"># div of STRFixNum: 40 by STRFixNum: 12 is STRFixNum: 3.33</span>
<span class="c"># square of that is  STRFixNum: 11.11</span>

<span class="c"># This isn&#39;t excatly the same as the original Perl code since</span>
<span class="c"># I couldn&#39;t figure out why the PLACES variable was used.</span>
<span class="c">#-----------------------------</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="n">_places_re</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&quot;\.(\d+)&quot;</span><span class="p">)</span>

<span class="n">default_places</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">class</span> <span class="nc">FixNum</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">places</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="n">places</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># get from the value</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">_places_re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
                <span class="n">places</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">places</span> <span class="o">=</span> <span class="n">default_places</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">places</span> <span class="o">=</span> <span class="n">places</span>

    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">FixNum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                      <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">places</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">places</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">FixNum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                      <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">places</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">places</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__div__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="c"># Force to use floating point, since 2/3 in Python is 0</span>
        <span class="c"># Don&#39;t use float() since that will convert strings</span>
        <span class="k">return</span> <span class="n">FixNum</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="o">+</span><span class="mf">0.0</span><span class="p">)</span> <span class="o">/</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                      <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">places</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">places</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;STR</span><span class="si">%s</span><span class="s">: </span><span class="si">%.*f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">places</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__int__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__float__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>

<span class="k">def</span> <span class="nf">demo</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">FixNum</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">FixNum</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">print</span> <span class="s">&quot;sum of&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="s">&quot;and&quot;</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s">&quot;is&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span>
    <span class="k">print</span> <span class="s">&quot;product of&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="s">&quot;and&quot;</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s">&quot;is&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span>

    <span class="n">z</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="n">y</span>
    <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> has </span><span class="si">%d</span><span class="s"> places&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">z</span><span class="o">.</span><span class="n">places</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">z</span><span class="o">.</span><span class="n">places</span><span class="p">:</span>
        <span class="n">z</span><span class="o">.</span><span class="n">places</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="k">print</span> <span class="s">&quot;div of&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="s">&quot;by&quot;</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s">&quot;is&quot;</span><span class="p">,</span> <span class="n">z</span>
    <span class="k">print</span> <span class="s">&quot;square of that is &quot;</span><span class="p">,</span> <span class="n">z</span><span class="o">*</span><span class="n">z</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">demo</span><span class="p">()</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN749"
>Creating Magic Variables with tie</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c"># You can&#39;t tie a variable, but you can use properties.  </span>
<span class="kn">import</span> <span class="nn">itertools</span>
<span class="k">class</span> <span class="nc">ValueRing</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colours</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colourcycle</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">cycle</span><span class="p">(</span><span class="n">colours</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">next_colour</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">colourcycle</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
    <span class="n">colour</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">next_colour</span><span class="p">)</span>
<span class="n">vr</span> <span class="o">=</span> <span class="n">ValueRing</span><span class="p">([</span><span class="s">&quot;red&quot;</span><span class="p">,</span> <span class="s">&quot;blue&quot;</span><span class="p">])</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">vr</span><span class="o">.</span><span class="n">colour</span><span class="p">,</span>
<span class="k">print</span>

<span class="c"># Note that you MUST refer directly to the property</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">vr</span><span class="o">.</span><span class="n">colour</span>
<span class="k">print</span> <span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">x</span>
<span class="c">#-------------------------------------</span>
<span class="c"># Ties are generally unnecessary in Python because of its strong OO support -</span>
<span class="c"># The resulting code is MUCH shorter:</span>
<span class="k">class</span> <span class="nc">AppendDict</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">AppendDict</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__setitem__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="p">[</span><span class="n">val</span><span class="p">])</span>
<span class="n">tab</span> <span class="o">=</span> <span class="n">AppendDict</span><span class="p">()</span>
<span class="n">tab</span><span class="p">[</span><span class="s">&quot;beer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;guinness&quot;</span>
<span class="n">tab</span><span class="p">[</span><span class="s">&quot;food&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;potatoes&quot;</span>
<span class="n">tab</span><span class="p">[</span><span class="s">&quot;food&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;peas&quot;</span>

<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">tab</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span> <span class="n">key</span><span class="p">,</span> <span class="s">&quot;=&gt;&quot;</span><span class="p">,</span> <span class="n">val</span>
<span class="c">#-------------------------------------</span>
<span class="k">class</span> <span class="nc">CaselessDict</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CaselessDict</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__setitem__</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">CaselessDict</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__getitem__</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>

<span class="n">tab</span> <span class="o">=</span> <span class="n">CaselessDict</span><span class="p">()</span>
<span class="n">tab</span><span class="p">[</span><span class="s">&quot;VILLAIN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;big &quot;</span>
<span class="n">tab</span><span class="p">[</span><span class="s">&quot;herOine&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;red riding hood&quot;</span>
<span class="n">tab</span><span class="p">[</span><span class="s">&quot;villain&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;bad wolf&quot;</span>

<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">tab</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span> <span class="n">key</span><span class="p">,</span> <span class="s">&quot;is&quot;</span><span class="p">,</span> <span class="n">val</span>
<span class="c">#=&gt;villain is bad wolf</span>
<span class="c">#=&gt;heroine is red riding hood</span>
<span class="c">#-------------------------------------</span>
<span class="k">class</span> <span class="nc">RevDict</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">RevDict</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__setitem__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">RevDict</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__setitem__</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>

<span class="n">tab</span> <span class="o">=</span> <span class="n">RevDict</span><span class="p">()</span>
<span class="n">tab</span><span class="p">[</span><span class="s">&quot;red&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;rojo&quot;</span>
<span class="n">tab</span><span class="p">[</span><span class="s">&quot;blue&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;azul&quot;</span>
<span class="n">tab</span><span class="p">[</span><span class="s">&quot;green&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;verde&quot;</span>
<span class="n">tab</span><span class="p">[</span><span class="s">&quot;evil&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;No Way!&quot;</span><span class="p">,</span> <span class="s">&quot;Way!&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">tab</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span> <span class="n">key</span><span class="p">,</span> <span class="s">&quot;is&quot;</span><span class="p">,</span> <span class="n">val</span>
<span class="c">#=&gt;blue is azul</span>
<span class="c">#=&gt;(&#39;No Way!&#39;, &#39;Way!&#39;) is evil</span>
<span class="c">#=&gt;rojo is red</span>
<span class="c">#=&gt;evil is (&#39;No Way!&#39;, &#39;Way!&#39;)</span>
<span class="c">#=&gt;azul is blue</span>
<span class="c">#=&gt;verde is green</span>
<span class="c">#=&gt;green is verde</span>
<span class="c">#=&gt;red is rojo</span>
<span class="c">#-------------------------------------</span>
<span class="kn">import</span> <span class="nn">itertools</span>
<span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">count</span><span class="p">():</span>
    <span class="k">print</span> <span class="s">&quot;Got&quot;</span><span class="p">,</span> <span class="n">elem</span>
<span class="c">#-------------------------------------</span>
<span class="c"># You could use FileDispatcher from section 7.18</span>
<span class="n">tee</span> <span class="o">=</span> <span class="n">FileDispatcher</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="c">#-------------------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="packagesetc.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="dbaccess.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Packages, Libraries, and Modules</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Database Access</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>