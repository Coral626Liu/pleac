<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Dates and Times</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="PLEAC-Guile 1.8"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Numbers"
HREF="numbers.html"><LINK
REL="NEXT"
TITLE="Arrays"
HREF="arrays.html"><style type="text/css">td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
pre { line-height: 125%; }

  </style></head
><BODY TEXT="#cecece" BGCOLOR="#4f6f6f" LINK="#f5deb3" VLINK="#d5ae83"
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PLEAC-Guile 1.8</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="numbers.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="arrays.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="DATESANDTIMES"
>3. Dates and Times</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN132"
>Introduction</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">;; Use the builtin POSIX time functions</span>

<span class="c1">;; get the current time</span>
<span class="p">(</span><span class="nf">current-time</span><span class="p">)</span>   <span class="c1">; number of seconds since the epoch</span>
<span class="p">(</span><span class="nf">gettimeofday</span><span class="p">)</span>   <span class="c1">; pair of seconds and microseconds since the epoch</span>

<span class="c1">;; create a time object from an integer (e.g. returned by current-time)</span>
<span class="p">(</span><span class="nf">localtime</span> <span class="nv">time</span><span class="p">)</span> <span class="c1">; in localtime</span>
<span class="p">(</span><span class="nf">gmtime</span> <span class="nv">time</span><span class="p">)</span>    <span class="c1">; in UTC</span>

<span class="c1">;; get/set broken down components of a time object</span>

<span class="p">(</span><span class="nf">tm:sec</span> <span class="nv">time</span><span class="p">)</span>    <span class="p">(</span><span class="nf">set-tm:sec</span> <span class="nv">time</span> <span class="nv">secs</span><span class="p">)</span>    <span class="c1">; seconds (0-59)</span>
<span class="p">(</span><span class="nf">tm:min</span> <span class="nv">time</span><span class="p">)</span>    <span class="p">(</span><span class="nf">set-tm:min</span> <span class="nv">time</span> <span class="nv">mins</span><span class="p">)</span>    <span class="c1">; minutes (0-59)</span>
<span class="p">(</span><span class="nf">tm:hour</span> <span class="nv">time</span><span class="p">)</span>   <span class="p">(</span><span class="nf">set-tm:hour</span> <span class="nv">time</span> <span class="nv">hours</span><span class="p">)</span>  <span class="c1">; hours (0-23)</span>
<span class="p">(</span><span class="nf">tm:mday</span> <span class="nv">time</span><span class="p">)</span>   <span class="p">(</span><span class="nf">set-tm:mday</span> <span class="nv">time</span> <span class="nv">mday</span><span class="p">)</span>   <span class="c1">; day of the month (1-31)</span>
<span class="p">(</span><span class="nf">tm:mon</span> <span class="nv">time</span><span class="p">)</span>    <span class="p">(</span><span class="nf">set-tm:mon</span> <span class="nv">time</span> <span class="nv">month</span><span class="p">)</span>   <span class="c1">; month (0-11)</span>
<span class="p">(</span><span class="nf">tm:year</span> <span class="nv">time</span><span class="p">)</span>   <span class="p">(</span><span class="nf">set-tm:year</span> <span class="nv">time</span> <span class="nv">year</span><span class="p">)</span>   <span class="c1">; year minus 1900 (70-)</span>
<span class="p">(</span><span class="nf">tm:wday</span> <span class="nv">time</span><span class="p">)</span>   <span class="p">(</span><span class="nf">set-tm:wday</span> <span class="nv">time</span> <span class="nv">wday</span><span class="p">)</span>   <span class="c1">; day of the week (0-6)</span>
                                           <span class="c1">; where Sunday is 0</span>
<span class="p">(</span><span class="nf">tm:yday</span> <span class="nv">time</span><span class="p">)</span>   <span class="p">(</span><span class="nf">set-tm:yday</span> <span class="nv">time</span> <span class="nv">yday</span><span class="p">)</span>   <span class="c1">; day of year (0-365)</span>
<span class="p">(</span><span class="nf">tm:isdst</span> <span class="nv">time</span><span class="p">)</span>  <span class="p">(</span><span class="nf">set-tm:isdst</span> <span class="nv">time</span> <span class="nv">isdst</span><span class="p">)</span> <span class="c1">; daylight saving indicator</span>
                                           <span class="c1">; 0 for &quot;no&quot;, &gt; 0 for &quot;yes&quot;,</span>
                                           <span class="c1">; &lt; 0 for &quot;unknown&quot;</span>
<span class="p">(</span><span class="nf">tm:gmtoff</span> <span class="nv">time</span><span class="p">)</span> <span class="p">(</span><span class="nf">set-tm:gmtoff</span> <span class="nv">time</span> <span class="nv">off</span><span class="p">)</span>  <span class="c1">; time zone offset in seconds</span>
                                           <span class="c1">; west of UTC (-46800 to 43200)</span>
<span class="p">(</span><span class="nf">tm:zone</span> <span class="nv">time</span><span class="p">)</span>   <span class="p">(</span><span class="nf">set-tm:zone</span> <span class="nv">time</span> <span class="nv">zone</span><span class="p">)</span>   <span class="c1">; Time zone label (a string),</span>
                                           <span class="c1">; not necessarily unique.</span>

<span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;Today is day ~A of the current year.\n&quot;</span>
        <span class="p">(</span><span class="nf">tm:yday</span> <span class="p">(</span><span class="nf">localtime</span> <span class="p">(</span><span class="nf">current-time</span><span class="p">))))</span>

<span class="c1">;; Or use SRFI-19 - Time and Date Procedures</span>
<span class="p">(</span><span class="nf">use-modules</span> <span class="p">(</span><span class="nf">srfi</span> <span class="nv">srfi-19</span><span class="p">))</span>

<span class="p">(</span><span class="k">define </span><span class="nv">now</span> <span class="p">(</span><span class="nf">current-date</span><span class="p">))</span>  <span class="c1">; immutable once created</span>

<span class="p">(</span><span class="nf">date-nanosecond</span> <span class="nv">now</span><span class="p">)</span>        <span class="c1">; 0-9,999,999</span>
<span class="p">(</span><span class="nf">date-second</span> <span class="nv">now</span><span class="p">)</span>            <span class="c1">; 0-60 (60 represents a leap second)</span>
<span class="p">(</span><span class="nf">date-minute</span> <span class="nv">now</span><span class="p">)</span>            <span class="c1">; 0-59</span>
<span class="p">(</span><span class="nf">date-hour</span> <span class="nv">now</span><span class="p">)</span>              <span class="c1">; 0-23</span>
<span class="p">(</span><span class="nf">date-day</span> <span class="nv">now</span><span class="p">)</span>               <span class="c1">; 0-31</span>
<span class="p">(</span><span class="nf">date-month</span> <span class="nv">now</span><span class="p">)</span>             <span class="c1">; 1-12</span>
<span class="p">(</span><span class="nf">date-year</span> <span class="nv">now</span><span class="p">)</span>              <span class="c1">; integer representing the year</span>
<span class="p">(</span><span class="nf">date-year-day</span> <span class="nv">now</span><span class="p">)</span>          <span class="c1">; day of year (Jan 1 is 1, etc.)</span>
<span class="p">(</span><span class="nf">date-week-day</span> <span class="nv">now</span><span class="p">)</span>          <span class="c1">; day of week (Sunday is 0, etc.)</span>
<span class="p">(</span><span class="nf">date-week-number</span> <span class="nv">now</span> <span class="nv">start</span><span class="p">)</span> <span class="c1">; week of year, ignoring a first partial week</span>
                             <span class="c1">; start is the first day of week as above</span>
<span class="p">(</span><span class="nf">date-zone-offset</span> <span class="nv">now</span><span class="p">)</span>       <span class="c1">; integer number of seconds east of GMT</span>

<span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;Today is day ~A of the current year.\n&quot;</span>
        <span class="p">(</span><span class="nf">date-year-day</span> <span class="p">(</span><span class="nf">current-date</span><span class="p">)))</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN135"
>Finding Today's Date</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">;; using format and POSIX time components</span>
<span class="p">(</span><span class="nf">use-modules</span> <span class="p">(</span><span class="nf">ice-9</span> <span class="nv">format</span><span class="p">))</span>
<span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">now</span> <span class="p">(</span><span class="nf">localtime</span> <span class="p">(</span><span class="nf">current-time</span><span class="p">))))</span>
  <span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;The current date is ~4&#39;0D ~2&#39;0D ~2&#39;0D\n&quot;</span>
          <span class="p">(</span><span class="nb">+ </span><span class="mi">1900</span> <span class="p">(</span><span class="nf">tm:year</span> <span class="nv">now</span><span class="p">))</span> <span class="p">(</span><span class="nf">tm:mon</span> <span class="nv">now</span><span class="p">)</span> <span class="p">(</span><span class="nf">tm:mday</span> <span class="nv">now</span><span class="p">)))</span>

<span class="c1">;; using format and SRFI-19 time components</span>
<span class="p">(</span><span class="nf">use-modules</span> <span class="p">(</span><span class="nf">srfi</span> <span class="nv">srfi-19</span><span class="p">)</span> <span class="p">(</span><span class="nf">ice-9</span> <span class="nv">format</span><span class="p">))</span>
<span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">now</span> <span class="p">(</span><span class="nf">current-date</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;The current date is ~4&#39;0d-~2&#39;0D-~2&#39;0D\n&quot;</span>
          <span class="p">(</span><span class="nf">date-year</span> <span class="nv">now</span><span class="p">)</span> <span class="p">(</span><span class="nf">date-month</span> <span class="nv">now</span><span class="p">)</span> <span class="p">(</span><span class="nf">date-day</span> <span class="nv">now</span><span class="p">)))</span>

<span class="c1">;; using POSIX strftime with a libc time format string</span>
<span class="p">(</span><span class="nb">display </span><span class="p">(</span><span class="nf">strftime</span> <span class="s">&quot;%Y-%m-%d\n&quot;</span> <span class="p">(</span><span class="nf">localtime</span> <span class="p">(</span><span class="nf">current-time</span><span class="p">))))</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN138"
>Converting DMYHMS to Epoch Seconds</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">;; set the individual components of a time struct and use mktime</span>
<span class="p">(</span><span class="k">define </span><span class="nv">time</span> <span class="p">(</span><span class="nf">localtime</span> <span class="p">(</span><span class="nf">current-time</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">set-tm:mday</span> <span class="nv">time</span> <span class="nv">mday</span><span class="p">)</span>
<span class="p">(</span><span class="nf">set-tm:mon</span> <span class="nv">time</span> <span class="nv">mon</span><span class="p">)</span>
<span class="p">(</span><span class="nf">set-tm:year</span> <span class="nv">time</span> <span class="nv">year</span><span class="p">)</span>
<span class="p">(</span><span class="nb">car </span><span class="p">(</span><span class="nf">mktime</span> <span class="nv">time</span><span class="p">))</span>  <span class="c1">; mktime returns a (epoch-seconds . time) pair</span>

<span class="c1">;; or use SRFI-19&#39;s make-date and date-&gt;time-monotonic</span>
<span class="p">(</span><span class="nf">use-modules</span> <span class="p">(</span><span class="nf">srfi</span> <span class="nv">srfi-19</span><span class="p">))</span>
<span class="p">(</span><span class="nf">date-&gt;time-monotonic</span>
 <span class="p">(</span><span class="nf">make-date</span> <span class="nv">nanosecond</span> <span class="nv">second</span> <span class="nv">minute</span> <span class="nv">hour</span> <span class="nv">day</span> <span class="nv">month</span> <span class="nv">year</span> <span class="nv">zone-offset</span><span class="p">))</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN141"
>Converting Epoch Seconds to DMYHMS</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">;; use localtime or gmtime with the accessors mentioned in the</span>
<span class="c1">;; introduction to this chapter</span>
<span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">time</span> <span class="p">(</span><span class="nf">localtime</span> <span class="nv">seconds</span><span class="p">)))</span>  <span class="c1">; or gmtime</span>
  <span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;Dateline: ~2&#39;0d:~2&#39;0d:~2&#39;0d-~4&#39;0d/~2&#39;0d/~2&#39;0d\n&quot;</span>
          <span class="p">(</span><span class="nf">tm:hour</span> <span class="nv">time</span><span class="p">)</span> <span class="p">(</span><span class="nf">tm:min</span> <span class="nv">time</span><span class="p">)</span> <span class="p">(</span><span class="nf">tm:sec</span> <span class="nv">time</span><span class="p">)</span>
          <span class="p">(</span><span class="nb">+ </span><span class="mi">1900</span> <span class="p">(</span><span class="nf">tm:year</span> <span class="nv">time</span><span class="p">))</span> <span class="p">(</span><span class="mi">1</span><span class="nv">+</span> <span class="p">(</span><span class="nf">tm:mon</span> <span class="nv">time</span><span class="p">))</span> <span class="p">(</span><span class="nf">tm:mday</span> <span class="nv">time</span><span class="p">)))</span>

<span class="c1">;; or use SRFI-19</span>
<span class="p">(</span><span class="nf">use-modules</span> <span class="p">(</span><span class="nf">srfi</span> <span class="nv">srfi-19</span><span class="p">))</span>
<span class="p">(</span><span class="k">let* </span><span class="p">((</span><span class="nf">time</span> <span class="p">(</span><span class="nf">make-time</span> <span class="nv">time-monotonic</span> <span class="nv">nanosecond</span> <span class="nv">second</span><span class="p">)))</span>
  <span class="p">(</span><span class="nb">display </span><span class="p">(</span><span class="nf">date-&gt;string</span> <span class="p">(</span><span class="nf">time-monotonic-&gt;date</span> <span class="nv">time</span><span class="p">)</span> <span class="s">&quot;~T-~1\n&quot;</span><span class="p">)))</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN144"
>Adding to or Subtracting from a Date</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">;; just add or subtract epoch seconds</span>
<span class="p">(</span><span class="k">define </span><span class="nv">when</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">now</span> <span class="nv">difference</span><span class="p">))</span>
<span class="p">(</span><span class="k">define </span><span class="nv">then</span> <span class="p">(</span><span class="nb">- </span><span class="nv">now</span> <span class="nv">difference</span><span class="p">))</span>

<span class="c1">;; if you have DMYHMS values, you can convert them to times or add</span>
<span class="c1">;; them as seconds:</span>
<span class="p">(</span><span class="k">define </span><span class="nv">birthtime</span> <span class="mi">96176750</span><span class="p">)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">interval</span> <span class="p">(</span><span class="nb">+ </span><span class="mi">5</span>                  <span class="c1">; 5 seconds</span>
                    <span class="p">(</span><span class="nb">* </span><span class="mi">17</span> <span class="mi">60</span><span class="p">)</span>          <span class="c1">; 17 minutes</span>
                    <span class="p">(</span><span class="nb">* </span><span class="mi">2</span> <span class="mi">60</span> <span class="mi">60</span><span class="p">)</span>        <span class="c1">; 2 hours</span>
                    <span class="p">(</span><span class="nb">* </span><span class="mi">55</span> <span class="mi">60</span> <span class="mi">60</span> <span class="mi">24</span><span class="p">)))</span>  <span class="c1">; and 55 days</span>
<span class="p">(</span><span class="k">define </span><span class="nv">then</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">birthtime</span> <span class="nv">interval</span><span class="p">))</span>
<span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;Then is ~A\n&quot;</span> <span class="p">(</span><span class="nf">strftime</span> <span class="s">&quot;%a %b %d %T %Y&quot;</span> <span class="p">(</span><span class="nf">localtime</span> <span class="nv">then</span><span class="p">)))</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN147"
>Difference of Two Dates</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">;; subtract the epoch seconds:</span>
<span class="p">(</span><span class="k">define </span><span class="nv">bree</span> <span class="mi">361535725</span><span class="p">)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">nat</span> <span class="mi">96201950</span><span class="p">)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">difference</span> <span class="p">(</span><span class="nb">- </span><span class="nv">bree</span> <span class="nv">nat</span><span class="p">))</span>
<span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;There were ~A seconds between Nat and Bree\n&quot;</span> <span class="nv">difference</span><span class="p">)</span>

<span class="c1">;; or use SRFI-19&#39;s time arithmetic procedures:</span>
<span class="p">(</span><span class="nf">use-modules</span> <span class="p">(</span><span class="nf">srfi</span> <span class="nv">srfi-19</span><span class="p">))</span>
<span class="p">(</span><span class="k">define </span><span class="nv">time1</span> <span class="p">(</span><span class="nf">make-time</span> <span class="nv">time-monotonic</span> <span class="nv">nano1</span> <span class="nv">sec1</span><span class="p">))</span>
<span class="p">(</span><span class="k">define </span><span class="nv">time2</span> <span class="p">(</span><span class="nf">make-time</span> <span class="nv">time-monotonic</span> <span class="nv">nano2</span> <span class="nv">sec2</span><span class="p">))</span>
<span class="p">(</span><span class="k">define </span><span class="nv">duration</span> <span class="p">(</span><span class="nf">time-difference</span> <span class="nv">time1</span> <span class="nv">time2</span><span class="p">))</span>
<span class="p">(</span><span class="nf">time=?</span> <span class="p">(</span><span class="nf">subtract-duration</span> <span class="nv">time1</span> <span class="nv">duration</span><span class="p">)</span> <span class="nv">time2</span><span class="p">)</span> <span class="c1">; #t</span>
<span class="p">(</span><span class="nf">time=?</span> <span class="p">(</span><span class="nf">add-duration</span> <span class="nv">time2</span> <span class="nv">duration</span><span class="p">)</span> <span class="nv">time1</span><span class="p">)</span>      <span class="c1">; #t</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN150"
>Day in a Week/Month/Year or Week Number</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">;; convert to a SRFI-19 date and use the accessors</span>
<span class="p">(</span><span class="nf">use-modules</span> <span class="p">(</span><span class="nf">srfi</span> <span class="nv">srfi-19</span><span class="p">))</span>
<span class="p">(</span><span class="nf">date-day</span> <span class="nv">date</span><span class="p">)</span>
<span class="p">(</span><span class="nf">date-year-day</span> <span class="nv">date</span><span class="p">)</span>
<span class="p">(</span><span class="nf">date-week-day</span> <span class="nv">date</span><span class="p">)</span>
<span class="p">(</span><span class="nf">date-week-number</span> <span class="nv">date</span> <span class="nv">start-day-of-week</span><span class="p">)</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN153"
>Parsing Dates and Times from Strings</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">;; use the strptime function:</span>
<span class="p">(</span><span class="k">define </span><span class="nv">time-pair</span> <span class="p">(</span><span class="nf">strptime</span> <span class="s">&quot;%Y-%m-%d&quot;</span> <span class="s">&quot;1998-06-03&quot;</span><span class="p">))</span>
<span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;Time is ~A\n.&quot;</span> <span class="p">(</span><span class="nf">strftime</span> <span class="s">&quot;%b %d, %Y&quot;</span> <span class="p">(</span><span class="nb">car </span><span class="nv">time-pair</span><span class="p">)))</span>

<span class="c1">;; or use SRFI-19&#39;s string-&gt;date:</span>
<span class="p">(</span><span class="nf">use-modules</span> <span class="p">(</span><span class="nf">srfi</span> <span class="nv">srfi-19</span><span class="p">))</span>
<span class="p">(</span><span class="k">define </span><span class="nv">date</span> <span class="p">(</span><span class="nf">string-&gt;date</span> <span class="s">&quot;1998-06-03&quot;</span> <span class="s">&quot;~Y-~m-~d&quot;</span><span class="p">))</span>
<span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;Time is ~A.\n&quot;</span> <span class="p">(</span><span class="nf">date-&gt;string</span> <span class="nv">date</span><span class="p">))</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN156"
>Printing a Date</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">;; use the already seen strftime:</span>
<span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;strftime gives: ~A\n&quot;</span>
        <span class="p">(</span><span class="nf">strftime</span> <span class="s">&quot;%A %D&quot;</span> <span class="p">(</span><span class="nf">localtime</span> <span class="p">(</span><span class="nf">current-time</span><span class="p">))))</span>

<span class="c1">;; or SRFI-19&#39;s date-&gt;string:</span>
<span class="p">(</span><span class="nf">use-modules</span> <span class="p">(</span><span class="nf">srfi</span> <span class="nv">srfi-19</span><span class="p">))</span>
<span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;default date-&gt;string gives: ~A\n&quot;</span> <span class="p">(</span><span class="nf">date-&gt;string</span> <span class="p">(</span><span class="nf">current-date</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;date-&gt;string gives: ~A\n&quot;</span>
        <span class="p">(</span><span class="nf">date-&gt;string</span> <span class="p">(</span><span class="nf">current-date</span><span class="p">)</span> <span class="s">&quot;~a ~b ~e ~H:~M:~S ~z ~Y&quot;</span><span class="p">))</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN159"
>High-Resolution Timers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">;; gettimeofday will return seconds and microseconds:</span>
<span class="p">(</span><span class="k">define </span><span class="nv">t0</span> <span class="p">(</span><span class="nf">gettimeofday</span><span class="p">))</span>
<span class="c1">;; do your work here</span>
<span class="p">(</span><span class="k">define </span><span class="nv">t1</span> <span class="p">(</span><span class="nf">gettimeofday</span><span class="p">))</span>
<span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;You took ~A seconds and ~A microseconds\n&quot;</span>
        <span class="p">(</span><span class="nb">- </span><span class="p">(</span><span class="nb">car </span><span class="nv">t1</span><span class="p">)</span> <span class="p">(</span><span class="nb">car </span><span class="nv">t0</span><span class="p">))</span> <span class="p">(</span><span class="nb">- </span><span class="p">(</span><span class="nb">cdr </span><span class="nv">t1</span><span class="p">)</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">t0</span><span class="p">)))</span>

<span class="c1">;; you can also get more detailed info about the real and processor</span>
<span class="c1">;; times:</span>
<span class="p">(</span><span class="k">define </span><span class="nv">runtime</span> <span class="p">(</span><span class="nf">times</span><span class="p">))</span>
<span class="p">(</span><span class="nf">tms:clock</span> <span class="nv">runtime</span><span class="p">)</span>  <span class="c1">; the current real time</span>
<span class="p">(</span><span class="nf">tms:utime</span> <span class="nv">runtime</span><span class="p">)</span>  <span class="c1">; the CPU time units used by the calling process</span>
<span class="p">(</span><span class="nf">tms:stime</span> <span class="nv">runtime</span><span class="p">)</span>  <span class="c1">; the CPU time units used by the system on behalf</span>
                     <span class="c1">; of the calling process.</span>
<span class="p">(</span><span class="nf">tms:cutime</span> <span class="nv">runtime</span><span class="p">)</span> <span class="c1">; the CPU time units used by terminated child</span>
                     <span class="c1">; processes of the calling process, whose status</span>
                     <span class="c1">; has been collected (e.g., using `waitpid&#39;).</span>
<span class="p">(</span><span class="nf">tms:cstime</span> <span class="nv">runtime</span><span class="p">)</span> <span class="c1">; the CPU times units used by the system on</span>
		     <span class="c1">; behalf of terminated child processes</span>

<span class="c1">;; you can also use the time module to time execution:</span>
<span class="p">(</span><span class="nf">use-modules</span> <span class="p">(</span><span class="nf">ice-9</span> <span class="nv">time</span><span class="p">))</span>
<span class="p">(</span><span class="nf">time</span> <span class="p">(</span><span class="nf">sleep</span> <span class="mi">3</span><span class="p">))</span>
<span class="c1">;; clock utime stime cutime cstime gctime</span>
<span class="c1">;; 3.01  0.00  0.00   0.00   0.00   0.00</span>
<span class="c1">;; 0</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN162"
>Short Sleeps</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="p">(</span><span class="nf">sleep</span> <span class="nv">i</span><span class="p">)</span>   <span class="c1">; sleep for i seconds</span>
<span class="p">(</span><span class="nf">usleep</span> <span class="nv">i</span><span class="p">)</span>  <span class="c1">; sleep for i microseconds (not available on all platforms)</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN165"
>Program: hopdelta</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="numbers.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="arrays.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Numbers</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Arrays</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>