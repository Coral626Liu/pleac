<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
  <title></title>
  <meta http-equiv="content-type" content="text/html; charset=latin1">
  <style type="text/css">
td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
pre { line-height: 125%; }
body .hll { background-color: #ffffcc }
body  { background: #f8f8f8; }
body .c { color: #408080; font-style: italic } /* Comment */
body .err { border: 1px solid #FF0000 } /* Error */
body .k { color: #008000; font-weight: bold } /* Keyword */
body .o { color: #666666 } /* Operator */
body .cm { color: #408080; font-style: italic } /* Comment.Multiline */
body .cp { color: #BC7A00 } /* Comment.Preproc */
body .c1 { color: #408080; font-style: italic } /* Comment.Single */
body .cs { color: #408080; font-style: italic } /* Comment.Special */
body .gd { color: #A00000 } /* Generic.Deleted */
body .ge { font-style: italic } /* Generic.Emph */
body .gr { color: #FF0000 } /* Generic.Error */
body .gh { color: #000080; font-weight: bold } /* Generic.Heading */
body .gi { color: #00A000 } /* Generic.Inserted */
body .go { color: #888888 } /* Generic.Output */
body .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
body .gs { font-weight: bold } /* Generic.Strong */
body .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
body .gt { color: #0044DD } /* Generic.Traceback */
body .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
body .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
body .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
body .kp { color: #008000 } /* Keyword.Pseudo */
body .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
body .kt { color: #B00040 } /* Keyword.Type */
body .m { color: #666666 } /* Literal.Number */
body .s { color: #BA2121 } /* Literal.String */
body .na { color: #7D9029 } /* Name.Attribute */
body .nb { color: #008000 } /* Name.Builtin */
body .nc { color: #0000FF; font-weight: bold } /* Name.Class */
body .no { color: #880000 } /* Name.Constant */
body .nd { color: #AA22FF } /* Name.Decorator */
body .ni { color: #999999; font-weight: bold } /* Name.Entity */
body .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
body .nf { color: #0000FF } /* Name.Function */
body .nl { color: #A0A000 } /* Name.Label */
body .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
body .nt { color: #008000; font-weight: bold } /* Name.Tag */
body .nv { color: #19177C } /* Name.Variable */
body .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
body .w { color: #bbbbbb } /* Text.Whitespace */
body .mf { color: #666666 } /* Literal.Number.Float */
body .mh { color: #666666 } /* Literal.Number.Hex */
body .mi { color: #666666 } /* Literal.Number.Integer */
body .mo { color: #666666 } /* Literal.Number.Oct */
body .sb { color: #BA2121 } /* Literal.String.Backtick */
body .sc { color: #BA2121 } /* Literal.String.Char */
body .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
body .s2 { color: #BA2121 } /* Literal.String.Double */
body .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
body .sh { color: #BA2121 } /* Literal.String.Heredoc */
body .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
body .sx { color: #008000 } /* Literal.String.Other */
body .sr { color: #BB6688 } /* Literal.String.Regex */
body .s1 { color: #BA2121 } /* Literal.String.Single */
body .ss { color: #19177C } /* Literal.String.Symbol */
body .bp { color: #008000 } /* Name.Builtin.Pseudo */
body .vc { color: #19177C } /* Name.Variable.Class */
body .vg { color: #19177C } /* Name.Variable.Global */
body .vi { color: #19177C } /* Name.Variable.Instance */
body .il { color: #666666 } /* Literal.Number.Integer.Long */

  </style>
</head>
<body>
<h2></h2>

<div class="highlight"><pre><span class="c">! -*- factor -*-</span><span class="nb"></span>
<span class="c">! vim:set ft=factor:</span><span class="nb"></span>

<span class="c">! @@PLEAC@@_NAME</span><span class="nb"></span>
<span class="c">! @@SKIP@@ Factor</span><span class="nb"></span>

<span class="c">! @@PLEAC@@_WEB</span><span class="nb"></span>
<span class="c">! @@SKIP@@ http://factorcode.org/</span><span class="nb"></span>

<span class="c">! @@PLEAC@@_INTRO</span><span class="nb"></span>
<span class="c">! @@SKIP@@ Factor is a general purpose, dynamically typed,</span><span class="nb"></span>
<span class="c">! @@SKIP@@ stack-based programming language released under a BSD-style license.</span><span class="nb"></span>

<span class="c">! @@SKIP@@ Factor has variables (global and local) but most of the time it is more</span><span class="nb"></span>
<span class="c">! @@SKIP@@ idiomatic to put results on the stack. The examples will look different</span><span class="nb"></span>
<span class="c">! @@SKIP@@ from the typical &quot;a = b(x)&quot; of other programming languages.</span><span class="nb"></span>

<span class="c">! @@PLEAC@@_1.0</span><span class="nb"></span>
<span class="c">! -----------------------------</span>
<span class="k">:</span> <span class="nf">string</span><span class="nb"> </span><span class="nf">(</span> <span class="nf">--</span> <span class="nv">str</span> <span class="nf">)</span><span class="nb"> </span><span class="s">&quot;\\n&quot;</span><span class="nb"> </span><span class="k">; </span><span class="nb">                </span><span class="c">! two characters, \ and an n</span>
<span class="k">:</span> <span class="nf">string</span><span class="nb"> </span><span class="nf">(</span> <span class="nf">--</span> <span class="nv">str</span> <span class="nf">)</span><span class="nb"> </span><span class="s">&quot;Jon &#39;Maddog&#39; Orwant&quot;</span><span class="nb"> </span><span class="k">; </span><span class="c">! literal single quotes</span><span class="nb"></span>
<span class="c">! -----------------------------</span>
<span class="k">:</span> <span class="nf">string</span><span class="nb"> </span><span class="nf">(</span> <span class="nf">--</span> <span class="nv">str</span> <span class="nf">)</span><span class="nb"> </span><span class="s">&quot;\n&quot;</span><span class="nb"> </span><span class="k">; </span><span class="nb">                     </span><span class="c">! a &quot;newline&quot; character</span>
<span class="k">:</span> <span class="nf">string</span><span class="nb"> </span><span class="nf">(</span> <span class="nf">--</span> <span class="nv">str</span> <span class="nf">)</span><span class="nb"> </span><span class="s">&quot;Jon \&quot;Maddog\&quot; Orwant&quot;</span><span class="nb"> </span><span class="k">; </span><span class="nb">  </span><span class="c">! literal double quotes</span><span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>
<span class="c">! Multiline strings need the multiline vocabulary</span><span class="nb"></span>

<span class="kn">USE:</span> <span class="nn">multiline</span><span class="nb"></span>

STRING:<span class="nb"> </span>a<span class="nb"></span>
This<span class="nb"> </span>is<span class="nb"> </span>a<span class="nb"> </span>multiline<span class="nb"> </span>document<span class="nb"></span>
terminated<span class="nb"> </span>by<span class="nb"> </span><span class="k">; </span><span class="nb">on </span>a<span class="nb"> </span>line<span class="nb"> </span>by<span class="nb"> </span>itself<span class="nb"></span>
<span class="k">;</span>

<span class="k">:</span> <span class="nf">a</span><span class="nb"> </span><span class="nf">(</span> <span class="nf">--</span> <span class="nv">str</span> <span class="nf">)</span><span class="nb"></span>
<span class="nb">    </span>&lt;&quot;<span class="nb"> </span>This<span class="nb"> </span>is<span class="nb"> </span>a<span class="nb"> </span>multiline<span class="nb"> </span>document<span class="nb"></span>
terminated<span class="nb"> </span>by<span class="nb"> </span>double<span class="nb"> </span>quotes<span class="nb"> </span>plus<span class="nb"> </span>greater<span class="nb"> </span>sign&quot;&gt;<span class="nb"> </span><span class="k">;</span>
<span class="c">! -----------------------------</span><span class="nb"></span>

<span class="c">! @@PLEAC@@_1.1</span><span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>
<span class="c">! use subseq from the sequences vocabulary, since strings are just sequences</span><span class="nb"></span>
from<span class="nb"> </span>to<span class="nb"> </span>str<span class="nb"> subseq</span>

<span class="mi">1 3 </span><span class="s">&quot;abcdefg&quot;</span><span class="nb"> subseq </span>.<span class="nb"></span>
<span class="c">! &quot;bc&quot;</span><span class="nb"></span>

<span class="c">! The rest from a given position is handled by tail</span><span class="nb"></span>
str<span class="nb"> </span>n<span class="nb"> tail</span>

<span class="mi">1 </span><span class="s">&quot;abcdefg&quot;</span><span class="nb"> tail </span>.<span class="nb"></span>
<span class="c">! &quot;bcdefg&quot;</span><span class="nb"></span>

<span class="c">! Replacing a substring with replace-slice</span><span class="nb"></span>
newstr<span class="nb"> </span>from<span class="nb"> </span>to<span class="nb"> </span>str<span class="nb"> replace-slice</span>

<span class="s">&quot;1234&quot;</span><span class="nb"> </span><span class="mi">3 7 </span><span class="s">&quot;abcdefg&quot;</span><span class="nb"> </span>[<span class="nb"> replace-slice </span>]<span class="nb"> keep </span>.<span class="nb"></span>
!&quot;abc1234&quot;

<span class="k">:</span> <span class="nf">replace-tail</span><span class="nb"> </span><span class="nf">(</span> <span class="nv">new</span> <span class="nv">from</span> <span class="nv">seq</span> <span class="nf">--</span> <span class="nf">)</span><span class="nb"></span>
<span class="nb">    dup length swap </span>[<span class="nb"> replace-slice </span>]<span class="nb"> keep </span><span class="k">;</span>

<span class="s">&quot;1234&quot;</span><span class="nb"> </span><span class="mi">3 </span><span class="s">&quot;abcdefg&quot;</span><span class="nb"> </span>replace-tail<span class="nb"> </span>.<span class="nb"></span>
<span class="c">! &quot;abc1234&quot;</span><span class="nb"></span>

<span class="c">! -----------------------------</span><span class="nb"></span>

<span class="c">! split at five character boundaries</span><span class="nb"></span>
<span class="kn">USE:</span> <span class="nn">splitting</span><span class="nb"></span>
<span class="mi">5 </span>group<span class="nb">     </span><span class="c">! Splits sequence/string on top of stack into an array</span><span class="nb"></span>

<span class="s">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span><span class="nb"> </span><span class="mi">5 </span>group<span class="nb"> </span>.<span class="nb"></span>
<span class="c">! { &quot;abcde&quot; &quot;fghij&quot; &quot;klmno&quot; &quot;pqrst&quot; &quot;uvwxy&quot; &quot;z&quot; }</span><span class="nb"></span>

<span class="c">! chop string into individual characters</span><span class="nb"></span>
<span class="mi">1 </span>group<span class="nb"></span>

<span class="s">&quot;abcd&quot;</span><span class="nb"> </span><span class="mi">1 </span>group<span class="nb"> </span>.<span class="nb"></span>
<span class="c">! { &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; }</span><span class="nb"></span>

<span class="c">! -----------------------------</span>
<span class="k">:</span> <span class="nf">str</span><span class="nb"> </span><span class="nf">(</span> <span class="nf">--</span> <span class="nv">str</span> <span class="nf">)</span><span class="nb"> </span><span class="s">&quot;This is what you have&quot;</span><span class="nb"> </span><span class="k">;</span>
<span class="c">!                +012345678901234567890  Indexing forwards  (left to right)</span><span class="nb"></span>
<span class="c">!                 109876543210987654321- Indexing backwards (right to left)</span><span class="nb"></span>
<span class="c">!                  note that 0 means 10 or 20, etc. above</span><span class="nb"></span>

<span class="mi">0 1 </span>str<span class="nb"> subseq  </span><span class="c">! &quot;T&quot; (on top of stack)</span><span class="nb"></span>
str<span class="nb"> </span><span class="mi">1 </span><span class="nb">head      </span><span class="c">! &quot;T&quot;</span><span class="nb"></span>
<span class="mi">5 7 </span>str<span class="nb"> subseq  </span><span class="c">! &quot;is&quot;</span><span class="nb"></span>
str<span class="nb"> </span><span class="mi">13 </span><span class="nb">tail     </span><span class="c">! &quot;you have&quot;</span><span class="nb"></span>
str<span class="nb"> </span><span class="mi">1 </span>tail*<span class="nb">     </span><span class="c">! &quot;e&quot;</span><span class="nb"></span>
str<span class="nb"> </span><span class="mi">4 </span>tail*<span class="nb">     </span><span class="c">! &quot;have&quot;</span><span class="nb"></span>
<span class="c">! 8 indexed from backward, 3 characters</span><span class="nb"></span>
str<span class="nb"> length </span><span class="mi">8 </span><span class="o">- </span><span class="nb">dup </span><span class="mi">3 </span><span class="o">+ </span>str<span class="nb"> subseq   </span><span class="c">! &quot;you&quot;</span><span class="nb"></span>
<span class="c">! Or with a new word, using the locals vocabulary</span><span class="nb"></span>
<span class="kn">USE:</span> <span class="nn">locals</span>
<span class="k">::</span> <span class="nf">chars-from-rindex</span><span class="nb"> </span><span class="nf">(</span> <span class="nv">from</span> <span class="nv">count</span> <span class="nv">str</span> <span class="nf">--</span> <span class="nv">newstr</span> <span class="nf">)</span><span class="nb"></span>
<span class="nb">    </span>str<span class="nb"> length </span>from<span class="nb"> </span><span class="o">- </span><span class="nb">dup count </span><span class="o">+ </span>str<span class="nb"> subseq </span><span class="k">;</span>

<span class="mi">8 3 </span>str<span class="nb"> </span>chars-from-rindex<span class="nb">   </span><span class="c">! &quot;you&quot;</span><span class="nb"></span>

<span class="c">! -----------------------------</span><span class="nb"></span>
<span class="k">SYMBOL:</span><span class="nb"> </span>str<span class="nb"></span>
<span class="s">&quot;This is what you have&quot;</span><span class="nb"> </span>str<span class="nb"> set</span>

str<span class="nb"> get print</span>
<span class="c">! This is what you have</span><span class="nb"></span>

str<span class="nb"> get</span>
<span class="c">! Top of stack: &quot;This is what you have&quot;</span><span class="nb"></span>

[<span class="nb"> </span><span class="mi">5 </span><span class="nb">head </span>]<span class="nb"> </span>[<span class="nb"> </span><span class="mi">7 </span><span class="nb">tail </span>]<span class="nb"> bi </span><span class="s">&quot;wasn&#39;t&quot;</span><span class="nb"> swap 3append   </span><span class="c">! change &quot;is&quot; to &quot;wasn&#39;t&quot;</span><span class="nb"></span>
<span class="c">! Top of stack: &quot;This wasn&#39;t what you have&quot;</span><span class="nb"></span>

<span class="mi">13 </span><span class="nb">head </span><span class="s">&quot;ondrous&quot;</span><span class="nb"> append    </span><span class="c">! replace last 12 characters</span><span class="nb"></span>
<span class="c">! Top of stack: &quot;This wasn&#39;t wondrous&quot;</span><span class="nb"></span>

<span class="mi">1 </span><span class="nb">tail      </span><span class="c">! delete first character</span><span class="nb"></span>
<span class="c">! Top of stack: &quot;his wasn&#39;t wondrous&quot;</span><span class="nb"></span>

<span class="mi">10 </span>head*<span class="nb">    </span><span class="c">! delete last 10 characters</span><span class="nb"></span>
<span class="c">! Top of stack: &quot;his wasn&#39;&quot;</span><span class="nb"></span>

str<span class="nb"> set</span>
<span class="c">! str = &quot;his wasn&#39;&quot;</span><span class="nb"></span>

str<span class="nb"> get print</span>
<span class="c">! his wasn&#39;</span><span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>
<span class="c">! you can test substrings with &quot;subseq?&quot;</span><span class="nb"></span>

<span class="mi">10 </span>tail*<span class="nb"> </span><span class="s">&quot;substring&quot;</span><span class="nb"> swap </span>subseq?<span class="nb"></span>
<span class="nb">    </span>[<span class="nb"> </span><span class="s">&quot;\&quot;substring\&quot; within the last 10 characters&quot;</span><span class="nb"> print </span>]<span class="nb"></span>
<span class="nb">    when</span>

<span class="c">! substitute &quot;at&quot; for &quot;is&quot;, restricted to first five characters</span><span class="nb"></span>
<span class="kn">USING:</span> <span class="nn">peg</span> <span class="nn">peg.search</span> <span class="k">;</span><span class="nb"></span>

<span class="mi">5 </span><span class="nb">cut </span>&gt;r<span class="nb"> </span><span class="s">&quot;is&quot;</span><span class="nb"> </span>token<span class="nb"> </span>[<span class="nb"> drop </span><span class="s">&quot;at&quot;</span><span class="nb"> </span>]<span class="nb"> </span>action<span class="nb"> </span>replace<span class="nb"> </span>r&gt;<span class="nb"> append</span>

<span class="c">! -----------------------------</span><span class="nb"></span>
<span class="c">! exchange the first and last letters in a string</span><span class="nb"></span>
<span class="s">&quot;make a hat&quot;</span><span class="nb"></span>
<span class="mi">1 </span><span class="nb">cut </span><span class="mi">1 </span>cut*<span class="nb"> </span>spin<span class="nb"> 3append</span>
<span class="nb">print</span>
<span class="c">! take a ham</span><span class="nb"></span>

<span class="c">! -----------------------------</span><span class="nb"></span>

<span class="c">! @@PLEAC@@_1.3</span><span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>
<span class="nb">swap</span>
<span class="c">! -----------------------------</span><span class="nb"></span>

<span class="c">! @@PLEAC@@_1.15</span><span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>
<span class="c">! The &quot;csv&quot; vocabulary allows to parse real CSV</span><span class="nb"></span>

<span class="c">! reading the file &quot;testdata.csv&quot;, UTF-8 encoded, CSV format</span><span class="nb"></span>
<span class="kn">USE:</span> <span class="nn">csv</span><span class="nb"></span>

<span class="s">&quot;testdata.csv&quot;</span><span class="nb"> </span>utf8<span class="nb"> </span>&lt;file-reader&gt;<span class="nb"> </span>csv<span class="nb"></span>
<span class="c">! An array of row arrays is on the top of the stack now.</span><span class="nb"></span>

<span class="c">! -----------------------------</span><span class="nb"></span>
<span class="c">! You could use the word &quot;&lt;string-reader&gt;&quot; to turn a string into a stream.</span><span class="nb"></span>

<span class="kn">USING:</span> <span class="nn">csv</span> <span class="nn">io.streams.string</span> <span class="k">;</span><span class="nb"></span>

<span class="s">&quot;XYZZY,\&quot;\&quot;,\&quot;O&#39;Reilly, Inc\&quot;,\&quot;Wall, Larry\&quot;,\&quot;a \&quot;\&quot;glug\&quot;\&quot; bit,\&quot;,5,\&quot;Error, Core Dumped\&quot;&quot;</span><span class="nb"></span>
<span class="nb">    </span>&lt;string-reader&gt;<span class="nb"> </span>csv<span class="nb"> </span>.<span class="nb"></span>
<span class="c">!    {</span><span class="nb"></span>
<span class="c">!        {</span><span class="nb"></span>
<span class="c">!            &quot;XYZZY&quot;</span><span class="nb"></span>
<span class="c">!            &quot;&quot;</span><span class="nb"></span>
<span class="c">!            &quot;O&#39;Reilly, Inc&quot;</span><span class="nb"></span>
<span class="c">!            &quot;Wall, Larry&quot;</span><span class="nb"></span>
<span class="c">!            &quot;a \&quot;glug\&quot; bit,&quot;</span><span class="nb"></span>
<span class="c">!            &quot;5&quot;</span><span class="nb"></span>
<span class="c">!            &quot;Error, Core Dumped&quot;</span><span class="nb"></span>
<span class="c">!        }</span><span class="nb"></span>
<span class="c">!    }</span><span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>

<span class="c">! @@PLEAC@@_3.0</span><span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>
<span class="c">! All examples use the &quot;calendar&quot; vocabulary</span><span class="nb"></span>
<span class="kn">USE:</span> <span class="nn">calendar</span><span class="nb"></span>

[<span class="nb"> </span><span class="s">&quot;Today is day &quot;</span><span class="nb"> </span>%<span class="nb"> </span>now<span class="nb"> </span>day-of-year<span class="nb"> </span>#<span class="nb"> </span><span class="s">&quot; of the current year.&quot;</span><span class="nb"> </span>%<span class="nb"> </span>]<span class="nb"> </span><span class="s">&quot;&quot;</span><span class="nb"> </span>make<span class="nb"> print</span>
<span class="c">! Today is day 132 of the current year.</span><span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>

<span class="c">! @@PLEAC@@_3.1</span><span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>
now<span class="nb"> </span><span class="c">! puts timestamp on stack</span><span class="nb"></span>

<span class="c">! accessing day</span><span class="nb"></span>
day&gt;&gt;<span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>

<span class="c">! Formatting the date with &quot;calender.format&quot; vocabulary</span><span class="nb"></span>
<span class="kn">USE:</span> <span class="nn">calendar.format</span><span class="nb"></span>

now<span class="nb"> </span>timestamp&gt;rfc3339<span class="nb"></span>
<span class="c">! Top of stack: &quot;2008-05-11T22:39:01+02:00&quot;</span><span class="nb"></span>

now<span class="nb"> </span>timestamp&gt;ymd<span class="nb"></span>
<span class="c">! Top of stack: &quot;2008-05-11&quot;</span><span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>

<span class="c">! @@PLEAC@@_3.2</span><span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>
<span class="c">! Epoch milliseconds</span><span class="nb"></span>
now<span class="nb"> </span>timestamp&gt;millis<span class="nb"></span>
<span class="c">! Top of stack: 1210538827773</span><span class="nb"></span>

<span class="c">! Calculate seconds</span><span class="nb"></span>
<span class="mi">1000 </span><span class="o">/ </span><span class="nb">&gt;integer</span>
<span class="c">! -----------------------------</span><span class="nb"></span>

<span class="c">! GMT milliseconds</span><span class="nb"></span>
gmt<span class="nb"> </span>timestamp&gt;millis<span class="nb"></span>
<span class="c">! Top of Stack: 1210539018199</span><span class="nb"></span>

<span class="c">! @@PLEAC@@_3.3</span><span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>
<span class="c">! Epoch milliseconds to timestamp</span><span class="nb"></span>
<span class="mi">1210538827773 </span>millis&gt;timestamp<span class="nb"></span>

<span class="c">! @@PLEAC@@_3.4</span><span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>
<span class="c">! Durations can be added and substracted with the words &quot;time+&quot; and &quot;time-&quot;</span><span class="nb"></span>
now<span class="nb"> </span><span class="mi">5 </span>days<span class="nb"> </span>time+<span class="nb"> </span>timestamp&gt;ymd<span class="nb"> print</span>
<span class="c">! 2008-05-17</span><span class="nb"></span>
now<span class="nb"> </span><span class="mi">5 </span>days<span class="nb"> </span>time-<span class="nb"> </span>timestamp&gt;ymd<span class="nb"> print</span>
<span class="c">! 2008-05-07</span><span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>
<span class="mi">1973 1 18 3 45 50 </span>gmt-offset-duration<span class="nb"> </span>&lt;timestamp&gt;<span class="nb">   </span><span class="c">! Birthtime</span><span class="nb"></span>
<span class="nb">    </span><span class="mi">0 0 55 2 17 5 </span>&lt;duration&gt;<span class="nb">                        </span><span class="c">! Interval</span><span class="nb"></span>
<span class="nb">    </span>time+<span class="nb"></span>
<span class="nb">    </span>timestamp&gt;string<span class="nb"> </span><span class="s">&quot;Then is &quot;</span><span class="nb"> swap append print</span>
<span class="c">! Then is Wed, 14 Mar 1973 06:02:55</span><span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>
<span class="s">&quot;Nat was 55 days old on: &quot;</span><span class="nb"> </span><span class="mi">1973 1 18 </span>&lt;date&gt;<span class="nb"> </span><span class="mi">55 </span>days<span class="nb"> </span>time+<span class="nb"> </span>timestamp&gt;ymd<span class="nb"> append print</span>
<span class="c">! Nat was 55 days old on: 1973-03-14</span><span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>

<span class="c">! @@PLEAC@@_3.5</span><span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>
<span class="c">! Timestamps can be substracted from each other with &quot;time-&quot;. You get a duration,</span><span class="nb"></span>
<span class="c">! which can be converted to the number of seconds, minutes, etc.</span><span class="nb"></span>
now<span class="nb"> </span><span class="mi">5 </span>days<span class="nb"> </span>time-<span class="nb">        </span><span class="c">! 5 days before</span><span class="nb"></span>
<span class="nb">    </span>now<span class="nb"> </span><span class="mi">5 </span>days<span class="nb"> </span>time+<span class="nb">    </span><span class="c">! in 5 days</span><span class="nb"></span>
<span class="nb">    </span>time-<span class="nb">               </span><span class="c">! substracting the two timestamps</span><span class="nb"></span>
<span class="nb">    </span>dt&gt;days<span class="nb"> </span>.<span class="nb">           </span><span class="c">! converting duration to number of days and prettyprinting it.</span><span class="nb"></span>
<span class="c">! -10</span><span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>
<span class="c">! Putting duration since lunar landing onto the stack:</span><span class="nb"></span>
now<span class="nb"></span>
<span class="nb">    </span><span class="mi">1969 7 20 20 17 40 </span>instant<span class="nb"> </span>&lt;timestamp&gt;<span class="nb">   </span><span class="c">! 1969-07-20 20:17:40 UTC</span><span class="nb"></span>
<span class="nb">    </span>time-<span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>
<span class="kn">USING:</span> <span class="nn">calendar</span> <span class="nn">math.parser</span> <span class="k">;</span><span class="nb"></span>
<span class="mi">1981 6 16 4 35 25 </span>instant<span class="nb"> </span>&lt;timestamp&gt;<span class="nb">   </span><span class="c">! 16 Jun 1981, 4:35:25 UTC, Bree</span><span class="nb"></span>
<span class="mi">1973 1 18 3 45 50 </span>instant<span class="nb"> </span>&lt;timestamp&gt;<span class="nb">   </span><span class="c">! 18 Jan 1973, 3:45:50 UTC, Nat</span><span class="nb"></span>
time-<span class="nb"></span>
dt&gt;seconds<span class="nb"></span>
<span class="nb">dup     </span><span class="c">! Duplicates top of stack so we can use it later again.</span><span class="nb"></span>

[<span class="nb"> </span><span class="s">&quot;There were &quot;</span><span class="nb"> </span>%<span class="nb"> </span>#<span class="nb"> </span><span class="s">&quot; seconds between Nat and Bree&quot;</span><span class="nb"> </span>%<span class="nb"> </span>]<span class="nb"> </span><span class="s">&quot;&quot;</span><span class="nb"> </span>make<span class="nb"> print</span>
<span class="c">! There were 265337375 seconds between Nat and Bree</span><span class="nb"></span>

[<span class="nb"> dup </span><span class="mi">60 </span><span class="nb">mod dup </span>,<span class="nb"> </span><span class="c">! seconds</span><span class="nb"></span>
<span class="nb">  </span><span class="o">- </span><span class="mi">60 </span><span class="o">/ </span><span class="nb"> </span><span class="c">! rest in minutes</span><span class="nb"></span>
<span class="nb">  dup </span><span class="mi">60 </span><span class="nb">mod dup </span>,<span class="nb"> </span><span class="c">! minutes</span><span class="nb"></span>
<span class="nb">  </span><span class="o">- </span><span class="mi">60 </span><span class="o">/ </span><span class="nb"> </span><span class="c">! rest in hours</span><span class="nb"></span>
<span class="nb">  dup </span><span class="mi">24 </span><span class="nb">mod dup </span>,<span class="nb"> </span><span class="c">! hours</span><span class="nb"></span>
<span class="nb">  </span><span class="o">- </span><span class="mi">24 </span><span class="o">/ </span><span class="nb"> </span><span class="c">! rest in days</span><span class="nb"></span>
<span class="nb">  dup </span><span class="mi">7 </span><span class="nb">mod dup </span>,<span class="nb"> </span><span class="c">! days</span><span class="nb"></span>
<span class="nb">  </span><span class="o">- </span><span class="mi">7 </span><span class="o">/ </span>,<span class="nb"> </span><span class="c">! weeks</span><span class="nb"></span>
]<span class="nb"> </span>{<span class="nb"> </span>}<span class="nb"> </span>make<span class="nb"></span>

[<span class="nb"> </span>[<span class="nb"> </span><span class="s">&quot;(&quot;</span><span class="nb"> </span>%<span class="nb"> </span>#<span class="nb"> </span><span class="s">&quot; weeks, &quot;</span><span class="nb"> </span>%<span class="nb"> </span>#<span class="nb"> </span><span class="s">&quot; days, &quot;</span><span class="nb"> </span>%<span class="nb"> </span>#<span class="nb"> </span><span class="s">&quot;:&quot;</span><span class="nb"> </span>%<span class="nb"> </span>#<span class="nb"> </span><span class="s">&quot;:&quot;</span><span class="nb"> </span>%<span class="nb"> </span>#<span class="nb"> </span><span class="s">&quot;)&quot;</span><span class="nb"> </span>%<span class="nb"> </span>]<span class="nb"> </span><span class="s">&quot;&quot;</span><span class="nb"> </span>make<span class="nb"> </span>]<span class="nb"> with-datastack</span>
<span class="nb">first print</span>
<span class="c">! (438 weeks, 5 days, 0:49:35)</span><span class="nb"></span>

<span class="c">! -----------------------------</span><span class="nb"></span>
<span class="mi">1981 6 16 </span>&lt;date&gt;<span class="nb">    </span><span class="c">! 16 Jun 1981, Bree</span><span class="nb"></span>
<span class="mi">1973 1 18 </span>&lt;date&gt;<span class="nb">    </span><span class="c">! 18 Jan 1973, Nat</span><span class="nb"></span>
time-<span class="nb"></span>
dt&gt;days<span class="nb"></span>
[<span class="nb"> </span><span class="s">&quot;There were &quot;</span><span class="nb"> </span>%<span class="nb"> </span>#<span class="nb"> </span><span class="s">&quot; days between Nat and Bree&quot;</span><span class="nb"> </span>%<span class="nb"> </span>]<span class="nb"> </span><span class="s">&quot;&quot;</span><span class="nb"> </span>make<span class="nb"> print</span>
<span class="c">! There were 3071 days between Nat and Bree</span><span class="nb"></span>
<span class="c">! -----------------------------</span><span class="nb"></span>
</pre></div>
</body>
</html>
