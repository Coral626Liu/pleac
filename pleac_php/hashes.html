<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Hashes</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="PLEAC-PHP"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Arrays"
HREF="arrays.html"><LINK
REL="NEXT"
TITLE="Pattern Matching"
HREF="patternmatching.html"><style type="text/css">td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
pre { line-height: 125%; }

  </style></head
><BODY TEXT="#cecece" BGCOLOR="#4f6f6f" LINK="#f5deb3" VLINK="#d5ae83"
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PLEAC-PHP</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="arrays.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="patternmatching.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="HASHES"
>5. Hashes</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN232"
>Introduction</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// PHP uses the term &#39;array&#39; to refer to associative arrays - referred to in Perl</span>
<span class="c1">// as &#39;hashes&#39; - and for the sake of avoiding confusion, the Perl terminology will</span>
<span class="c1">// be used. As a matter of interest, PHP does not sport a vector, matrix, or list</span>
<span class="c1">// type: the &#39;array&#39; [Perl &#39;hash&#39;] serves all these roles</span>

<span class="nv">$age</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Nat&#39;</span> <span class="o">=&gt;</span> <span class="mi">24</span><span class="p">,</span> <span class="s1">&#39;Jules&#39;</span> <span class="o">=&gt;</span> <span class="mi">25</span><span class="p">,</span> <span class="s1">&#39;Josh&#39;</span> <span class="o">=&gt;</span> <span class="mi">17</span><span class="p">);</span>

<span class="nv">$age</span><span class="p">[</span><span class="s1">&#39;Nat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">24</span><span class="p">;</span>
<span class="nv">$age</span><span class="p">[</span><span class="s1">&#39;Jules&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">25</span><span class="p">;</span>
<span class="nv">$age</span><span class="p">[</span><span class="s1">&#39;Josh&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">17</span><span class="p">;</span>

<span class="nv">$age</span> <span class="o">=</span> <span class="nb">array_combine</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;Nat&#39;</span><span class="p">,</span> <span class="s1">&#39;Jules&#39;</span><span class="p">,</span> <span class="s1">&#39;Josh&#39;</span><span class="p">),</span> <span class="k">array</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">17</span><span class="p">));</span>

<span class="c1">// ------------</span>

<span class="nv">$food_colour</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Apple&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;Banana&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;Lemon&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;Carrot&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;orange&#39;</span><span class="p">);</span>

<span class="nv">$food_colour</span><span class="p">[</span><span class="s1">&#39;Apple&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">;</span> <span class="nv">$food_colour</span><span class="p">[</span><span class="s1">&#39;Banana&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;yellow&#39;</span><span class="p">;</span>
<span class="nv">$food_colour</span><span class="p">[</span><span class="s1">&#39;Lemon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;yellow&#39;</span><span class="p">;</span> <span class="nv">$food_colour</span><span class="p">[</span><span class="s1">&#39;Carrot&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;orange&#39;</span><span class="p">;</span>

<span class="nv">$food_colour</span> <span class="o">=</span> <span class="nb">array_combine</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;Apple&#39;</span><span class="p">,</span> <span class="s1">&#39;Banana&#39;</span><span class="p">,</span> <span class="s1">&#39;Lemon&#39;</span><span class="p">,</span> <span class="s1">&#39;Carrot&#39;</span><span class="p">),</span>
                             <span class="k">array</span><span class="p">(</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">));</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN235"
>Adding an Element to a Hash</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nv">$hash</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span>

<span class="c1">// ------------</span>

<span class="nv">$food_colour</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Apple&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;Banana&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;Lemon&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;Carrot&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;orange&#39;</span><span class="p">);</span>

<span class="nv">$food_colour</span><span class="p">[</span><span class="s1">&#39;Raspberry&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;pink&#39;</span><span class="p">;</span>

<span class="k">echo</span> <span class="s2">&quot;Known foods:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="k">foreach</span><span class="p">(</span><span class="nv">$food_colour</span> <span class="k">as</span> <span class="nv">$food</span> <span class="o">=&gt;</span> <span class="nv">$colour</span><span class="p">)</span> <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">{</span><span class="nv">$food</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN238"
>Testing for the Presence of a Key in a Hash</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// Returns TRUE on all existing entries with non-NULL values</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$hash</span><span class="p">[</span><span class="nv">$key</span><span class="p">]))</span>
  <span class="p">;</span> <span class="c1">// entry exists  </span>
<span class="k">else</span>
  <span class="p">;</span> <span class="c1">// no such entry </span>

<span class="c1">// ------------</span>

<span class="c1">// Returns TRUE on all existing entries regardless of attached value</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">array_key_exists</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nv">$hash</span><span class="p">))</span>
  <span class="p">;</span> <span class="c1">// entry exists  </span>
<span class="k">else</span>
  <span class="p">;</span> <span class="c1">// no such entry </span>

<span class="c1">// ----------------------------</span>

<span class="nv">$food_colour</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Apple&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;Banana&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;Lemon&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;Carrot&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;orange&#39;</span><span class="p">);</span>

<span class="k">foreach</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;Banana&#39;</span><span class="p">,</span> <span class="s1">&#39;Martini&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$name</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$food_colour</span><span class="p">[</span><span class="nv">$name</span><span class="p">]))</span>
    <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">{</span><span class="nv">$name</span><span class="si">}</span><span class="s2"> is a food.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
  <span class="k">else</span>
    <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">{</span><span class="nv">$name</span><span class="si">}</span><span class="s2"> is a drink.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// ----------------------------</span>

<span class="nv">$age</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Toddler&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Unborn&#39;</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Phantasm&#39;</span> <span class="o">=&gt;</span> <span class="k">NULL</span><span class="p">);</span>

<span class="k">foreach</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;Toddler&#39;</span><span class="p">,</span> <span class="s1">&#39;Unborn&#39;</span><span class="p">,</span> <span class="s1">&#39;Phantasm&#39;</span><span class="p">,</span> <span class="s1">&#39;Relic&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$thing</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">{</span><span class="nv">$thing</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">array_key_exists</span><span class="p">(</span><span class="nv">$thing</span><span class="p">,</span> <span class="nv">$age</span><span class="p">))</span> <span class="k">echo</span> <span class="s1">&#39; exists&#39;</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$age</span><span class="p">[</span><span class="nv">$thing</span><span class="p">]))</span> <span class="k">echo</span> <span class="s1">&#39; non-NULL&#39;</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nv">$age</span><span class="p">[</span><span class="nv">$thing</span><span class="p">])</span> <span class="k">echo</span> <span class="s1">&#39; TRUE&#39;</span><span class="p">;</span>
  <span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN241"
>Deleting from a Hash</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// Remove one, or more, hash entries</span>
<span class="nb">unset</span><span class="p">(</span><span class="nv">$hash</span><span class="p">[</span><span class="nv">$key</span><span class="p">]);</span>

<span class="nb">unset</span><span class="p">(</span><span class="nv">$hash</span><span class="p">[</span><span class="nv">$key1</span><span class="p">],</span> <span class="nv">$hash</span><span class="p">[</span><span class="nv">$key2</span><span class="p">],</span> <span class="nv">$hash</span><span class="p">[</span><span class="nv">$key3</span><span class="p">]);</span>

<span class="c1">// Remove entire hash</span>
<span class="nb">unset</span><span class="p">(</span><span class="nv">$hash</span><span class="p">);</span>

<span class="c1">// ----------------------------</span>

<span class="k">function</span> <span class="nf">print_foods</span><span class="p">()</span>
<span class="p">{</span>
  <span class="c1">// Perl example uses a global variable</span>
  <span class="k">global</span> <span class="nv">$food_colour</span><span class="p">;</span>

  <span class="nv">$foods</span> <span class="o">=</span> <span class="nb">array_keys</span><span class="p">(</span><span class="nv">$food_colour</span><span class="p">);</span>

  <span class="k">echo</span> <span class="s1">&#39;Foods:&#39;</span><span class="p">;</span>
  <span class="k">foreach</span><span class="p">(</span><span class="nv">$foods</span> <span class="k">as</span> <span class="nv">$food</span><span class="p">)</span> <span class="k">echo</span> <span class="s2">&quot; </span><span class="si">{</span><span class="nv">$food</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>

  <span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Values:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
  <span class="k">foreach</span><span class="p">(</span><span class="nv">$foods</span> <span class="k">as</span> <span class="nv">$food</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="nv">$colour</span> <span class="o">=</span> <span class="nv">$food_colour</span><span class="p">[</span><span class="nv">$food</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$colour</span><span class="p">))</span>
      <span class="k">echo</span> <span class="s2">&quot;  </span><span class="si">{</span><span class="nv">$colour</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="k">else</span>
      <span class="k">echo</span> <span class="s2">&quot;  nullified or removed</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// ------------</span>

<span class="nv">$food_colour</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Apple&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;Banana&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;Lemon&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;Carrot&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;orange&#39;</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">&quot;Initially:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nx">print_foods</span><span class="p">();</span>

<span class="c1">// Nullify an entry</span>
<span class="nv">$food_colour</span><span class="p">[</span><span class="s1">&#39;Banana&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">NULL</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">With &#39;Banana&#39; nullified</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nx">print_foods</span><span class="p">();</span>

<span class="c1">// Remove an entry</span>
<span class="nb">unset</span><span class="p">(</span><span class="nv">$food_colour</span><span class="p">[</span><span class="s1">&#39;Banana&#39;</span><span class="p">]);</span>
<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">With &#39;Banana&#39; removed</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nx">print_foods</span><span class="p">();</span>

<span class="c1">// Destroy the hash</span>
<span class="nb">unset</span><span class="p">(</span><span class="nv">$food_colour</span><span class="p">);</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN244"
>Traversing a Hash</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// Access keys and values</span>
<span class="k">foreach</span><span class="p">(</span><span class="nv">$hash</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span>
<span class="p">{</span>
  <span class="p">;</span> <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// Access keys only</span>
<span class="k">foreach</span><span class="p">(</span><span class="nb">array_keys</span><span class="p">(</span><span class="nv">$hash</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$key</span><span class="p">)</span>
<span class="p">{</span>
  <span class="p">;</span> <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// Access values only</span>
<span class="k">foreach</span><span class="p">(</span><span class="nv">$hash</span> <span class="k">as</span> <span class="nv">$value</span><span class="p">)</span>
<span class="p">{</span>
  <span class="p">;</span> <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// ----------------------------</span>

<span class="nv">$food_colour</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Apple&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;Banana&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;Lemon&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;Carrot&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;orange&#39;</span><span class="p">);</span>

<span class="k">foreach</span><span class="p">(</span><span class="nv">$food_colour</span> <span class="k">as</span> <span class="nv">$food</span> <span class="o">=&gt;</span> <span class="nv">$colour</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">{</span><span class="nv">$food</span><span class="si">}</span><span class="s2"> is </span><span class="si">{</span><span class="nv">$colour</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">foreach</span><span class="p">(</span><span class="nb">array_keys</span><span class="p">(</span><span class="nv">$food_colour</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$food</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">{</span><span class="nv">$food</span><span class="si">}</span><span class="s2"> is </span><span class="si">{</span><span class="nv">$food_colour</span><span class="p">[</span><span class="nv">$food</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// ----------------------------</span>

<span class="c1">// &#39;countfrom&#39; - count number of messages from each sender</span>

<span class="nv">$line</span> <span class="o">=</span> <span class="nb">fgets</span><span class="p">(</span><span class="nx">STDIN</span><span class="p">);</span>

<span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="nb">feof</span><span class="p">(</span><span class="nx">STDIN</span><span class="p">))</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^From: (.*)/&#39;</span><span class="p">,</span> <span class="nv">$line</span><span class="p">,</span> <span class="nv">$matches</span><span class="p">))</span>
  <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$from</span><span class="p">[</span><span class="nv">$matches</span><span class="p">[</span><span class="mi">1</span><span class="p">]]))</span>
      <span class="nv">$from</span><span class="p">[</span><span class="nv">$matches</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">else</span>
      <span class="nv">$from</span><span class="p">[</span><span class="nv">$matches</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nv">$line</span> <span class="o">=</span> <span class="nb">fgets</span><span class="p">(</span><span class="nx">STDIN</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$from</span><span class="p">))</span>
<span class="p">{</span>
  <span class="k">echo</span> <span class="s2">&quot;Senders:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>  
  <span class="k">foreach</span><span class="p">(</span><span class="nv">$from</span> <span class="k">as</span> <span class="nv">$sender</span> <span class="o">=&gt;</span> <span class="nv">$count</span><span class="p">)</span> <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">{</span><span class="nv">$sender</span><span class="si">}</span><span class="s2"> : </span><span class="si">{</span><span class="nv">$count</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
  <span class="k">echo</span> <span class="s2">&quot;No valid data entered</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN247"
>Printing a Hash</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// PHP offers, &#39;print_r&#39;, which prints hash contents in &#39;debug&#39; form; it also</span>
<span class="c1">// works recursively, printing any contained arrays in similar form</span>
<span class="c1">//     Array</span>
<span class="c1">//     (</span>
<span class="c1">//         [key1] =&gt; value1 </span>
<span class="c1">//         [key2] =&gt; value2</span>
<span class="c1">//         ...</span>
<span class="c1">//     )</span>

<span class="nb">print_r</span><span class="p">(</span><span class="nv">$hash</span><span class="p">);</span>

<span class="c1">// ------------</span>

<span class="c1">// Based on Perl example; non-recursive, so contained arrays not printed correctly</span>
<span class="k">foreach</span><span class="p">(</span><span class="nv">$hash</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">{</span><span class="nv">$key</span><span class="si">}</span><span class="s2"> =&gt; </span><span class="si">$value</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// ----------------------------</span>

<span class="c1">// Sorted by keys</span>

<span class="c1">// 1. Sort the original hash</span>
<span class="nb">ksort</span><span class="p">(</span><span class="nv">$hash</span><span class="p">);</span>

<span class="c1">// 2. Extract keys, sort, traverse original in key order</span>
<span class="nv">$keys</span> <span class="o">=</span> <span class="nb">array_keys</span><span class="p">(</span><span class="nv">$hash</span><span class="p">);</span> <span class="nb">sort</span><span class="p">(</span><span class="nv">$keys</span><span class="p">);</span>

<span class="k">foreach</span><span class="p">(</span><span class="nv">$keys</span> <span class="k">as</span> <span class="nv">$key</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">{</span><span class="nv">$key</span><span class="si">}</span><span class="s2"> =&gt; </span><span class="si">{</span><span class="nv">$hash</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Sorted by values</span>

<span class="c1">// 1. Sort the original hash</span>
<span class="nb">asort</span><span class="p">(</span><span class="nv">$hash</span><span class="p">);</span>

<span class="c1">// 2. Extract values, sort, traverse original in value order [warning: finds </span>
<span class="c1">//    only first matching key in the case where duplicate values exist]</span>
<span class="nv">$values</span> <span class="o">=</span> <span class="nb">array_values</span><span class="p">(</span><span class="nv">$hash</span><span class="p">);</span> <span class="nb">sort</span><span class="p">(</span><span class="nv">$values</span><span class="p">);</span>

<span class="k">foreach</span><span class="p">(</span><span class="nv">$values</span> <span class="k">as</span> <span class="nv">$value</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">echo</span> <span class="nv">$value</span> <span class="o">.</span> <span class="s1">&#39; &lt;= &#39;</span> <span class="o">.</span> <span class="nb">array_search</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$hash</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN250"
>Retrieving from a Hash in Insertion Order</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// Unless sorted, hash elements remain in the order of insertion. If care is taken to</span>
<span class="c1">// always add a new element to the end of the hash, then element order is the order</span>
<span class="c1">// of insertion. The following function, &#39;array_push_associative&#39; [modified from original</span>
<span class="c1">// found at &#39;array_push&#39; section of PHP documentation], does just that</span>
<span class="k">function</span> <span class="nf">array_push_associative</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$arr</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">foreach</span> <span class="p">(</span><span class="nb">func_get_args</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$arg</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$arg</span><span class="p">))</span>
      <span class="k">foreach</span> <span class="p">(</span><span class="nv">$arg</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span> <span class="nv">$arr</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span> <span class="nv">$ret</span><span class="o">++</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">else</span>
      <span class="nv">$arr</span><span class="p">[</span><span class="nv">$arg</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nv">$ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// ------------</span>

<span class="nv">$food_colour</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

<span class="c1">// Individual calls, or ...</span>
<span class="nx">array_push_associative</span><span class="p">(</span><span class="nv">$food_colour</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Banana&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Yellow&#39;</span><span class="p">));</span>
<span class="nx">array_push_associative</span><span class="p">(</span><span class="nv">$food_colour</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Apple&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Green&#39;</span><span class="p">));</span>
<span class="nx">array_push_associative</span><span class="p">(</span><span class="nv">$food_colour</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Lemon&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Yellow&#39;</span><span class="p">));</span>

<span class="c1">// ... one call, one array; physical order retained</span>
<span class="c1">// array_push_associative($food_colour, array(&#39;Banana&#39; =&gt; &#39;Yellow&#39;, &#39;Apple&#39; =&gt; &#39;Green&#39;, &#39;Lemon&#39; =&gt; &#39;Yellow&#39;));</span>

<span class="nb">print_r</span><span class="p">(</span><span class="nv">$food_colour</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">In insertion order:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="k">foreach</span><span class="p">(</span><span class="nv">$food_colour</span> <span class="k">as</span> <span class="nv">$food</span> <span class="o">=&gt;</span> <span class="nv">$colour</span><span class="p">)</span> <span class="k">echo</span> <span class="s2">&quot;  </span><span class="si">{</span><span class="nv">$food</span><span class="si">}</span><span class="s2"> =&gt; </span><span class="si">{</span><span class="nv">$colour</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="nv">$foods</span> <span class="o">=</span> <span class="nb">array_keys</span><span class="p">(</span><span class="nv">$food_colour</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Still in insertion order:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="k">foreach</span><span class="p">(</span><span class="nv">$foods</span> <span class="k">as</span> <span class="nv">$food</span><span class="p">)</span> <span class="k">echo</span> <span class="s2">&quot;  </span><span class="si">{</span><span class="nv">$food</span><span class="si">}</span><span class="s2"> =&gt; </span><span class="si">{</span><span class="nv">$food_colour</span><span class="p">[</span><span class="nv">$food</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN253"
>Hashes with Multiple Values Per Key</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="k">foreach</span><span class="p">(</span><span class="nb">array_slice</span><span class="p">(</span><span class="nb">preg_split</span><span class="p">(</span><span class="s1">&#39;/\n/&#39;</span><span class="p">,</span> <span class="sb">`who`</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$entry</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">list</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$tty</span><span class="p">)</span> <span class="o">=</span> <span class="nb">preg_split</span><span class="p">(</span><span class="s1">&#39;/\s/&#39;</span><span class="p">,</span> <span class="nv">$entry</span><span class="p">);</span>
  <span class="nv">$ttys</span><span class="p">[</span><span class="nv">$user</span><span class="p">][]</span> <span class="o">=</span> <span class="nv">$tty</span><span class="p">;</span>

  <span class="c1">// Could instead do this:</span>
  <span class="c1">// $user = array_slice(preg_split(&#39;/\s/&#39;, $entry), 0, 2);</span>
  <span class="c1">// $ttys[$user[0]][] = $user[1];</span>
<span class="p">}</span>

<span class="nb">ksort</span><span class="p">(</span><span class="nv">$ttys</span><span class="p">);</span>

<span class="c1">// ------------</span>

<span class="k">foreach</span><span class="p">(</span><span class="nv">$ttys</span> <span class="k">as</span> <span class="nv">$user</span> <span class="o">=&gt;</span> <span class="nv">$all_ttys</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">{</span><span class="nv">$user</span><span class="si">}</span><span class="s2">: &quot;</span> <span class="o">.</span> <span class="nb">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="nv">$all_ttys</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// ------------</span>

<span class="k">foreach</span><span class="p">(</span><span class="nv">$ttys</span> <span class="k">as</span> <span class="nv">$user</span> <span class="o">=&gt;</span> <span class="nv">$all_ttys</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">{</span><span class="nv">$user</span><span class="si">}</span><span class="s2">: &quot;</span> <span class="o">.</span> <span class="nb">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="nv">$all_ttys</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

  <span class="k">foreach</span><span class="p">(</span><span class="nv">$all_ttys</span> <span class="k">as</span> <span class="nv">$tty</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="nv">$stat</span> <span class="o">=</span> <span class="nb">stat</span><span class="p">(</span><span class="s1">&#39;/dev/$tty&#39;</span><span class="p">);</span>
    <span class="nv">$pwent</span> <span class="o">=</span> <span class="nb">posix_getpwuid</span><span class="p">(</span><span class="nv">$stat</span><span class="p">[</span><span class="s1">&#39;uid&#39;</span><span class="p">]);</span>
    <span class="nv">$user</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$pwent</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span> <span class="o">?</span> <span class="nv">$pwent</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">:</span> <span class="s1">&#39;Not available&#39;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">{</span><span class="nv">$tty</span><span class="si">}</span><span class="s2"> owned by: </span><span class="si">{</span><span class="nv">$user</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN256"
>Inverting a Hash</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// PHP offers the &#39;array_flip&#39; function to perform the task of exchanging the keys / values</span>
<span class="c1">// of a hash i.e. invert or &#39;flip&#39; a hash</span>

<span class="nv">$reverse</span> <span class="o">=</span> <span class="nb">array_flip</span><span class="p">(</span><span class="nv">$hash</span><span class="p">);</span>

<span class="c1">// ----------------------------</span>

<span class="nv">$surname</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Babe&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Ruth&#39;</span><span class="p">,</span> <span class="s1">&#39;Mickey&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Mantle&#39;</span><span class="p">);</span> 
<span class="nv">$first_name</span> <span class="o">=</span> <span class="nb">array_flip</span><span class="p">(</span><span class="nv">$surname</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">&quot;</span><span class="si">{</span><span class="nv">$first_name</span><span class="p">[</span><span class="s1">&#39;Mantle&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// ----------------------------</span>

<span class="nv">$argc</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">||</span> <span class="k">die</span><span class="p">(</span><span class="s2">&quot;usage: </span><span class="si">{</span><span class="nv">$argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> food|colour</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>

<span class="nv">$given</span> <span class="o">=</span> <span class="nv">$argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

<span class="nv">$colour</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Apple&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;Banana&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Lemon&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;Carrot&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;orange&#39;</span><span class="p">);</span>

<span class="nv">$food</span> <span class="o">=</span> <span class="nb">array_flip</span><span class="p">(</span><span class="nv">$colour</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$colour</span><span class="p">[</span><span class="nv">$given</span><span class="p">]))</span>
  <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">{</span><span class="nv">$given</span><span class="si">}</span><span class="s2"> is a food with colour: </span><span class="si">{</span><span class="nv">$colour</span><span class="p">[</span><span class="nv">$given</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$food</span><span class="p">[</span><span class="nv">$given</span><span class="p">]))</span>
  <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">{</span><span class="nv">$food</span><span class="p">[</span><span class="nv">$given</span><span class="p">]</span><span class="si">}</span><span class="s2"> is a food with colour: </span><span class="si">{</span><span class="nv">$given</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// ----------------------------</span>

<span class="nv">$food_colour</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Apple&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;Banana&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;Lemon&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;Carrot&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;orange&#39;</span><span class="p">);</span>

<span class="k">foreach</span><span class="p">(</span><span class="nv">$food_colour</span> <span class="k">as</span> <span class="nv">$food</span> <span class="o">=&gt;</span> <span class="nv">$colour</span><span class="p">)</span>
<span class="p">{</span>
  <span class="nv">$foods_with_colour</span><span class="p">[</span><span class="nv">$colour</span><span class="p">][]</span> <span class="o">=</span> <span class="nv">$food</span><span class="p">;</span>
<span class="p">}</span>

<span class="nv">$colour</span> <span class="o">=</span> <span class="s1">&#39;yellow&#39;</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">&quot;foods with colour </span><span class="si">{</span><span class="nv">$colour</span><span class="si">}</span><span class="s2"> were: &quot;</span> <span class="o">.</span> <span class="nb">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="nv">$foods_with_colour</span><span class="p">[</span><span class="nv">$colour</span><span class="p">])</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN259"
>Sorting a Hash</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// PHP implements a swag of sorting functions, most designed to work with numerically-indexed</span>
<span class="c1">// arrays. For sorting hashes, the &#39;key&#39; sorting functions are required:</span>
<span class="c1">// * &#39;ksort&#39;, &#39;krsort&#39;, &#39;uksort&#39;</span>

<span class="c1">// Ascending order</span>
<span class="nb">ksort</span><span class="p">(</span><span class="nv">$hash</span><span class="p">);</span>

<span class="c1">// Descending order [i.e. reverse sort]</span>
<span class="nb">krsort</span><span class="p">(</span><span class="nv">$hash</span><span class="p">);</span>

<span class="c1">// Comparator-based sort</span>

<span class="k">function</span> <span class="nf">comparator</span><span class="p">(</span><span class="nv">$left</span><span class="p">,</span> <span class="nv">$right</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">// Compare left key with right key</span>
  <span class="k">return</span> <span class="nv">$left</span> <span class="o">&gt;</span> <span class="nv">$right</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">uksort</span><span class="p">(</span><span class="nv">$hash</span><span class="p">,</span> <span class="s1">&#39;comparator&#39;</span><span class="p">);</span>

<span class="c1">// ----------------------------</span>

<span class="nv">$food_colour</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Apple&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;Banana&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;Lemon&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;Carrot&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;orange&#39;</span><span class="p">);</span>

<span class="c1">// ------------</span>

<span class="nb">ksort</span><span class="p">(</span><span class="nv">$food_colour</span><span class="p">);</span>

<span class="k">foreach</span><span class="p">(</span><span class="nv">$food_colour</span> <span class="k">as</span> <span class="nv">$food</span> <span class="o">=&gt;</span> <span class="nv">$colour</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">{</span><span class="nv">$food</span><span class="si">}</span><span class="s2"> is </span><span class="si">{</span><span class="nv">$colour</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// ------------</span>

<span class="nb">uksort</span><span class="p">(</span><span class="nv">$food_colour</span><span class="p">,</span> <span class="nb">create_function</span><span class="p">(</span><span class="s1">&#39;$left, $right&#39;</span><span class="p">,</span> <span class="s1">&#39;return $left &gt; $right;&#39;</span><span class="p">));</span>

<span class="k">foreach</span><span class="p">(</span><span class="nv">$food_colour</span> <span class="k">as</span> <span class="nv">$food</span> <span class="o">=&gt;</span> <span class="nv">$colour</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">{</span><span class="nv">$food</span><span class="si">}</span><span class="s2"> is </span><span class="si">{</span><span class="nv">$colour</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN262"
>Merging Hashes</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// PHP offers the &#39;array_merge&#39; function for this task [a related function, &#39;array_combine&#39;,</span>
<span class="c1">// may be used to create a hash from an array of keys, and one of values, respectively]</span>

<span class="c1">// Merge two, or more, arrays</span>
<span class="nv">$merged</span> <span class="o">=</span> <span class="nb">array_merge</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">,</span> <span class="nv">$c</span><span class="p">);</span>

<span class="c1">// Create a hash from array of keys, and of values, respectively</span>
<span class="nv">$hash</span> <span class="o">=</span> <span class="nb">array_combine</span><span class="p">(</span><span class="nv">$keys</span><span class="p">,</span> <span class="nv">$values</span><span class="p">);</span>

<span class="c1">// ------------</span>

<span class="c1">// Can always merge arrays manually </span>
<span class="k">foreach</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="nv">$h1</span><span class="p">,</span> <span class="nv">$h2</span><span class="p">,</span> <span class="nv">$h3</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$hash</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">foreach</span><span class="p">(</span><span class="nv">$hash</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="c1">// If same-key values differ, only latest retained</span>
    <span class="nv">$merged</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span>

    <span class="c1">// Do this to append values for that key</span>
    <span class="c1">// $merged[$key][] = $value;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// ----------------------------</span>

<span class="nv">$food_colour</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Apple&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;Banana&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;Lemon&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;Carrot&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;orange&#39;</span><span class="p">);</span>

<span class="nv">$drink_colour</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Galliano&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;Mai Tai&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;blue&#39;</span><span class="p">);</span>

<span class="c1">// ------------</span>

<span class="nv">$ingested_colour</span> <span class="o">=</span> <span class="nb">array_merge</span><span class="p">(</span><span class="nv">$food_colour</span><span class="p">,</span> <span class="nv">$drink_colour</span><span class="p">);</span>

<span class="c1">// ------------</span>

<span class="nv">$substance_colour</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

<span class="k">foreach</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="nv">$food_colour</span><span class="p">,</span> <span class="nv">$drink_colour</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$hash</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">foreach</span><span class="p">(</span><span class="nv">$hash</span> <span class="k">as</span> <span class="nv">$substance</span> <span class="o">=&gt;</span> <span class="nv">$colour</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">array_key_exists</span><span class="p">(</span><span class="nv">$substance</span><span class="p">,</span> <span class="nv">$substance_colour</span><span class="p">))</span>
    <span class="p">{</span>
      <span class="k">echo</span> <span class="s2">&quot;Warning </span><span class="si">{</span><span class="nv">$substance_colour</span><span class="p">[</span><span class="nv">$substance</span><span class="p">]</span><span class="si">}</span><span class="s2"> seen twice. Using first definition.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
      <span class="k">continue</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nv">$substance_colour</span><span class="p">[</span><span class="nv">$substance</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$colour</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN265"
>Finding Common or Different Keys in Two Hashes</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// PHP offers a number of array-based &#39;set operation&#39; functions:</span>
<span class="c1">// * union:        array_merge</span>
<span class="c1">// * intersection: array_intersect and family</span>
<span class="c1">// * difference:   array_diff and family</span>
<span class="c1">// which may be used for this type of task</span>

<span class="c1">// Keys occurring in both hashes</span>
<span class="nv">$common</span> <span class="o">=</span> <span class="nb">array_intersect_key</span><span class="p">(</span><span class="nv">$h1</span><span class="p">,</span> <span class="nv">$h2</span><span class="p">);</span>

<span class="c1">// Keys occurring in the first hash [left side], but not in the second hash</span>
<span class="nv">$this_not_that</span> <span class="o">=</span> <span class="nb">array_diff_key</span><span class="p">(</span><span class="nv">$h1</span><span class="p">,</span> <span class="nv">$h2</span><span class="p">);</span>

<span class="c1">// ----------------------------</span>

<span class="nv">$food_colour</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Apple&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;Banana&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;Lemon&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;Carrot&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;orange&#39;</span><span class="p">);</span>

<span class="nv">$citrus_colour</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Lemon&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;Orange&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="s1">&#39;Lime&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;green&#39;</span><span class="p">);</span>

<span class="nv">$non_citrus</span> <span class="o">=</span> <span class="nb">array_diff_key</span><span class="p">(</span><span class="nv">$food_colour</span><span class="p">,</span> <span class="nv">$citrus_colour</span><span class="p">);</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN268"
>Hashing References</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// PHP implements a special type known as a &#39;resource&#39; that encompasses things like file handles,</span>
<span class="c1">// sockets, database connections, and many others. The &#39;resource&#39; type is, essentially, a</span>
<span class="c1">// reference variable that is not readily serialisable. That is to say:</span>
<span class="c1">// * A &#39;resource&#39; may be converted to a string representation via the &#39;var_export&#39; function</span>
<span class="c1">// * That same string cannot be converted back into a &#39;resource&#39;</span>
<span class="c1">// So, in terms of array handling, &#39;resource&#39; types may be stored as array reference values,</span>
<span class="c1">// but cannot be used as keys. </span>
<span class="c1">//</span>
<span class="c1">// I suspect it is this type of problem that the Perl::Tie package helps resolve. However, since</span>
<span class="c1">// PHP doesn&#39;t, AFAIK, sport a similar facility, the examples in this section cannot be</span>
<span class="c1">// implemented using file handles as keys</span>

<span class="nv">$filenames</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;/etc/termcap&#39;</span><span class="p">,</span> <span class="s1">&#39;/vmlinux&#39;</span><span class="p">,</span> <span class="s1">&#39;/bin/cat&#39;</span><span class="p">);</span>

<span class="k">foreach</span><span class="p">(</span><span class="nv">$filenames</span> <span class="k">as</span> <span class="nv">$filename</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nv">$fh</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="nv">$filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)))</span> <span class="k">continue</span><span class="p">;</span>

  <span class="c1">// Cannot do this as required by the Perl code:</span>
  <span class="c1">// $name[$fh] = $filename;</span>

  <span class="c1">// Ok</span>
  <span class="nv">$name</span><span class="p">[</span><span class="nv">$filename</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$fh</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Would traverse array via:</span>
<span class="c1">//</span>
<span class="c1">// foreach(array_keys($name) as $fh)</span>
<span class="c1">// ...</span>
<span class="c1">// or</span>
<span class="c1">//</span>
<span class="c1">// foreach($name as $fh =&gt; $filename)</span>
<span class="c1">// ...</span>
<span class="c1">// but since &#39;$fh&#39; cannot be a key, either of these will work:</span>
<span class="c1">//</span>
<span class="c1">// foreach($name as $filename =&gt; $fh)</span>
<span class="c1">// or</span>
<span class="k">foreach</span><span class="p">(</span><span class="nb">array_values</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$fh</span><span class="p">)</span>
<span class="p">{</span>
  <span class="nb">fclose</span><span class="p">(</span><span class="nv">$fh</span><span class="p">);</span>
<span class="p">}</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN271"
>Presizing a Hash</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// PHP hashes are dynamic expanding and contracting as entries are added, and removed,</span>
<span class="c1">// respectively. Thus, there is no need to presize a hash, nor is there, AFAIK, any</span>
<span class="c1">// means of doing so except by the number of datums used when defining the hash</span>

<span class="c1">// zero elements</span>
<span class="nv">$hash</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>            

<span class="c1">// ------------</span>

<span class="c1">// three elements</span>
<span class="nv">$hash</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Apple&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;Lemon&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;Carrot&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;orange&#39;</span><span class="p">);</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN274"
>Finding the Most Common Anything</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="k">foreach</span><span class="p">(</span><span class="nv">$array</span> <span class="k">as</span> <span class="nv">$element</span><span class="p">)</span> <span class="nv">$count</span><span class="p">[</span><span class="nv">$element</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN277"
>Representing Relationships Between Data</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nv">$father</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Cain&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Adam&#39;</span><span class="p">,</span> <span class="s1">&#39;Abel&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Adam&#39;</span><span class="p">,</span> <span class="s1">&#39;Seth&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Adam&#39;</span><span class="p">,</span> <span class="s1">&#39;Enoch&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Cain&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Irad&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Enoch&#39;</span><span class="p">,</span> <span class="s1">&#39;Mehujael&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Irad&#39;</span><span class="p">,</span> <span class="s1">&#39;Methusael&#39;</span><span class="o">=&gt;</span> <span class="s1">&#39;Mehujael&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Lamech&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Methusael&#39;</span><span class="p">,</span> <span class="s1">&#39;Jabal&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Lamech&#39;</span><span class="p">,</span> <span class="s1">&#39;Jubal&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Lamech&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Tubalcain&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Lamech&#39;</span><span class="p">,</span> <span class="s1">&#39;Enos&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Seth&#39;</span><span class="p">);</span>

<span class="c1">// ------------</span>

<span class="nv">$name</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">(</span><span class="nb">fgets</span><span class="p">(</span><span class="nx">STDIN</span><span class="p">));</span>

<span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="nb">feof</span><span class="p">(</span><span class="nx">STDIN</span><span class="p">))</span>
<span class="p">{</span>
  <span class="k">while</span> <span class="p">(</span><span class="k">TRUE</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">$name</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

    <span class="c1">// Can use either:</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$father</span><span class="p">[</span><span class="nv">$name</span><span class="p">]))</span> <span class="k">break</span><span class="p">;</span>
    <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$father</span><span class="p">[</span><span class="nv">$name</span><span class="p">];</span>

    <span class="c1">// or:</span>
    <span class="c1">// if (!key_exists($name, $father)) break;</span>
    <span class="c1">// $name = $father[$name];</span>

    <span class="c1">// or combine the two lines:</span>
    <span class="c1">// if (!($name = $father[$name])) break;</span>
  <span class="p">}</span>

  <span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
  <span class="nv">$name</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">(</span><span class="nb">fgets</span><span class="p">(</span><span class="nx">STDIN</span><span class="p">));</span>
<span class="p">}</span>

<span class="c1">// ----------------------------</span>

<span class="nb">define</span><span class="p">(</span><span class="nx">SEP</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">);</span>

<span class="k">foreach</span><span class="p">(</span><span class="nv">$father</span> <span class="k">as</span> <span class="nv">$child</span> <span class="o">=&gt;</span> <span class="nv">$parent</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$children</span><span class="p">[</span><span class="nv">$parent</span><span class="p">])</span>
    <span class="nv">$children</span><span class="p">[</span><span class="nv">$parent</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$child</span><span class="p">;</span>
  <span class="k">else</span>
    <span class="nv">$children</span><span class="p">[</span><span class="nv">$parent</span><span class="p">]</span> <span class="o">.=</span> <span class="nx">SEP</span> <span class="o">.</span> <span class="nv">$child</span><span class="p">;</span>
<span class="p">}</span>

<span class="nv">$name</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">(</span><span class="nb">fgets</span><span class="p">(</span><span class="nx">STDIN</span><span class="p">));</span>

<span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="nb">feof</span><span class="p">(</span><span class="nx">STDIN</span><span class="p">))</span>
<span class="p">{</span>
  <span class="k">echo</span> <span class="nv">$name</span> <span class="o">.</span> <span class="s1">&#39; begat &#39;</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$children</span><span class="p">[</span><span class="nv">$name</span><span class="p">])</span>
    <span class="k">echo</span> <span class="s2">&quot;Nothing</span><span class="se">\n</span><span class="s2">&quot;</span>
  <span class="k">else</span>
    <span class="k">echo</span> <span class="nb">str_replace</span><span class="p">(</span><span class="nx">SEP</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="p">,</span> <span class="nv">$children</span><span class="p">[</span><span class="nv">$name</span><span class="p">])</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

  <span class="nv">$name</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">(</span><span class="nb">fgets</span><span class="p">(</span><span class="nx">STDIN</span><span class="p">));</span>
<span class="p">}</span>

<span class="c1">// ----------------------------</span>

<span class="nb">define</span><span class="p">(</span><span class="nx">SEP</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">);</span>

<span class="nv">$files</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;/tmp/a&#39;</span><span class="p">,</span> <span class="s1">&#39;/tmp/b&#39;</span><span class="p">,</span> <span class="s1">&#39;/tmp/c&#39;</span><span class="p">);</span>

<span class="k">foreach</span><span class="p">(</span><span class="nv">$files</span> <span class="k">as</span> <span class="nv">$file</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_file</span><span class="p">(</span><span class="nv">$file</span><span class="p">))</span> <span class="p">{</span> <span class="k">echo</span> <span class="s2">&quot;Skipping </span><span class="si">{</span><span class="nv">$file</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span> <span class="k">continue</span><span class="p">;</span> <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nv">$fh</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="nv">$file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)))</span> <span class="p">{</span> <span class="k">echo</span> <span class="s2">&quot;Skipping </span><span class="si">{</span><span class="nv">$file</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span> <span class="k">continue</span><span class="p">;</span> <span class="p">}</span>

  <span class="nv">$line</span> <span class="o">=</span> <span class="nb">fgets</span><span class="p">(</span><span class="nv">$fh</span><span class="p">);</span>

  <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="nb">feof</span><span class="p">(</span><span class="nv">$fh</span><span class="p">))</span>
  <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^\s*#\s*include\s*&lt;([^&gt;]+)&gt;/&#39;</span><span class="p">,</span> <span class="nv">$line</span><span class="p">,</span> <span class="nv">$matches</span><span class="p">))</span>
    <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$includes</span><span class="p">[</span><span class="nv">$matches</span><span class="p">[</span><span class="mi">1</span><span class="p">]]))</span>
        <span class="nv">$includes</span><span class="p">[</span><span class="nv">$matches</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">.=</span> <span class="nx">SEP</span> <span class="o">.</span> <span class="nv">$file</span><span class="p">;</span>
      <span class="k">else</span>
        <span class="nv">$includes</span><span class="p">[</span><span class="nv">$matches</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="nv">$file</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nv">$line</span> <span class="o">=</span> <span class="nb">fgets</span><span class="p">(</span><span class="nv">$fh</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nb">fclose</span><span class="p">(</span><span class="nv">$fh</span><span class="p">);</span>
<span class="p">}</span>

<span class="nb">print_r</span><span class="p">(</span><span class="nv">$includes</span><span class="p">);</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN280"
>Program: dutree</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// @@INCOMPLETE@@</span>
<span class="c1">// @@INCOMPLETE@@</span></PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="arrays.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="patternmatching.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Arrays</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Pattern Matching</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>