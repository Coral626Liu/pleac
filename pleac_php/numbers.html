<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Numbers</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="PLEAC-PHP"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Strings"
HREF="strings.html"><LINK
REL="NEXT"
TITLE="Dates and Times"
HREF="datesandtimes.html"><style type="text/css">td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
pre { line-height: 125%; }

  </style></head
><BODY TEXT="#cecece" BGCOLOR="#4f6f6f" LINK="#f5deb3" VLINK="#d5ae83"
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PLEAC-PHP</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="strings.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="datesandtimes.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="NUMBERS"
>2. Numbers</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN73"
>Checking Whether a String Is a Valid Number</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// Two basic approaches to numeric validation:</span>
<span class="c1">// * Built-in functions like &#39;is_numeric&#39;, &#39;is_int&#39;, &#39;is_float&#39; etc</span>
<span class="c1">// * Regexes, as shown below</span>

<span class="nv">$s</span> <span class="o">=</span> <span class="s1">&#39;12.345&#39;</span><span class="p">;</span>

<span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/\D/&#39;</span><span class="p">,</span> <span class="nv">$s</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">die</span><span class="p">(</span><span class="s2">&quot;has nondigits</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
<span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^\d+$/&#39;</span><span class="p">,</span> <span class="nv">$s</span><span class="p">)</span> <span class="o">||</span> <span class="k">die</span><span class="p">(</span><span class="s2">&quot;not a natural number</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
<span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^-?\d+$/&#39;</span><span class="p">,</span> <span class="nv">$s</span><span class="p">)</span> <span class="o">||</span> <span class="k">die</span><span class="p">(</span><span class="s2">&quot;not an integer</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
<span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^[+-]?\d+$/&#39;</span><span class="p">,</span> <span class="nv">$s</span><span class="p">)</span> <span class="o">||</span> <span class="k">die</span><span class="p">(</span><span class="s2">&quot;not an integer</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
<span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^-?\d+\.?\d*$/&#39;</span><span class="p">,</span> <span class="nv">$s</span><span class="p">)</span> <span class="o">||</span> <span class="k">die</span><span class="p">(</span><span class="s2">&quot;not a decimal</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
<span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^-?(?:\d+(?:\.\d*)?|\.\d+)$/&#39;</span><span class="p">,</span> <span class="nv">$s</span><span class="p">)</span> <span class="o">||</span> <span class="k">die</span><span class="p">(</span><span class="s2">&quot;not a decimal</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
<span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/&#39;</span><span class="p">,</span> <span class="nv">$s</span><span class="p">)</span> <span class="o">||</span> <span class="k">die</span><span class="p">(</span><span class="s2">&quot;not a C float</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>

<span class="c1">// ----------------------------</span>

<span class="k">function</span> <span class="nf">getnum</span><span class="p">(</span><span class="nv">$s</span><span class="p">)</span>
<span class="p">{</span>
  <span class="nb">sscanf</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span> <span class="s2">&quot;%D&quot;</span><span class="p">,</span> <span class="nv">$number</span><span class="p">);</span> <span class="k">return</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$number</span><span class="p">)</span> <span class="o">?</span> <span class="nv">$number</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="nx">getnum</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>   <span class="c1">// ok</span>
<span class="k">echo</span> <span class="nx">getnum</span><span class="p">(</span><span class="mh">0xff</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>  <span class="c1">// ..</span>
<span class="k">echo</span> <span class="nx">getnum</span><span class="p">(</span><span class="mo">044</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>   <span class="c1">// ..</span>

<span class="k">echo</span> <span class="nx">getnum</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>   <span class="c1">// fail</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN76"
>Comparing Floating-Point Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// In PHP floating point comparisions are &#39;safe&#39; [meaning the &#39;==&#39; comparison operator</span>
<span class="c1">// can be used] as long as the value consists of 14 digits or less [total digits, either</span>
<span class="c1">// side of the decimal point e.g. xxxxxxx.xxxxxxx, xxxxxxxxxxxxxx., .xxxxxxxxxxxxxx]. If</span>
<span class="c1">// values with more digits must be compared, then:</span>
<span class="c1">//</span>
<span class="c1">// * Represent as strings, and take care to avoid any implicit conversions e.g. don&#39;t pass</span>
<span class="c1">//   a float as a float to a function and expect all digits to be retained - they won&#39;t be -</span>
<span class="c1">//   then use &#39;strcmp&#39; to compare the strings</span>
<span class="c1">//</span>
<span class="c1">// * Avoid float use; perhaps use arbitrary precision arithmetic. In this case, the</span>
<span class="c1">//   &#39;bccomp&#39; function is relevant</span>

<span class="c1">// Will work as long as each floating point value is 14 digits or less</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$float_1</span> <span class="o">==</span> <span class="nv">$float_2</span><span class="p">)</span>
<span class="p">{</span>
  <span class="p">;</span> <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// Compare as strings</span>
<span class="nv">$cmp</span> <span class="o">=</span> <span class="nb">strcmp</span><span class="p">(</span><span class="s1">&#39;123456789.123456789123456789&#39;</span><span class="p">,</span> <span class="s1">&#39;123456789.123456789123456788&#39;</span><span class="p">);</span>

<span class="c1">// Use &#39;bccomp&#39;</span>
<span class="nv">$precision</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> <span class="c1">// Number of significant comparison digits after decimal point</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">bccomp</span><span class="p">(</span><span class="s1">&#39;1.111117&#39;</span><span class="p">,</span> <span class="s1">&#39;1.111116&#39;</span><span class="p">,</span> <span class="nv">$precision</span><span class="p">))</span>
<span class="p">{</span>
  <span class="p">;</span> <span class="c1">// ...</span>
<span class="p">}</span>

<span class="nv">$precision</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">bccomp</span><span class="p">(</span><span class="s1">&#39;1.111117&#39;</span><span class="p">,</span> <span class="s1">&#39;1.111116&#39;</span><span class="p">,</span> <span class="nv">$precision</span><span class="p">))</span>
<span class="p">{</span>
  <span class="p">;</span> <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// ----------------------------</span>

<span class="nv">$wage</span> <span class="o">=</span> <span class="mi">536</span><span class="p">;</span>
<span class="nv">$week</span> <span class="o">=</span> <span class="nv">$wage</span> <span class="o">*</span> <span class="mi">40</span><span class="p">;</span>
<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;One week&#39;s wage is: $%.2f</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$week</span> <span class="o">/</span> <span class="mi">100</span><span class="p">);</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN79"
>Rounding Floating-Point Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// Preferred approach</span>
<span class="nv">$rounded</span> <span class="o">=</span> <span class="nx">round</span><span class="p">(</span><span class="nv">$unrounded</span><span class="p">,</span> <span class="nv">$precision</span><span class="p">);</span>

<span class="c1">// Possible alternate approach</span>
<span class="nv">$format</span> <span class="o">=</span> <span class="s1">&#39;%[width].[prec]f&#39;</span><span class="p">;</span>
<span class="nv">$rounded</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span><span class="nv">$format</span><span class="p">,</span> <span class="nv">$unrounded</span><span class="p">);</span>

<span class="c1">// ------------</span>

<span class="nv">$a</span> <span class="o">=</span> <span class="mf">0.255</span><span class="p">;</span> <span class="nv">$b</span> <span class="o">=</span> <span class="nx">round</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">&quot;Unrounded: </span><span class="si">{</span><span class="nv">$a</span><span class="si">}</span><span class="se">\n</span><span class="s2">Rounded: </span><span class="si">{</span><span class="nv">$b</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="nv">$a</span> <span class="o">=</span> <span class="mf">0.255</span><span class="p">;</span> <span class="nv">$b</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s1">&#39;%.2f&#39;</span><span class="p">,</span> <span class="nv">$a</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">&quot;Unrounded: </span><span class="si">{</span><span class="nv">$a</span><span class="si">}</span><span class="se">\n</span><span class="s2">Rounded: </span><span class="si">{</span><span class="nv">$b</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="nv">$a</span> <span class="o">=</span> <span class="mf">0.255</span><span class="p">;</span>
<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;Unrounded: %.f</span><span class="se">\n</span><span class="s2">Rounded: %.2f</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$a</span><span class="p">,</span> <span class="nv">$a</span><span class="p">);</span>

<span class="c1">// ----------------------------</span>

<span class="k">echo</span> <span class="s2">&quot;number</span><span class="se">\t</span><span class="s2">int</span><span class="se">\t</span><span class="s2">floor</span><span class="se">\t</span><span class="s2">ceil</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="k">foreach</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="mf">3.3</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">,</span> <span class="mf">3.7</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.3</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$number</span><span class="p">)</span>
<span class="p">{</span>
  <span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;%.1f</span><span class="se">\t</span><span class="s2">%.1f</span><span class="se">\t</span><span class="s2">%.1f</span><span class="se">\t</span><span class="s2">%.1f</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$number</span><span class="p">,</span> <span class="p">(</span><span class="nx">int</span><span class="p">)</span> <span class="nv">$number</span><span class="p">,</span> <span class="nx">floor</span><span class="p">(</span><span class="nv">$number</span><span class="p">),</span> <span class="nb">ceil</span><span class="p">(</span><span class="nv">$number</span><span class="p">));</span>
<span class="p">}</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN82"
>Converting Between Binary and Decimal</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// PHP offers the &#39;bindec&#39; and &#39;decbin&#39; functions to converting between binary and decimal</span>

<span class="nv">$num</span> <span class="o">=</span> <span class="nb">bindec</span><span class="p">(</span><span class="s1">&#39;0110110&#39;</span><span class="p">);</span>

<span class="nv">$binstr</span> <span class="o">=</span> <span class="nb">decbin</span><span class="p">(</span><span class="mi">54</span><span class="p">);</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN85"
>Operating on a Series of Integers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="k">foreach</span> <span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nv">$X</span><span class="p">,</span> <span class="nv">$Y</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$i</span><span class="p">)</span>
<span class="p">{</span>
  <span class="p">;</span> <span class="c1">// ...</span>
<span class="p">}</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nv">$X</span><span class="p">,</span> <span class="nv">$Y</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$i</span><span class="p">)</span>
<span class="p">{</span>
  <span class="p">;</span> <span class="c1">// ...</span>
<span class="p">}</span>

<span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="nv">$X</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;=</span> <span class="nv">$Y</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
  <span class="p">;</span> <span class="c1">// ...</span>
<span class="p">}</span>

<span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="nv">$X</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;=</span> <span class="nv">$Y</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">+=</span> <span class="mi">7</span><span class="p">)</span>
<span class="p">{</span>
  <span class="p">;</span> <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// ----------------------------</span>

<span class="k">echo</span> <span class="s1">&#39;Infancy is:&#39;</span><span class="p">;</span> <span class="k">foreach</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$i</span><span class="p">)</span> <span class="k">echo</span> <span class="s2">&quot; </span><span class="si">{</span><span class="nv">$i</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="k">echo</span> <span class="s1">&#39;Toddling is:&#39;</span><span class="p">;</span> <span class="k">foreach</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$i</span><span class="p">)</span> <span class="k">echo</span> <span class="s2">&quot; </span><span class="si">{</span><span class="nv">$i</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="k">echo</span> <span class="s1">&#39;Childhood is:&#39;</span><span class="p">;</span> <span class="k">foreach</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$i</span><span class="p">)</span> <span class="k">echo</span> <span class="s2">&quot; </span><span class="si">{</span><span class="nv">$i</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN88"
>Working with Roman Numerals</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// PHP offers no native support for Roman Numerals. However, a &#39;Numbers_Roman&#39; class</span>
<span class="c1">// is available for download from PEAR: [http://pear.php.net/package/Numbers_Roman].</span>
<span class="c1">// Note the following &#39;include&#39; directives are required:</span>
<span class="c1">//</span>
<span class="c1">//   include_once(&#39;Numbers/Roman.php&#39;);</span>

<span class="nv">$roman</span> <span class="o">=</span> <span class="nx">Numbers_Roman</span><span class="o">::</span><span class="na">toNumeral</span><span class="p">(</span><span class="nv">$arabic</span><span class="p">);</span>
<span class="nv">$arabic</span> <span class="o">=</span> <span class="nx">Numbers_Roman</span><span class="o">::</span><span class="na">toNumber</span><span class="p">(</span><span class="nv">$roman</span><span class="p">);</span>

<span class="c1">// ----------------------------</span>

<span class="nv">$roman_fifteen</span> <span class="o">=</span> <span class="nx">Numbers_Roman</span><span class="o">::</span><span class="na">toNumeral</span><span class="p">(</span><span class="mi">15</span><span class="p">);</span>

<span class="nv">$arabic_fifteen</span> <span class="o">=</span> <span class="nx">Numbers_Roman</span><span class="o">::</span><span class="na">toNumber</span><span class="p">(</span><span class="nv">$roman_fifteen</span><span class="p">);</span>

<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;Roman for fifteen is: %s</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$roman_fifteen</span><span class="p">);</span>
<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;Arabic for fifteen is: %d</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$arabic_fifteen</span><span class="p">);</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN91"
>Generating Random Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// Techniques used here simply mirror Perl examples, and are not an endorsement</span>
<span class="c1">// of any particular RNG technique</span>

<span class="c1">// In PHP do this ...</span>
<span class="nv">$random</span> <span class="o">=</span> <span class="nx">rand</span><span class="p">(</span><span class="nv">$lowerbound</span><span class="p">,</span> <span class="nv">$upperbound</span><span class="p">);</span>
<span class="nv">$random</span> <span class="o">=</span> <span class="nx">rand</span><span class="p">(</span><span class="nv">$x</span><span class="p">,</span> <span class="nv">$y</span><span class="p">);</span>

<span class="c1">// ----------------------------</span>

<span class="k">function</span> <span class="nf">make_password</span><span class="p">(</span><span class="nv">$chars</span><span class="p">,</span> <span class="nv">$reqlen</span><span class="p">)</span>
<span class="p">{</span>
  <span class="nv">$len</span> <span class="o">=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$chars</span><span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="nv">$reqlen</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="nv">$password</span> <span class="o">.=</span> <span class="nx">substr</span><span class="p">(</span><span class="nv">$chars</span><span class="p">,</span> <span class="nx">rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nv">$len</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>
  <span class="k">return</span> <span class="nv">$password</span><span class="p">;</span>
<span class="p">}</span>

<span class="nv">$chars</span> <span class="o">=</span> <span class="s1">&#39;ABCDEfghijKLMNOpqrstUVWXYz&#39;</span><span class="p">;</span> <span class="nv">$reqlen</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>

<span class="nv">$password</span> <span class="o">=</span> <span class="nx">make_password</span><span class="p">(</span><span class="nv">$chars</span><span class="p">,</span> <span class="nv">$reqlen</span><span class="p">);</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN94"
>Generating Different Random Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// PHP sports a large number of C Standard Library routines including the &#39;srand&#39;</span>
<span class="c1">// function, used to re-seed the RNG used with calls to the &#39;rand&#39; function. Thus,</span>
<span class="c1">// as per Perl example:</span>

<span class="k">while</span> <span class="p">(</span><span class="k">TRUE</span><span class="p">)</span>
<span class="p">{</span>
  <span class="nv">$seed</span> <span class="o">=</span> <span class="p">(</span><span class="nx">int</span><span class="p">)</span> <span class="nb">fgets</span><span class="p">(</span><span class="nx">STDIN</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$seed</span><span class="p">))</span> <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">srand</span><span class="p">(</span><span class="nv">$seed</span><span class="p">);</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN97"
>Making Numbers Even More Random</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// The above is considered - for many reasons - a poor way of seeding the RNG. PHP</span>
<span class="c1">// also offers alternate versions of the functions, &#39;mt_srand&#39; and &#39;mt_rand&#39;,</span>
<span class="c1">// which are described as faster, and more &#39;random&#39;, though key to obtaining a</span>
<span class="c1">// more &#39;random&#39; distribution of generated numbers seems to be through using</span>
<span class="c1">// a combination of a previously saved random value in combination with an</span>
<span class="c1">// unrepeatable value [like the current time in microseconds] that is multiplied</span>
<span class="c1">// by a large prime number, or perhaps as part of a hash [examples available in</span>
<span class="c1">// PHP documentation for &#39;srand&#39; and &#39;mt_srand&#39;]</span>

<span class="nx">mt_srand</span><span class="p">(</span><span class="nv">$saved_random_value</span> <span class="o">+</span> <span class="nb">microtime</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000003</span><span class="p">);</span>

<span class="c1">// or</span>

<span class="nx">mt_srand</span><span class="p">((</span><span class="nv">$saved_random_value</span> <span class="o">+</span> <span class="nx">hexdec</span><span class="p">(</span><span class="nx">substr</span><span class="p">(</span><span class="nb">md5</span><span class="p">(</span><span class="nb">microtime</span><span class="p">()),</span> <span class="o">-</span><span class="mi">8</span><span class="p">)))</span> <span class="o">&amp;</span> <span class="mh">0x7fffffff</span><span class="p">);</span>

<span class="c1">// Use of &#39;mt_rand&#39; together with an appropriate seeding approach should help better</span>
<span class="c1">// approximate the generation of a &#39;truly random value&#39;</span>
<span class="nv">$truly_random_value</span> <span class="o">=</span> <span class="nx">mt_rand</span><span class="p">();</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN100"
>Generating Biased Random Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="k">function</span> <span class="nf">random</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="nx">float</span><span class="p">)</span> <span class="nx">rand</span><span class="p">()</span> <span class="o">/</span> <span class="p">(</span><span class="nx">float</span><span class="p">)</span> <span class="nx">getrandmax</span><span class="p">();</span> <span class="p">}</span>

<span class="k">function</span> <span class="nf">gaussian_rand</span><span class="p">()</span>
<span class="p">{</span>
  <span class="nv">$u1</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span> <span class="nv">$u2</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span> <span class="nv">$g1</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span> <span class="nv">$g2</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span> <span class="nv">$w</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
  
  <span class="k">do</span>
  <span class="p">{</span>
    <span class="nv">$u1</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="nx">random</span><span class="p">()</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">;</span> <span class="nv">$u2</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="nx">random</span><span class="p">()</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">;</span>
    <span class="nv">$w</span> <span class="o">=</span> <span class="nv">$u1</span> <span class="o">*</span> <span class="nv">$u1</span> <span class="o">+</span> <span class="nv">$u2</span> <span class="o">*</span> <span class="nv">$u2</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nv">$w</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">);</span>
  
  <span class="nv">$w</span> <span class="o">=</span> <span class="nx">sqrt</span><span class="p">((</span><span class="o">-</span><span class="mf">2.0</span> <span class="o">*</span> <span class="nx">log</span><span class="p">(</span><span class="nv">$w</span><span class="p">))</span> <span class="o">/</span> <span class="nv">$w</span><span class="p">);</span> <span class="nv">$g2</span> <span class="o">=</span> <span class="nv">$u1</span> <span class="o">*</span> <span class="nv">$w</span><span class="p">;</span> <span class="nv">$g1</span> <span class="o">=</span> <span class="nv">$u2</span> <span class="o">*</span> <span class="nv">$w</span><span class="p">;</span>

  <span class="k">return</span> <span class="nv">$g1</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// ------------</span>

<span class="nv">$mean</span> <span class="o">=</span> <span class="mf">25.0</span><span class="p">;</span> <span class="nv">$sdev</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">;</span>
<span class="nv">$salary</span> <span class="o">=</span> <span class="nx">gaussian_rand</span><span class="p">()</span> <span class="o">*</span> <span class="nv">$mean</span> <span class="o">+</span> <span class="nv">$sdev</span><span class="p">;</span>

<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;You have been hired at: %.2f</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$salary</span><span class="p">);</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN103"
>Doing Trigonometry in Degrees, not Radians</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// &#39;deg2rad&#39; and &#39;rad2deg&#39; are actually PHP built-ins, but here is how you might implement</span>
<span class="o">/</span>  <span class="nx">them</span> <span class="k">if</span> <span class="nx">needed</span>
<span class="k">function</span> <span class="nf">deg2rad_</span><span class="p">(</span><span class="nv">$deg</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="nv">$deg</span> <span class="o">/</span> <span class="mf">180.0</span><span class="p">)</span> <span class="o">*</span> <span class="nx">M_PI</span><span class="p">;</span> <span class="p">}</span>
<span class="k">function</span> <span class="nf">rad2deg_</span><span class="p">(</span><span class="nv">$rad</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="nv">$rad</span> <span class="o">/</span> <span class="nx">M_PI</span><span class="p">)</span> <span class="o">*</span> <span class="mf">180.0</span><span class="p">;</span> <span class="p">}</span>

<span class="c1">// ------------</span>

<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;%f</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nx">deg2rad_</span><span class="p">(</span><span class="mf">180.0</span><span class="p">));</span>
<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;%f</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">deg2rad</span><span class="p">(</span><span class="mf">180.0</span><span class="p">));</span>

<span class="c1">// ----------------------------</span>

<span class="k">function</span> <span class="nf">degree_sin</span><span class="p">(</span><span class="nv">$deg</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">sin</span><span class="p">(</span><span class="nb">deg2rad</span><span class="p">(</span><span class="nv">$deg</span><span class="p">));</span> <span class="p">}</span>

<span class="c1">// ------------</span>

<span class="nv">$rad</span> <span class="o">=</span> <span class="nb">deg2rad</span><span class="p">(</span><span class="mf">380.0</span><span class="p">);</span>

<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;%f</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nx">sin</span><span class="p">(</span><span class="nv">$rad</span><span class="p">));</span>
<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;%f</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nx">degree_sin</span><span class="p">(</span><span class="mf">380.0</span><span class="p">));</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN106"
>Calculating More Trigonometric Functions</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="k">function</span> <span class="nf">my_tan</span><span class="p">(</span><span class="nv">$theta</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">sin</span><span class="p">(</span><span class="nv">$theta</span><span class="p">)</span> <span class="o">/</span> <span class="nb">cos</span><span class="p">(</span><span class="nv">$theta</span><span class="p">);</span> <span class="p">}</span>

<span class="c1">// ------------</span>

<span class="nv">$theta</span> <span class="o">=</span> <span class="mf">3.7</span><span class="p">;</span>

<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;%f</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nx">my_tan</span><span class="p">(</span><span class="nv">$theta</span><span class="p">));</span>
<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;%f</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nx">tan</span><span class="p">(</span><span class="nv">$theta</span><span class="p">));</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN109"
>Taking Logarithms</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="nv">$value</span> <span class="o">=</span> <span class="mf">100.0</span><span class="p">;</span>

<span class="nv">$log_e</span> <span class="o">=</span> <span class="nx">log</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
<span class="nv">$log_10</span> <span class="o">=</span> <span class="nx">log10</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>

<span class="c1">// ----------------------------</span>

<span class="k">function</span> <span class="nf">log_base</span><span class="p">(</span><span class="nv">$base</span><span class="p">,</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">log</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="o">/</span> <span class="nx">log</span><span class="p">(</span><span class="nv">$base</span><span class="p">);</span> <span class="p">}</span>

<span class="c1">// ------------</span>

<span class="nv">$answer</span> <span class="o">=</span> <span class="nx">log_base</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">10000.0</span><span class="p">);</span>

<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;log(10, 10,000) = %f</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$answer</span><span class="p">);</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN112"
>Multiplying Matrices</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// PHP offers no native support for matrices. However, a &#39;Math_Matrix&#39; class</span>
<span class="c1">// is available for download from PEAR: [http://pear.php.net/package/Math_Matrix].</span>
<span class="c1">// Note the following &#39;include&#39; directives are required:</span>
<span class="c1">//</span>
<span class="c1">//  include_once(&#39;Math/Matrix.php&#39;);</span>

<span class="nv">$a</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Math_Matrix</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="k">array</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">)));</span>
<span class="nv">$b</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Math_Matrix</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="k">array</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="k">array</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">)));</span>

<span class="k">echo</span> <span class="nv">$a</span><span class="o">-&gt;</span><span class="na">toString</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$b</span><span class="o">-&gt;</span><span class="na">toString</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// NOTE: When I installed this package I had to rename the &#39;clone&#39; method else</span>
<span class="c1">// it would not load, so I chose to rename it to &#39;clone_&#39;, and this usage is</span>
<span class="c1">// shown below. This bug may well be fixed by the time you obtain this package</span>

<span class="nv">$c</span> <span class="o">=</span> <span class="nv">$a</span><span class="o">-&gt;</span><span class="na">clone_</span><span class="p">();</span>
<span class="nv">$c</span><span class="o">-&gt;</span><span class="na">multiply</span><span class="p">(</span><span class="nv">$b</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$c</span><span class="o">-&gt;</span><span class="na">toString</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN115"
>Using Complex Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// PHP offers no native support for complex numbers. However, a &#39;Math_Complex&#39; class</span>
<span class="c1">// is available for download from PEAR: [http://pear.php.net/package/Math_Complex].</span>
<span class="c1">// Note the following &#39;include&#39; directives are required:</span>
<span class="c1">//</span>
<span class="c1">//   include_once(&#39;Math/Complex.php&#39;);</span>
<span class="c1">//   include_once(&#39;Math/TrigOp.php&#39;);</span>
<span class="c1">//   include_once(&#39;Math/ComplexOp.php&#39;);</span>

<span class="nv">$a</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Math_Complex</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="nv">$b</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Math_Complex</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">);</span>

<span class="nv">$c</span> <span class="o">=</span> <span class="nx">Math_ComplexOp</span><span class="o">::</span><span class="na">mult</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$c</span><span class="o">-&gt;</span><span class="na">toString</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// ----------------------------</span>

<span class="nv">$d</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Math_Complex</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
<span class="nv">$r</span> <span class="o">=</span> <span class="nx">Math_ComplexOp</span><span class="o">::</span><span class="na">sqrt</span><span class="p">(</span><span class="nv">$d</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$r</span><span class="o">-&gt;</span><span class="na">toString</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN118"
>Converting Between Octal and Hexadecimal</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// Like C, PHP supports decimal-alternate notations. Thus, for example, the integer</span>
<span class="c1">// value, 867, is expressable in literal form as:</span>
<span class="c1">//</span>
<span class="c1">//   Hexadecimal -&gt; 0x363</span>
<span class="c1">//   Octal       -&gt; 01543</span>
<span class="c1">//</span>
<span class="c1">// For effecting such conversions using strings there is &#39;sprintf&#39; and &#39;sscanf&#39;.</span>

<span class="nv">$dec</span> <span class="o">=</span> <span class="mi">867</span><span class="p">;</span>
<span class="nv">$hex</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s1">&#39;%x&#39;</span><span class="p">,</span> <span class="nv">$dec</span><span class="p">);</span>
<span class="nv">$oct</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s1">&#39;%o&#39;</span><span class="p">,</span> <span class="nv">$dec</span><span class="p">);</span>

<span class="c1">// ------------</span>

<span class="nv">$dec</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nv">$hex</span> <span class="o">=</span> <span class="s1">&#39;363&#39;</span><span class="p">;</span>

<span class="nb">sscanf</span><span class="p">(</span><span class="nv">$hex</span><span class="p">,</span> <span class="s1">&#39;%x&#39;</span><span class="p">,</span> <span class="nv">$dec</span><span class="p">);</span>

<span class="c1">// ------------</span>

<span class="nv">$dec</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nv">$oct</span> <span class="o">=</span> <span class="s1">&#39;1543&#39;</span><span class="p">;</span>

<span class="nb">sscanf</span><span class="p">(</span><span class="nv">$oct</span><span class="p">,</span> <span class="s1">&#39;%o&#39;</span><span class="p">,</span> <span class="nv">$dec</span><span class="p">);</span>

<span class="c1">// ----------------------------</span>

<span class="nv">$number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="nb">printf</span><span class="p">(</span><span class="s1">&#39;Gimme a number in decimal, octal, or hex: &#39;</span><span class="p">);</span>
<span class="nb">sscanf</span><span class="p">(</span><span class="nb">fgets</span><span class="p">(</span><span class="nx">STDIN</span><span class="p">),</span> <span class="s1">&#39;%D&#39;</span><span class="p">,</span> <span class="nv">$number</span><span class="p">);</span>

<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;%d %x %o</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$number</span><span class="p">,</span> <span class="nv">$number</span><span class="p">,</span> <span class="nv">$number</span><span class="p">);</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN121"
>Putting Commas in Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// PHP offers the &#39;number_format&#39; built-in function to, among many other format tasks, </span>
<span class="c1">// commify numbers. Perl-compatible [as well as extended] regexes are also available</span>

<span class="k">function</span> <span class="nf">commify_series</span><span class="p">(</span><span class="nv">$s</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nb">number_format</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">);</span> <span class="p">}</span>

<span class="c1">// ------------</span>

<span class="nv">$hits</span> <span class="o">=</span> <span class="mi">3456789</span><span class="p">;</span>

<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;Your website received %s accesses last month</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nx">commify_series</span><span class="p">(</span><span class="nv">$hits</span><span class="p">));</span>

<span class="c1">// ----------------------------</span>

<span class="k">function</span> <span class="nf">commify</span><span class="p">(</span><span class="nv">$s</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">return</span> <span class="nb">strrev</span><span class="p">(</span><span class="nb">preg_replace</span><span class="p">(</span><span class="s1">&#39;/(\d\d\d)(?=\d)(?!\d*\.)/&#39;</span><span class="p">,</span> <span class="s1">&#39;${1},&#39;</span><span class="p">,</span> <span class="nb">strrev</span><span class="p">(</span><span class="nv">$s</span><span class="p">)));</span>
<span class="p">}</span>

<span class="c1">// ------------</span>

<span class="nv">$hits</span> <span class="o">=</span> <span class="mi">3456789</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">commify</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s2">&quot;Your website received %d accesses last month</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$hits</span><span class="p">));</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN124"
>Printing Correct Plurals</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="k">function</span> <span class="nf">pluralise</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$root</span><span class="p">,</span> <span class="nv">$singular</span><span class="o">=</span><span class="s1">&#39;&#39;</span> <span class="p">,</span> <span class="nv">$plural</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">return</span> <span class="nv">$root</span> <span class="o">.</span> <span class="p">((</span><span class="nv">$value</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">?</span> <span class="nv">$plural</span> <span class="o">:</span> <span class="nv">$singular</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// ------------</span>

<span class="nv">$duration</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;It took %d %s</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$duration</span><span class="p">,</span> <span class="nx">pluralise</span><span class="p">(</span><span class="nv">$duration</span><span class="p">,</span> <span class="s1">&#39;hour&#39;</span><span class="p">));</span>
<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;%d %s %s enough.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$duration</span><span class="p">,</span> <span class="nx">pluralise</span><span class="p">(</span><span class="nv">$duration</span><span class="p">,</span> <span class="s1">&#39;hour&#39;</span><span class="p">),</span>
      <span class="nx">pluralise</span><span class="p">(</span><span class="nv">$duration</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;is&#39;</span><span class="p">,</span> <span class="s1">&#39;are&#39;</span><span class="p">));</span>

<span class="nv">$duration</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;It took %d %s</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$duration</span><span class="p">,</span> <span class="nx">pluralise</span><span class="p">(</span><span class="nv">$duration</span><span class="p">,</span> <span class="s1">&#39;hour&#39;</span><span class="p">));</span>
<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;%d %s %s enough.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$duration</span><span class="p">,</span> <span class="nx">pluralise</span><span class="p">(</span><span class="nv">$duration</span><span class="p">,</span> <span class="s1">&#39;hour&#39;</span><span class="p">),</span>
      <span class="nx">pluralise</span><span class="p">(</span><span class="nv">$duration</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;is&#39;</span><span class="p">,</span> <span class="s1">&#39;are&#39;</span><span class="p">));</span>

<span class="c1">// ----------------------------</span>

<span class="k">function</span> <span class="nf">plural</span><span class="p">(</span><span class="nv">$singular</span><span class="p">)</span>
<span class="p">{</span>
  <span class="nv">$s2p</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;/ss$/&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;sses&#39;</span><span class="p">,</span> <span class="s1">&#39;/([psc]h)$/&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;${1}es&#39;</span><span class="p">,</span> <span class="s1">&#39;/z$/&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;zes&#39;</span><span class="p">,</span>
               <span class="s1">&#39;/ff$/&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ffs&#39;</span><span class="p">,</span> <span class="s1">&#39;/f$/&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ves&#39;</span><span class="p">,</span> <span class="s1">&#39;/ey$/&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;eys&#39;</span><span class="p">,</span>
               <span class="s1">&#39;/y$/&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ies&#39;</span><span class="p">,</span> <span class="s1">&#39;/ix$/&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ices&#39;</span><span class="p">,</span> <span class="s1">&#39;/([sx])$/&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;$1es&#39;</span><span class="p">,</span>
               <span class="s1">&#39;$&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;s&#39;</span><span class="p">);</span>

  <span class="k">foreach</span><span class="p">(</span><span class="nv">$s2p</span> <span class="k">as</span> <span class="nv">$s</span> <span class="o">=&gt;</span> <span class="nv">$p</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span> <span class="nv">$singular</span><span class="p">))</span> <span class="k">return</span> <span class="nb">preg_replace</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span> <span class="nv">$p</span><span class="p">,</span> <span class="nv">$singular</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// ------------</span>

<span class="k">foreach</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;mess&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="s1">&#39;leaf&#39;</span><span class="p">,</span> <span class="s1">&#39;puppy&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$word</span><span class="p">)</span>
<span class="p">{</span>
  <span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;%6s -&gt; %s</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$word</span><span class="p">,</span> <span class="nx">plural</span><span class="p">(</span><span class="nv">$word</span><span class="p">));</span>
<span class="p">}</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN127"
>Program: Calculating Prime Factors</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">// @@INCOMPLETE@@</span>
<span class="c1">// @@INCOMPLETE@@</span></PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="strings.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="datesandtimes.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Strings</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Dates and Times</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>