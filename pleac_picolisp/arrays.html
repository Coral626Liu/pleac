<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Arrays</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="PLEAC-PicoLisp
"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Dates and Times"
HREF="datesandtimes.html"><LINK
REL="NEXT"
TITLE="Hashes"
HREF="hashes.html"></HEAD
><BODY TEXT="#cecece" BGCOLOR="#4f6f6f" LINK="#f5deb3" VLINK="#d5ae83"
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PLEAC-PicoLisp
</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="datesandtimes.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="hashes.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="ARRAYS"
>4. Arrays</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN170"
>Introduction</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222"># PicoLisp doesn't support arrays as contiguous pieces of memory.
</FONT></I><I><FONT COLOR="#B22222"># Instead, the standard Lisp linked lists are used.
</FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(setq Nested <B><FONT COLOR="#BC8F8F">'(this that the other))
(setq Nested '</FONT></B>(this that (the other)))
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(setq Tune <B><FONT COLOR="#BC8F8F">'(&quot;The&quot; &quot;Star-Spangled&quot; &quot;Banner&quot;))
#-----------------------------</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN173"
>Specifying a List In Your Program</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">#-----------------------------
(setq A '</FONT></B>(<B><FONT COLOR="#BC8F8F">&quot;quick&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;brown&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;fox&quot;</FONT></B>))
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(setq A <B><FONT COLOR="#BC8F8F">'(Why are you teasing me?))
#-----------------------------
: (setq Lines (make (char) (while (line T) (link @))))
The boy stood on the burning deck,
It was as hot as glass.

-&gt; (&quot;The boy stood on the burning deck,&quot; &quot;It was as hot as glass.&quot;)
#-----------------------------
(setq Bigarray
   (in &quot;mydatafile&quot;
      (make
         (until (eof)
            (link (line T)) ) ) ) )
#-----------------------------
(setq
   PerlHost &quot;www.perl.com&quot;
   HostInfo (in (list '</FONT></B>nslookup PerlHost) (till NIL T)) )
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>: (<B><FONT COLOR="#A020F0">split</FONT></B> (<B><FONT COLOR="#A020F0">chop</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;Costs only $4.95&quot;</FONT></B>) <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B>)
-&gt; ((<B><FONT COLOR="#BC8F8F">&quot;C&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;o&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;s&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;t&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;s&quot;</FONT></B>) (<B><FONT COLOR="#BC8F8F">&quot;o&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;n&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;l&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;y&quot;</FONT></B>) (<B><FONT COLOR="#BC8F8F">&quot;$&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;4&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;.&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;9&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;5&quot;</FONT></B>))

: (mapcar <B><FONT COLOR="#A020F0">pack</FONT></B> (<B><FONT COLOR="#A020F0">split</FONT></B> (<B><FONT COLOR="#A020F0">chop</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;Costs only $4.95&quot;</FONT></B>) <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B>))
-&gt; (<B><FONT COLOR="#BC8F8F">&quot;Costs&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;only&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;$4.95&quot;</FONT></B>)
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(setq Ships <B><FONT COLOR="#BC8F8F">'(&quot;NiĂąa&quot; &quot;Pinta&quot; &quot;Santa MarĂ­a&quot;))
#-----------------------------</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN176"
>Printing a List with Commas</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">#-----------------------------
: (pack &quot;The &quot; (glue &quot;, &quot; '</FONT></B>(big brown dirty hungry)) <B><FONT COLOR="#BC8F8F">&quot; fox&quot;</FONT></B>)
-&gt; <B><FONT COLOR="#BC8F8F">&quot;The big, brown, dirty, hungry fox&quot;</FONT></B>
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(setq Array <B><FONT COLOR="#BC8F8F">'(red yellow green))

: (prinl &quot;I have &quot; Array &quot; marbles.&quot;)
I have redyellowgreen marbles.

: (prinl &quot;I have &quot; (glue &quot; &quot; Array) &quot; marbles.&quot;)
I have red yellow green marbles.
#-----------------------------
# <font size="-1"><a href="http://pleac.sourceforge.net/include/picolisp/ch04/commify_series">download the following standalone program</a></font>
#!/usr/bin/picolisp /usr/lib/picolisp/lib.l
# commify_series - show proper comma insertion in list output

(de Lists
   (&quot;just one thing&quot;)
   (&quot;Mutt&quot; &quot;Jeff&quot;)
   (&quot;Peter&quot; &quot;Paul&quot; &quot;Mary&quot;)
   (&quot;To our parents&quot; &quot;Mother Theresa&quot; &quot;God&quot;)
   (&quot;pastrami&quot; &quot;ham and cheese&quot; &quot;peanut butter and jelly&quot; &quot;tuna&quot;)
   (&quot;recycle tired, old phrases&quot; &quot;ponder big, happy thoughts&quot;)
   (&quot;recycle tired, old phrases&quot; 
      &quot;ponder big, happy thoughts&quot; 
      &quot;sleep and dream peacefully&quot;) )

(de commifySeries (Lst)
   (ifn (cddr Lst)
      (glue &quot; and &quot; Lst)
      (glue (if (find '</FONT></B>((S) (<B><FONT COLOR="#A020F0">sub</FONT></B>? <B><FONT COLOR="#BC8F8F">&quot;,&quot;</FONT></B> S)) Lst) <B><FONT COLOR="#BC8F8F">&quot;; &quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;, &quot;</FONT></B>)
         (conc
            (head -1 Lst)
            (cons (<B><FONT COLOR="#A020F0">pack</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;and &quot;</FONT></B> (<B><FONT COLOR="#A020F0">last</FONT></B> Lst))) ) ) ) )

(<B><FONT COLOR="#A020F0">for</FONT></B> L Lists
   (prinl <B><FONT COLOR="#BC8F8F">&quot;The list is: &quot;</FONT></B> (commifySeries L) <B><FONT COLOR="#BC8F8F">&quot;.&quot;</FONT></B>) )

(bye)

<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>The list is: just one thing.
The list is: Mutt <B><FONT COLOR="#A020F0">and</FONT></B> Jeff.
The list is: Peter, Paul, <B><FONT COLOR="#A020F0">and</FONT></B> Mary.
The list is: To our parents, Mother Theresa, <B><FONT COLOR="#A020F0">and</FONT></B> God.
The list is: pastrami, ham <B><FONT COLOR="#A020F0">and</FONT></B> cheese, peanut butter <B><FONT COLOR="#A020F0">and</FONT></B> jelly, <B><FONT COLOR="#A020F0">and</FONT></B> tuna.
The list is: recycle tired, old phrases <B><FONT COLOR="#A020F0">and</FONT></B> ponder big, happy thoughts.
The list is: recycle tired, old phrases; ponder big, happy thoughts; <B><FONT COLOR="#A020F0">and</FONT></B> <B><FONT COLOR="#A020F0">sleep</FONT></B> <B><FONT COLOR="#A020F0">and</FONT></B> dream peacefully.
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN179"
>Changing Array Size</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(de whatAboutThatArray ()
   (prinl <B><FONT COLOR="#BC8F8F">&quot;The array now has &quot;</FONT></B> (<B><FONT COLOR="#A020F0">length</FONT></B> People) <B><FONT COLOR="#BC8F8F">&quot; elements.&quot;</FONT></B>)
   (prinl <B><FONT COLOR="#BC8F8F">&quot;Element #4 is `&quot;</FONT></B> (get People 4) <B><FONT COLOR="#BC8F8F">&quot;'.&quot;</FONT></B>) )

(de People
   Crosby Stills Nash Young )

: (whatAboutThatArray)
The array now has 4 elements.
Element <I><FONT COLOR="#B22222">#4 is `Young'.
</FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(con (tail 2 People))

: (whatAboutThatArray)
The array now has 3 elements.
Element <I><FONT COLOR="#B22222">#4 is `'.
</FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(setq People (need -10000 People))

: (whatAboutThatArray)
The array now has 10000 elements.
Element <I><FONT COLOR="#B22222">#4 is `'.
</FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN182"
>Doing Something with Every Element in a List</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(<B><FONT COLOR="#A020F0">for</FONT></B> Item List
   (doSomething Item) )
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(<B><FONT COLOR="#A020F0">for</FONT></B> User BadUsers
   (complain User) )
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(<B><FONT COLOR="#A020F0">for</FONT></B> User AllUsers
   (let DiskSpace (getUsage User)
      (when (&gt; DiskSpace MAX_QUOTA)
         (complain User) ) ) )
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(in <B><FONT COLOR="#BC8F8F">'(who)
   (while (line T)
      (and (sub? &quot;tchrist&quot; @) (prinl @)) ) )
#-----------------------------
(until (eof)
   (prinl (glue &quot; &quot; (flip (split (line) &quot; &quot;)))) )
#-----------------------------
(for Item Array
   (prinl &quot;i = &quot; Item) )
#-----------------------------
(setq Array (1 2 3))
(map dec Array)

: Array
-&gt; (0 1 2)
#-----------------------------</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN185"
>Iterating Over an Array by Reference</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">#-----------------------------
# iterate over elements of list in $ARRAYREF
(map
   '</FONT></B>((L)
      (foo (car L))  <I><FONT COLOR="#B22222"># Do something with the element
</FONT></I>      (set L) )      <I><FONT COLOR="#B22222"># Modify an element (destructively)
</FONT></I>   List )

(<B><FONT COLOR="#A020F0">for</FONT></B> I (<B><FONT COLOR="#A020F0">length</FONT></B> List)
   (doSomethingWith (get List I)) )
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(setq
   Fruits <B><FONT COLOR="#BC8F8F">'(Apple Blackberry)
   FruitRef '</FONT></B>Fruits )

: (<B><FONT COLOR="#A020F0">for</FONT></B> Fruit (val FruitRef)
   (prinl Fruit <B><FONT COLOR="#BC8F8F">&quot; tastes good in a pie.&quot;</FONT></B>) )
Apple tastes good in a pie.
Blackberry tastes good in a pie.
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN188"
>Extracting Unique Elements from a List</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>: (let Uniq NIL
   (<B><FONT COLOR="#A020F0">for</FONT></B> Item <B><FONT COLOR="#BC8F8F">'(a b c b c d c d e d e f)
      (unless (memq Item Uniq)
         (push '</FONT></B>Uniq Item) ) )
   Uniq )
-&gt; (f e d c b a)
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>: (let Seen NIL
   (<B><FONT COLOR="#A020F0">for</FONT></B> Item <B><FONT COLOR="#BC8F8F">'(a b c b c d c d e d e f)
      (accu '</FONT></B>Seen Item 1) )
   Seen )
-&gt; ((f . 1) (e . 2) (d . 3) (c . 3) (b . 2) (a . 1))
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>: (uniq <B><FONT COLOR="#BC8F8F">'(a b c b c d c d e d e f))
-&gt; (a b c d e f)
#-----------------------------
# generate a list of users logged in, removing duplicates
: (in '</FONT></B>(who)
   (uniq
      (make
         (<B><FONT COLOR="#A020F0">while</FONT></B> (<B><FONT COLOR="#A020F0">split</FONT></B> (line) <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B>)
            (<B><FONT COLOR="#A020F0">link</FONT></B> (<B><FONT COLOR="#A020F0">pack</FONT></B> (car @))) ) ) ) )
-&gt; (<B><FONT COLOR="#BC8F8F">&quot;tim&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;abu&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;ben&quot;</FONT></B>)
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>: (println <B><FONT COLOR="#BC8F8F">'Users '</FONT></B>logged <B><FONT COLOR="#BC8F8F">'in: (sort @))
Users logged in: (&quot;abu&quot; &quot;ben&quot; &quot;tim&quot;)
#-----------------------------</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN191"
>Finding Elements in One Array but Not Another</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">#-----------------------------
# find only elements in A and not in B
: (sect '</FONT></B>(a b c d e f) <B><FONT COLOR="#BC8F8F">'(a c f h))
-&gt; (a c f)
#-----------------------------
# Using symbol values
: (setq key1 1  key2 2)
-&gt; 2
: key1
-&gt; 1
: key2
-&gt; 2
#-----------------------------
# Using properties
: (put '</FONT></B>Hash <B><FONT COLOR="#BC8F8F">'key1 1)
-&gt; 1
: (put '</FONT></B>Hash <B><FONT COLOR="#BC8F8F">'key2 2)
-&gt; 2
: (get '</FONT></B>Hash <B><FONT COLOR="#BC8F8F">'key1)
-&gt; 1
#-----------------------------
# Using association lists
: (de Hash (key1 . 1) (key2 . 2))
-&gt; Hash
: (assoc '</FONT></B>key1 Hash)
-&gt; (key1 . 1)
: (asoq <B><FONT COLOR="#BC8F8F">'key1 Hash)
-&gt; (key1 . 1)
: (get Hash '</FONT></B>key1)
-&gt; 1
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I><I><FONT COLOR="#B22222"># Using index tree
</FONT></I>: (idx <B><FONT COLOR="#BC8F8F">'Hash '</FONT></B>(key1 . 1) T)
-&gt; NIL
: (idx <B><FONT COLOR="#BC8F8F">'Hash '</FONT></B>(key2 . 2) T)
-&gt; NIL
: (lup Hash <B><FONT COLOR="#BC8F8F">'key1)
-&gt; (key1 . 1)
#-----------------------------</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN194"
>Computing Union, Intersection, or Difference of Unique Lists</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">#-----------------------------
(setq
   A (1 3 5 6 7 8)
   B (2 3 5 7 9) )
#-----------------------------
# Union
: (uniq (append A B))
-&gt; (1 3 5 6 7 8 2 9)
#-----------------------------
# Intersection
: (sect A B)
-&gt; (3 5 7)
#-----------------------------
# Difference
: (diff A B)
-&gt; (1 6 8)
#-----------------------------</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN197"
>Appending One Array to Another</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">#-----------------------------
(setq
   Members '</FONT></B>(Time Flies)
   Initiates <B><FONT COLOR="#BC8F8F">'(An Arrow) )
#-----------------------------
: (append Members Initiates)  # Non-destructive
-&gt; (Time Flies An Arrow)
#-----------------------------
: (conc Members Initiates)  # Destructive
-&gt; (Time Flies An Arrow)
# '</FONT></B>Members<B><FONT COLOR="#BC8F8F">' is now (Time Flies An Arrow)
#-----------------------------
: (insert 3 Members '</FONT></B>Like)  <I><FONT COLOR="#B22222"># Non-destructive
</FONT></I>-&gt; (Time Flies Like An Arrow)
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>: (set Members <B><FONT COLOR="#BC8F8F">'Fruit)  # Destructive
-&gt; Fruit
: (set (tail 1 Members) '</FONT></B>Banana)
-&gt; Banana
: Members
-&gt; (Fruit Flies An Banana)
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN200"
>Reversing an Array</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(<B><FONT COLOR="#A020F0">reverse</FONT></B> List)  <I><FONT COLOR="#B22222"># Non-destructive
</FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(flip List)  <I><FONT COLOR="#B22222"># Destructive
</FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>: (<B><FONT COLOR="#A020F0">sort</FONT></B> (2 8 3 7 5 9 6))
-&gt; (2 3 5 6 7 8 9)
: (by - <B><FONT COLOR="#A020F0">sort</FONT></B> (2 8 3 7 5 9 6))
-&gt; (9 8 7 6 5 3 2)
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>: (flip (<B><FONT COLOR="#A020F0">sort</FONT></B> <B><FONT COLOR="#BC8F8F">'(a 3 1 (1 2 3) d b 4 T NIL (a b c) (x y z) c 2)))
-&gt; (T (x y z) (a b c) (1 2 3) d c b a 4 3 2 1 NIL)
#-----------------------------</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN203"
>Processing Multiple Elements of an Array</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">#-----------------------------
# remove N elements from front of List
: (setq List '</FONT></B>(a b c d e f g))
-&gt; (a b c d e f g)
: (cut 3 <B><FONT COLOR="#BC8F8F">'List)
-&gt; (a b c)
: List
-&gt; (d e f g)
#-----------------------------
# remove N elements from end of List
: (setq List '</FONT></B>(a b c d e f g))
-&gt; (a b c d e f g)
: (tail 3 List)
-&gt; (e f g)
: (con (nth List 4))
-&gt; NIL
: List
-&gt; (a b c d)
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(setq
   Friends <B><FONT COLOR="#BC8F8F">'(Peter Paul Mary Jim Tim)
   This (pop '</FONT></B>Friends)
   Thas (<B><FONT COLOR="#A020F0">pop</FONT></B> <B><FONT COLOR="#BC8F8F">'Friends) )

: This
-&gt; Peter
: That
-&gt; NIL
: Friends
-&gt; (Mary Jim Tim)
#-----------------------------
(setq
   Beverages '</FONT></B>(Dew Jolt Cola Sprite Fresca)
   Pair (tail 2 Beverages)
   Beverages (head 3 Beverages) )

: Pair
-&gt; (Sprite Fresca)
: Beverages
-&gt; (Dew Jolt Cola)
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN206"
>Finding the First List Element That Passes a Test</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(with
   (find
      <B><FONT COLOR="#BC8F8F">'((This) (== '</FONT></B>engineer (: category)))
      Employees )
   (prinl <B><FONT COLOR="#BC8F8F">&quot;Highest paid engineer is: &quot;</FONT></B> (: name))  )
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN209"
>Finding All Elements in an Array Matching Certain Criteria</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(de Nums 84598 4439223 248749 2488711 233716 3375644 211118)

: (filter <B><FONT COLOR="#BC8F8F">'((N) (&gt; N 1000000)) Nums)
-&gt; (4439223 2488711 3375644)
#-----------------------------
: (filter &gt; Nums (1000000 .))
-&gt; (4439223 2488711 3375644)
#-----------------------------
(filter '</FONT></B>((This) (== <B><FONT COLOR="#BC8F8F">'Engineer (: position))) Employees)
#-----------------------------</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN212"
>Sorting an Array Numerically</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">#-----------------------------
# Pids is an unsorted array of process IDs
(sort Pids)
#-----------------------------
# Descending sort
: (flip (sort (4 19 8 4)))
-&gt; (19 8 4 4)

: (sort (4 19 8 4) &gt;)
-&gt; (19 8 4 4)

: (by - sort (4 19 8 4))
-&gt; (19 8 4 4)
#-----------------------------</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN215"
>Sorting a List by Computable Field</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">#-----------------------------
: (by cdr sort '</FONT></B>((4 . 7) (19 . 3) (8 . 1) (4 . 2)))   <I><FONT COLOR="#B22222"># (recommended)
</FONT></I>-&gt; ((8 . 1) (4 . 2) (19 . 3) (4 . 7))

: (<B><FONT COLOR="#A020F0">sort</FONT></B>                                               <I><FONT COLOR="#B22222"># (slower and bigger)
</FONT></I>   <B><FONT COLOR="#BC8F8F">'((4 . 7) (19 . 3) (8 . 1) (4 . 2))
   '</FONT></B>((X Y) (&gt; (cdr Y) (cdr X))) )
-&gt; ((8 . 1) (4 . 2) (19 . 3) (4 . 7))
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(<B><FONT COLOR="#A020F0">for</FONT></B> This (by <B><FONT COLOR="#BC8F8F">'((This) (: name)) sort Employees)
    (prinl (: name) &quot; earns $&quot; (: salary)) )
#-----------------------------
(by '</FONT></B>((This) (cons (: name) (: age))) <B><FONT COLOR="#A020F0">sort</FONT></B> Employees)
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(by <B><FONT COLOR="#BC8F8F">'((S) (cadr (chop S))) sort Names)
#-----------------------------
(by length sort Strings)
#-----------------------------
(sort
   (in &quot;/etc/passwd&quot;
      (make
         (while (split (line) &quot;:&quot;)
            (link (mix @ 4 3 1)) ) ) ) )
#-----------------------------</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN218"
>Implementing a Circular List</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">#-----------------------------
: (circ '</FONT></B>a)
-&gt; (a .)

: (circ <B><FONT COLOR="#BC8F8F">'a '</FONT></B>b <B><FONT COLOR="#BC8F8F">'c)
-&gt; (a b c .)

: (rot @)
-&gt; (c a b .)
#-----------------------------</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN221"
>Randomizing an Array</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">#-----------------------------
(by '</FONT></B>(NIL (<B><FONT COLOR="#A020F0">rand</FONT></B>)) <B><FONT COLOR="#A020F0">sort</FONT></B> Lst)  <I><FONT COLOR="#B22222"># OK
</FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN224"
>Program: words</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I><I><FONT COLOR="#B22222"># <font size="-1"><a href="http://pleac.sourceforge.net/include/picolisp/ch04/words">download the following standalone program</a></font>
</FONT></I><I><FONT COLOR="#B22222">#!/usr/bin/picolisp /usr/lib/picolisp/lib.l
</FONT></I><I><FONT COLOR="#B22222"># words - gather lines, present in columns
</FONT></I>
(setq
   Data (in NIL
      (make
         (<B><FONT COLOR="#A020F0">until</FONT></B> (<B><FONT COLOR="#A020F0">eof</FONT></B>)
            (<B><FONT COLOR="#A020F0">link</FONT></B> (line T)) ) ) )
   Maxlen (inc (<B><FONT COLOR="#A020F0">length</FONT></B> (maxi <B><FONT COLOR="#A020F0">length</FONT></B> Data)))
   Cols (max (/ (<B><FONT COLOR="#A020F0">or</FONT></B> (<B><FONT COLOR="#A020F0">format</FONT></B> (sys <B><FONT COLOR="#BC8F8F">&quot;COLUMNS&quot;</FONT></B>)) 80) Maxlen) 1)
   Rows (/ (+ (<B><FONT COLOR="#A020F0">length</FONT></B> Data) Cols) Cols)
   Data (make (<B><FONT COLOR="#A020F0">while</FONT></B> Data (<B><FONT COLOR="#A020F0">link</FONT></B> (cut Rows <B><FONT COLOR="#BC8F8F">'Data)))) )

(while (find bool Data)
   (map
      '</FONT></B>((D) (space (- Maxlen (<B><FONT COLOR="#A020F0">length</FONT></B> (prin (<B><FONT COLOR="#A020F0">pop</FONT></B> D))))))
      Data )
   (prinl) )

(bye)

<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(de permute (Lst)
   (ifn (cdr Lst)
      (cons Lst)
      (mapcan
         <B><FONT COLOR="#BC8F8F">'((X)
            (mapcar
               '</FONT></B>((Y) (cons X Y))
               (permute (<B><FONT COLOR="#A020F0">delete</FONT></B> X Lst)) ) )
         Lst ) ) )

: (mapc println (permute <B><FONT COLOR="#BC8F8F">'(man bites dog)))
(man bites dog)
(man dog bites)
(bites man dog)
(bites dog man)
(dog man bites)
(dog bites man)
#-----------------------------
(de factorial (N)
   (apply * (range 1 N)) )

: (for N 15 (tab (-20 -10) N (factorial N)))
1                   1
2                   2
3                   6
4                   24
5                   120
6                   720
7                   5040
8                   40320
9                   362880
10                  3628800
11                  39916800
12                  479001600
13                  6227020800
14                  87178291200
15                  1307674368000

: (factorial 500)
-&gt; 12201368259911100687...00000000000000000000
: (length @)
-&gt; 1135
#-----------------------------
# <font size="-1"><a href="http://pleac.sourceforge.net/include/picolisp/ch04/permute">download the following standalone program</a></font>
#!/usr/bin/picolisp /usr/lib/picolisp/lib.l

(load &quot;@lib/simul.l&quot;)  # For '</FONT></B>permute<B><FONT COLOR="#BC8F8F">' function

(in NIL
   (until (eof)
      (for F (permute (split (line) &quot; &quot;))
         (prinl (glue &quot; &quot; F)) ) ) )

(bye)

#-----------------------------</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN227"
>Program: permute</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="datesandtimes.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="hashes.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Dates and Times</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Hashes</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>