<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Numbers</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="PLEAC-PicoLisp
"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Strings"
HREF="strings.html"><LINK
REL="NEXT"
TITLE="Dates and Times"
HREF="datesandtimes.html"></HEAD
><BODY TEXT="#cecece" BGCOLOR="#4f6f6f" LINK="#f5deb3" VLINK="#d5ae83"
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PLEAC-PicoLisp
</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="strings.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="datesandtimes.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="NUMBERS"
>2. Numbers</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN73"
>Checking Whether a String Is a Valid Number</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">#-----------------------------
# PicoLisp has only a single numeric type, the bignum.
# The function 'format' returns NIL if the argument is
# not a legal number
: (format &quot;12345&quot;)
-&gt; 12345                       # is a number
: (format &quot;123a5&quot;)
-&gt; NIL                         # is not
#-----------------------------
: (format &quot;1234.5678&quot;)
-&gt; 1235
: (format &quot;1234,5678&quot; 2 &quot;,&quot;)
-&gt; 123457
: (format &quot;-1,234.5&quot; 2 &quot;.&quot; &quot;,&quot;)
-&gt; -123450
#-----------------------------</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN76"
>Comparing Floating-Point Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"># PicoLisp has no real floating point numbers
# Only scaled (fixpoint) integers
#-----------------------------
: (= (format &quot;1234.5678&quot; 2) (format &quot;1234.572&quot; 2))
-&gt; T
#-----------------------------</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN79"
>Rounding Floating-Point Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">#-----------------------------
: (format &quot;1234.5678&quot;)
-&gt; 1235
: (format &quot;1234.5678&quot; 2)
-&gt; 123457

: (scl 3)
-&gt; 3
: (setq A 0.255)
-&gt; 255
: (prinl &quot;Unrounded: &quot; (format A *Scl) &quot;^JRounded: &quot; (round A 2))
Unrounded: 0.255
Rounded: 0.26
-&gt; &quot;0.26&quot;
#-----------------------------
: (scl 1)
-&gt; 1
: (let Fmt (7 7 7 7)
   (tab Fmt &quot;number&quot; &quot;int&quot; &quot;floor&quot; &quot;ceil&quot;)
   (for N (3.3 3.5 3.7 -3.3)
      (tab Fmt
         (format N *Scl)
         (format (* 1.0 (/ N 1.0)) *Scl)
         (format (* 1.0 (*/ (- N 0.5) 1.0)) *Scl)
         (format (* 1.0 (*/ (+ N 0.5) 1.0)) *Scl) ) ) )
 number    int  floor   ceil
    3.3    3.0    3.0    4.0
    3.5    3.0    3.0    4.0
    3.7    3.0    3.0    4.0
   -3.3   -3.0   -4.0   -3.0
-&gt; NIL
#-----------------------------</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN82"
>Converting Between Binary and Decimal</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">#-----------------------------
: (bin 54)
-&gt; &quot;110110&quot;
: (bin &quot;110110&quot;)
-&gt; 54
#-----------------------------</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN85"
>Operating on a Series of Integers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">#-----------------------------
: (prin &quot;Infancy is: &quot;) (for N 3 (printsp (dec N))) (prinl)
Infancy is: 0 1 2
#-----------------------------
: (prin &quot;Toddling is: &quot;) (println 3 4)
Toddling is: 3 4
#-----------------------------
: (prin &quot;Childhood is: &quot;) (apply println (range 5 12))
Childhood is: 5 6 7 8 9 10 11 12
# or
: (prin &quot;Childhood is: &quot;) (mapc printsp (range 5 12)) (prinl)
Childhood is: 5 6 7 8 9 10 11 12
# or
: (prin &quot;Childhood is: &quot;) (for (N 5 (&gt;= 12 N) (inc N)) (printsp N)) (prinl)
#-----------------------------</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN88"
>Working with Roman Numerals</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">#-----------------------------
: (de roman (N)
   (pack
      (make
         (mapc
            '((C D)
               (while (&gt;= N D)
                  (dec 'N D)
                  (link C) ) )
            '(M CM D CD C XC L XL X IX V IV I)
            (1000 900 500 400 100 90 50 40 10 9 5 4 1) ) ) ) )
-&gt; roman

: (prinl &quot;Roman for fifteen is &quot; (roman 15))
Roman for fifteen is XV
-&gt; &quot;XV&quot;

: (de arabic (R)
   (let N 0
      (for (L (chop (uppc R))  L)
         (find
            '((C D)
               (when (head C L)
                  (cut (length C) 'L)
                  (inc 'N D) ) )
            '`</FONT></B>(mapcar <B><FONT COLOR="#A020F0">chop</FONT></B> <B><FONT COLOR="#BC8F8F">'(M CM D CD C XC L XL X IX V IV I))
            (1000 900 500 400 100 90 50 40 10 9 5 4 1) ) )
      N ) )
-&gt; arabic

: (prinl &quot;Converted back, &quot; (roman 15) &quot; is &quot; (arabic (roman 15)))
Converted back, XV is 15
-&gt; 15
#-----------------------------</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN91"
>Generating Random Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">#-----------------------------
: (rand)
-&gt; 643875838651014379
#-----------------------------
: (rand 1 6)  # Dice
-&gt; 3
#-----------------------------
: (rand 900000 999999)
-&gt; 989901
#-----------------------------
: (rand T)  # Boolean
-&gt; NIL
: (rand T)
-&gt; T
#-----------------------------
: (setq Password
   (pack
      (head 8
         (by '</FONT></B>(NIL (<B><FONT COLOR="#A020F0">rand</FONT></B>)) <B><FONT COLOR="#A020F0">sort</FONT></B>
            (conc
               (<B><FONT COLOR="#A020F0">chop</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;!@$%\^&amp;*&quot;</FONT></B>)
               (mapcar char
                  (conc
                     (range <B><FONT COLOR="#BC8F8F">`(char &quot;A&quot;) `</FONT></B>(char <B><FONT COLOR="#BC8F8F">&quot;Z&quot;</FONT></B>))
                     (range <B><FONT COLOR="#BC8F8F">`(char &quot;a&quot;) `</FONT></B>(char <B><FONT COLOR="#BC8F8F">&quot;z&quot;</FONT></B>))
                     (range <B><FONT COLOR="#BC8F8F">`(char &quot;0&quot;) `</FONT></B>(char <B><FONT COLOR="#BC8F8F">&quot;9&quot;</FONT></B>)) ) ) ) ) ) ) )
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN94"
>Generating Different Random Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>: (seed 42)
-&gt; 62419389940

: (seed <B><FONT COLOR="#BC8F8F">&quot;Hello world&quot;</FONT></B>)
-&gt; -967786026117696633

: (seed (<B><FONT COLOR="#A020F0">time</FONT></B>))
-&gt; -54340987292621
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN97"
>Making Numbers Even More Random</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>: (in <B><FONT COLOR="#BC8F8F">&quot;/dev/urandom&quot;</FONT></B> (rd 12))
-&gt; 50416291644794614409246112035
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN100"
>Generating Biased Random Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(load <B><FONT COLOR="#BC8F8F">&quot;@lib/math.l&quot;</FONT></B>)

(de rand2 ()
   (<B><FONT COLOR="#A020F0">rand</FONT></B> <B><FONT COLOR="#BC8F8F">`(inc -1.0) `</FONT></B>(dec 1.0)) )

(de gaussianRand ()
   (<B><FONT COLOR="#A020F0">use</FONT></B> (U1 U2 W)
      (<B><FONT COLOR="#A020F0">while</FONT></B>
         (&gt;=
            (setq W
               (+
                  (*/ (setq U1 (rand2)) U1 1.0)
                  (*/ (setq U2 (rand2)) U2 1.0) ) )
            1.0 ) )
      (setq W (<B><FONT COLOR="#A020F0">sqrt</FONT></B> (*/ 1.0 -2.0 (<B><FONT COLOR="#A020F0">log</FONT></B> W) W)))
      (*/ U2 W 1.0) ) )

(prinl
   <B><FONT COLOR="#BC8F8F">&quot;You have been hired at $&quot;</FONT></B>
   (round (+ 25.0 (* 2 (gaussianRand))) 2) )
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN103"
>Doing Trigonometry in Degrees, not Radians</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(load <B><FONT COLOR="#BC8F8F">&quot;@lib/math.l&quot;</FONT></B>)

(de deg2rad (Deg)
   (*/ Deg pi 180.0) )

(de rad2deg (Rad)
   (*/ Rad 180.0 pi) )
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN106"
>Calculating More Trigonometric Functions</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(load <B><FONT COLOR="#BC8F8F">&quot;@lib/math.l&quot;</FONT></B>)
:  (<B><FONT COLOR="#A020F0">format</FONT></B> (<B><FONT COLOR="#A020F0">cos</FONT></B> 0.333333) *Scl)
-&gt; <B><FONT COLOR="#BC8F8F">&quot;0.944957&quot;</FONT></B>

:  (<B><FONT COLOR="#A020F0">format</FONT></B> (acos 0.944957) *Scl)
-&gt; <B><FONT COLOR="#BC8F8F">&quot;0.333333&quot;</FONT></B>

: (<B><FONT COLOR="#A020F0">format</FONT></B> (tan pi/2) *Scl)
-&gt; <B><FONT COLOR="#BC8F8F">&quot;3060023.306953&quot;</FONT></B>
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN109"
>Taking Logarithms</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(load <B><FONT COLOR="#BC8F8F">&quot;@lib/math.l&quot;</FONT></B>)
: (<B><FONT COLOR="#A020F0">format</FONT></B> (<B><FONT COLOR="#A020F0">log</FONT></B> 10.0) *Scl)
-&gt; <B><FONT COLOR="#BC8F8F">&quot;2.302585&quot;</FONT></B>

(de logBase(Base Val)
   (*/ (<B><FONT COLOR="#A020F0">log</FONT></B> Val) 1.0 (<B><FONT COLOR="#A020F0">log</FONT></B> Base)) )

: (<B><FONT COLOR="#A020F0">format</FONT></B> (logBase 10.0 10000.0) *Scl)
-&gt; <B><FONT COLOR="#BC8F8F">&quot;4.000000&quot;</FONT></B>
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN112"
>Multiplying Matrices</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(de mmult (Mat1 Mat2)
   (<B><FONT COLOR="#A020F0">unless</FONT></B> (= (<B><FONT COLOR="#A020F0">length</FONT></B> Mat1) (<B><FONT COLOR="#A020F0">length</FONT></B> (car Mat2)))
      (quit <B><FONT COLOR="#BC8F8F">&quot;IndexError: matrices don't match&quot;</FONT></B>) )
   (mapcar
      <B><FONT COLOR="#BC8F8F">'((Row)
         (apply mapcar Mat2
            '</FONT></B>(@ (apply + (mapcar * Row (rest)))) ) )
      Mat1 ) )
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>: (mmult
   <B><FONT COLOR="#BC8F8F">'((3 2 3) (5 9 8))
   '</FONT></B>((4 7) (9 3) (8 8)) )
-&gt; ((54 51) (165 126))
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN115"
>Using Complex Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222"># PicoLisp doesn't have a complex library, but a set of
</FONT></I><I><FONT COLOR="#B22222"># functions for complex numbers can be easily written
</FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(load <B><FONT COLOR="#BC8F8F">&quot;@lib/math.l&quot;</FONT></B>)

(de addComplex (A B)
   (cons
      (+ (car A) (car B))        <I><FONT COLOR="#B22222"># Real
</FONT></I>      (+ (cdr A) (cdr B)) ) )    <I><FONT COLOR="#B22222"># Imag
</FONT></I>
(de mulComplex (A B)
   (cons
      (-
         (*/ (car A) (car B) 1.0)
         (*/ (cdr A) (cdr B) 1.0) )
      (+
         (*/ (car A) (cdr B) 1.0)
         (*/ (cdr A) (car B) 1.0) ) ) )

(de invComplex (A)
   (let Denom
      (+
         (*/ (car A) (car A) 1.0)
         (*/ (cdr A) (cdr A) 1.0) )
      (cons
         (*/ (car A) 1.0 Denom)
         (- (*/ (cdr A) 1.0 Denom)) ) ) )

(de negComplex (A)
   (cons (- (car A)) (- (cdr A))) )

(de sqrtComplex (A)
   (let
      (R (<B><FONT COLOR="#A020F0">sqrt</FONT></B> (+ (* (car A) (car A)) (* (cdr A) (cdr A))))
         Y (<B><FONT COLOR="#A020F0">sqrt</FONT></B> (* (- R (car A)) 0.5))
         X (*/ (cdr A) 0.5 Y) )
      (cons  <I><FONT COLOR="#B22222"># Return both results
</FONT></I>         (cons X Y)
         (cons (- X) (- Y)) ) ) )

(de fmtComplex (A)
   (<B><FONT COLOR="#A020F0">pack</FONT></B>
      (round (car A) (dec *Scl))
      (<B><FONT COLOR="#A020F0">and</FONT></B> (gt0 (cdr A)) <B><FONT COLOR="#BC8F8F">&quot;+&quot;</FONT></B>)
      (round (cdr A) (dec *Scl))
      <B><FONT COLOR="#BC8F8F">&quot;i&quot;</FONT></B> ) )
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>: (let (A (3.0 . 5.0)  B (2.0 . -2.0))
   (prinl <B><FONT COLOR="#BC8F8F">&quot;c = &quot;</FONT></B> (fmtComplex (mulComplex A B))) )
c = 16.00000+4.00000i
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>: (let D (3.0 . 4.0)
   (prinl <B><FONT COLOR="#BC8F8F">&quot;sqrt(&quot;</FONT></B> (fmtComplex D) <B><FONT COLOR="#BC8F8F">&quot;) = &quot;</FONT></B> (fmtComplex (car (sqrtComplex D)))) )
<B><FONT COLOR="#A020F0">sqrt</FONT></B>(3.00000+4.00000i) = 2.00000+1.00000i
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN118"
>Converting Between Octal and Hexadecimal</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(prin <B><FONT COLOR="#BC8F8F">&quot;Gimme a number in decimal, octal, or hex: &quot;</FONT></B>)
(let Num (in NIL (clip (line)))
   (setq Num
      (if2 (= <B><FONT COLOR="#BC8F8F">&quot;0&quot;</FONT></B> (car Num)) (= <B><FONT COLOR="#BC8F8F">&quot;x&quot;</FONT></B> (cadr Num))
         (<B><FONT COLOR="#A020F0">hex</FONT></B> (cddr Num))
         (<B><FONT COLOR="#A020F0">oct</FONT></B> (cdr Num))
         NIL
         (<B><FONT COLOR="#A020F0">format</FONT></B> Num) ) )
   (prinl Num <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B> (<B><FONT COLOR="#A020F0">hex</FONT></B> Num) <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B> (<B><FONT COLOR="#A020F0">oct</FONT></B> Num)) )
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(prin <B><FONT COLOR="#BC8F8F">&quot;Enter file permission in octal: &quot;</FONT></B>)
(let Permissions (<B><FONT COLOR="#A020F0">oct</FONT></B> (in NIL (clip (line))))
   (prinl <B><FONT COLOR="#BC8F8F">&quot;The decimal value is &quot;</FONT></B> Permissions) )
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN121"
>Putting Commas in Numbers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>: (let Cnt -1740525205
   (prinl
      <B><FONT COLOR="#BC8F8F">&quot;Your web page received &quot;</FONT></B>
      (<B><FONT COLOR="#A020F0">format</FONT></B> Cnt 0 <B><FONT COLOR="#BC8F8F">&quot;.&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;,&quot;</FONT></B>)
      <B><FONT COLOR="#BC8F8F">&quot; accesses last month.&quot;</FONT></B> ) )
Your web page received -1,740,525,205 accesses <B><FONT COLOR="#A020F0">last</FONT></B> month.
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN124"
>Printing Correct Plurals</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(prinl <B><FONT COLOR="#BC8F8F">&quot;It took &quot;</FONT></B> Time <B><FONT COLOR="#BC8F8F">&quot; hour&quot;</FONT></B> (<B><FONT COLOR="#A020F0">unless</FONT></B> (= 1 Time) <B><FONT COLOR="#BC8F8F">&quot;s&quot;</FONT></B>))

(prinl
   Time
   <B><FONT COLOR="#BC8F8F">&quot; hour&quot;</FONT></B> (<B><FONT COLOR="#A020F0">unless</FONT></B> (= 1 Time) <B><FONT COLOR="#BC8F8F">&quot;s&quot;</FONT></B>)
   (<B><FONT COLOR="#A020F0">if</FONT></B> (= 1 Time) <B><FONT COLOR="#BC8F8F">&quot; is&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot; are&quot;</FONT></B>)
   <B><FONT COLOR="#BC8F8F">&quot; enough.&quot;</FONT></B> )

(prinl <B><FONT COLOR="#BC8F8F">&quot;It took &quot;</FONT></B> Time <B><FONT COLOR="#BC8F8F">&quot; centur&quot;</FONT></B> (<B><FONT COLOR="#A020F0">if</FONT></B> (= 1 Time) <B><FONT COLOR="#BC8F8F">&quot;y&quot;</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;ies&quot;</FONT></B>))
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(de nounPlural (Str)
   (let (S (<B><FONT COLOR="#A020F0">chop</FONT></B> Str)  @A)
      (cond
         ((find tail <B><FONT COLOR="#BC8F8F">'((s s) (p h) (s h) (c h) (z)) (circ S))
            (pack Str &quot;es&quot;) )
         ((tail '</FONT></B>(f f) S) (<B><FONT COLOR="#A020F0">pack</FONT></B> S <B><FONT COLOR="#BC8F8F">&quot;s&quot;</FONT></B>))
         ((match <B><FONT COLOR="#BC8F8F">'(@A f) S) (pack @A &quot;ves&quot;))
         ((tail '</FONT></B>(e <B><FONT COLOR="#A020F0">y</FONT></B>) S) (<B><FONT COLOR="#A020F0">pack</FONT></B> S <B><FONT COLOR="#BC8F8F">&quot;s&quot;</FONT></B>))
         ((match <B><FONT COLOR="#BC8F8F">'(@A y) S) (pack @A &quot;ies&quot;))
         ((match '</FONT></B>(@A i <B><FONT COLOR="#A020F0">x</FONT></B>) S) (<B><FONT COLOR="#A020F0">pack</FONT></B> @A <B><FONT COLOR="#BC8F8F">&quot;ices&quot;</FONT></B>))
         ((<B><FONT COLOR="#A020F0">or</FONT></B> (tail <B><FONT COLOR="#BC8F8F">'(s) S) (tail '</FONT></B>(<B><FONT COLOR="#A020F0">x</FONT></B>) S))
            (<B><FONT COLOR="#A020F0">pack</FONT></B> S <B><FONT COLOR="#BC8F8F">&quot;es&quot;</FONT></B>) )
         (T (<B><FONT COLOR="#A020F0">pack</FONT></B> S <B><FONT COLOR="#BC8F8F">&quot;s&quot;</FONT></B>)) ) ) )
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I>(<B><FONT COLOR="#A020F0">for</FONT></B> S
   (quote
      fish fly ox
      species genus phylum
      cherub radius jockey
      <B><FONT COLOR="#A020F0">index</FONT></B> matrix mythos
      phenomenon formula )
   (prinl <B><FONT COLOR="#BC8F8F">&quot;One &quot;</FONT></B> S <B><FONT COLOR="#BC8F8F">&quot;, two &quot;</FONT></B> (nounPlural S) <B><FONT COLOR="#BC8F8F">&quot;.&quot;</FONT></B>) )
<I><FONT COLOR="#B22222">#-----------------------------
</FONT></I></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN127"
>Program: Calculating Prime Factors</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><I><FONT COLOR="#B22222"></FONT></I><I><FONT COLOR="#B22222">#-----------------------------
</FONT></I><I><FONT COLOR="#B22222"># <font size="-1"><a href="http://pleac.sourceforge.net/include/picolisp/ch02/bigfact">download the following standalone program</a></font>
</FONT></I><I><FONT COLOR="#B22222">#!/usr/bin/picolisp /usr/lib/picolisp/lib.l
</FONT></I>
(load <B><FONT COLOR="#BC8F8F">&quot;@lib/misc.l&quot;</FONT></B>)

(de factor (N)
   (make
      (let (D 2  L (1 2 2 . (4 2 4 2 4 6 2 6 .))  M (<B><FONT COLOR="#A020F0">sqrt</FONT></B> N))
         (<B><FONT COLOR="#A020F0">while</FONT></B> (&gt;= M D)
            (<B><FONT COLOR="#A020F0">if</FONT></B> (=0 (% N D))
               (setq M (<B><FONT COLOR="#A020F0">sqrt</FONT></B> (setq N (/ N (<B><FONT COLOR="#A020F0">link</FONT></B> D)))))
               (inc <B><FONT COLOR="#BC8F8F">'D (pop '</FONT></B>L)) ) )
         (<B><FONT COLOR="#A020F0">link</FONT></B> N) ) ) )

(<B><FONT COLOR="#A020F0">while</FONT></B> (opt)
   (let? N (<B><FONT COLOR="#A020F0">format</FONT></B> @)
      (let Factors (factor N)
         (tab (-11 1 -60)
            N
            <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B>
            (ifn (cdr Factors)
               <B><FONT COLOR="#BC8F8F">&quot;PRIME&quot;</FONT></B>
               (glue <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B>
                  (mapcar
                     <B><FONT COLOR="#BC8F8F">'((L)
                        (if (cdr L)
                           (pack (car L) &quot;**&quot; (length L))
                           (car L) ) )
                     (by prog group Factors) ) ) ) ) ) ) )

(bye)

#-----------------------------
$  ./bigfact 17 60 125 239322000000000000000000
17          PRIME
60          2**2 3 5
125         5**3
239322000000000000000000 2**19 3 5**18 39887
#-----------------------------</PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="strings.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="datesandtimes.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Strings</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Dates and Times</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>