<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Dates and Times</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="PLEAC-Smalltalk "
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Numbers"
HREF="numbers.html"><LINK
REL="NEXT"
TITLE="Arrays"
HREF="arrays.html"><style type="text/css">td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
pre { line-height: 125%; }

  </style></head
><BODY TEXT="#cecece" BGCOLOR="#4f6f6f" LINK="#f5deb3" VLINK="#d5ae83"
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PLEAC-Smalltalk </TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="numbers.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="arrays.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="DATESANDTIMES"
>3. Dates and Times</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN132"
>Introduction</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">&quot;Dates and time are objects in Smalltalk too ... of course!&quot;</span>

<span class="nc">Date</span> <span class="nf">today</span><span class="p">.</span> <span class="c">&quot;Evaluates to an instance of class Date.&quot;</span>
<span class="nc">Time</span> <span class="nf">now</span><span class="p">.</span> <span class="c">&quot;Evaluates to an instance of class Time.&quot;</span>
<span class="nc">DateTime</span> <span class="nf">now</span><span class="p">.</span> <span class="c">&quot;Evaluates to an instance of class DateTime.&quot;</span>

<span class="c">&quot;Here are some examples of the messages that DateTime responds to</span>
<span class="c">instances of Date and Time respond to similar messages as appropriate.&quot;</span>

<span class="o">|</span><span class="nv">myDateTime</span><span class="o">|</span>
<span class="nv">myDateTime</span> <span class="o">:=</span> <span class="nc">DateTime</span> <span class="nf">now</span><span class="p">.</span>
<span class="nv">myDateTime</span> <span class="nf">second</span><span class="p">.</span> <span class="c">&quot; - the seconds part of the DateTime.  An Integer&quot;</span>
<span class="nv">myDateTime</span> <span class="nf">minute</span><span class="p">.</span> <span class="c">&quot; - the minutes part&quot;</span>
<span class="nv">myDateTime</span> <span class="nf">hour</span><span class="p">.</span> <span class="c">&quot;- the hours part 24hr clock by default&quot;</span>
<span class="nv">myDateTime</span> <span class="nf">hour24</span><span class="p">.</span> <span class="c">&quot;- as above, but explicitly the 24 hours clock&quot;</span>
<span class="nv">myDateTime</span> <span class="nf">hour12</span><span class="p">.</span> <span class="c">&quot;- as above but with 12 hours clock&quot;</span>
<span class="nv">myDateTime</span> <span class="nf">dayOfWeek</span><span class="p">.</span> <span class="c">&quot; -  the integer day index.  1=Sunday&quot;</span>
<span class="nv">myDateTime</span> <span class="nf">dayOfWeekName</span><span class="p">.</span> <span class="c">&quot;- day of the week as a Symbol, e.g. #Tuesday&quot;</span>
<span class="nv">myDateTime</span> <span class="nf">dayOfMonth</span><span class="p">.</span> <span class="c">&quot;-  day of the month - an Integer.&quot;</span>
<span class="nv">myDateTime</span> <span class="nf">month</span><span class="p">.</span> <span class="c">&quot;- month of the year.  Month index - an integer.&quot;</span>
<span class="nv">myDateTime</span> <span class="nf">monthName</span><span class="p">.</span> <span class="c">&quot;- name of the month as a Symbol, e.g. #June&quot;</span>
<span class="nv">myDateTime</span> <span class="nf">year</span><span class="p">.</span> <span class="c">&quot; - the year number as an Integer, e.g. 2005&quot;</span>
<span class="nv">myDateTime</span> <span class="nf">dayOfYear</span><span class="p">.</span> <span class="c">&quot;- integer day number of the day within the year.&quot;</span>

<span class="c">&quot;... and many more.  See the DateTime, Date and Time classes for the</span>
<span class="c">full story.&quot;</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN135"
>Finding Today's Date</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">&quot;We saw Date, Time and DateTime objects being created in the</span>
<span class="c">introduction.  Let&#39;s now see how we can show the value of these</span>
<span class="c">objects.&quot;</span>

<span class="nc">Date</span> <span class="nf">today</span> <span class="nf">printString</span><span class="p">.</span>   <span class="c">&quot; -&gt;  &#39;3-Jun-2005&#39; &quot;</span>
<span class="nc">Time</span> <span class="nf">now</span> <span class="nf">printString</span><span class="p">.</span>  <span class="c">&quot; -&gt;  &#39;22:09:35&#39; &quot;</span>
<span class="nc">DateTime</span> <span class="nf">now</span> <span class="nf">printString</span><span class="p">.</span> <span class="c">&quot; -&gt; &#39; 2005-06-03T22:10:22+10:00&#39; &quot;</span>

<span class="c">&quot;The message &gt;&gt;printString can be sent to any object.  It is up to the</span>
<span class="c">object to return an interesting instance of class String.&quot;</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN138"
>Converting DMYHMS to Epoch Seconds</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">&quot;We can create arbitrary dates and time using other class methods on the</span>
<span class="c">Date, Time and DateTime classes.&quot;</span>

<span class="o">|</span><span class="nv">myDateTime</span><span class="o">|</span>

<span class="c">&quot;The following creates a DateTime of the time I wrote this code as if it</span>
<span class="c">was GMT&quot;</span>
<span class="nv">myDateTime</span> <span class="o">:=</span> <span class="nc">DateTime</span> <span class="nf">year:</span> <span class="m">2005</span> <span class="nf">month:</span> <span class="m">6</span> <span class="nf">day:</span> <span class="m">3</span> <span class="nf">hour:</span> <span class="m">22</span> <span class="nf">minute:</span> <span class="m">18</span>
<span class="nf">second:</span> <span class="m">26</span><span class="p">.</span>

<span class="c">&quot;The following creates the DateTime with the correct offset for Sydney,</span>
<span class="c">Australia.&quot;</span>
<span class="nv">myDateTime</span> <span class="o">:=</span> <span class="nc">DateTime</span> <span class="nf">year:</span> <span class="m">2005</span> <span class="nf">month:</span> <span class="m">6</span> <span class="nf">day:</span> <span class="m">3</span> <span class="nf">hour:</span> <span class="m">22</span> <span class="nf">minute:</span> <span class="m">18</span>
<span class="nf">second:</span> <span class="m">26</span> <span class="nf">offset:</span> (<span class="nc">Duration</span> <span class="nf">days:</span> <span class="m">0</span> <span class="nf">hours:</span> <span class="m">10</span> <span class="nf">minutes:</span> <span class="m">0</span> <span class="nf">seconds:</span> <span class="m">0</span>)<span class="p">.</span>

<span class="c">&quot;And now we can get the seconds from myDateTime.&quot;</span>
<span class="nv">myDateTime</span> <span class="nf">asSeconds</span><span class="p">.</span>  <span class="c">&quot;Evaluates to an Integer&quot;</span>
<span class="nv">myDateTime</span> <span class="nf">asSeconds</span> <span class="nf">printString</span><span class="p">.</span> <span class="c">&quot;Evaluates to an instance of String</span>
<span class="c">representing the above integer.&quot;</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN141"
>Converting Epoch Seconds to DMYHMS</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c"></span><span class="c">&quot;We can also create a Dates and Times from a number of seconds&quot;</span>

<span class="o">|</span><span class="nv"> myDateTime aNumberOfSeconds aDate aTime</span><span class="o">|</span>
<span class="nv">myDateTime</span> <span class="o">:=</span> <span class="nc">DateTime</span> <span class="nf">year:</span> <span class="m">2005</span> <span class="nf">month:</span> <span class="m">6</span> <span class="nf">day:</span> <span class="m">3</span> <span class="nf">hour:</span> <span class="m">22</span> <span class="nf">minute:</span> <span class="m">18</span>
<span class="nf">second:</span> <span class="m">26</span> <span class="nf">offset:</span> (<span class="nc">Duration</span> <span class="nf">days:</span> <span class="m">0</span> <span class="nf">hours:</span> <span class="m">10</span> <span class="nf">minutes:</span> <span class="m">0</span> <span class="nf">seconds:</span> <span class="m">0</span>)<span class="p">.</span>
<span class="nv">aNumberOfSeconds</span> <span class="o">:=</span> <span class="nv">myDateTime</span> <span class="nf">asSeconds</span><span class="p">.</span>
<span class="nv">aDate</span> <span class="o">:=</span> <span class="nc">Date</span> <span class="nf">fromSeconds:</span> <span class="nv">aNumberOfSeconds</span><span class="p">.</span>
<span class="nv">aTime</span> <span class="o">:=</span> <span class="nc">Time</span> <span class="nf">fromSeconds:</span> <span class="nv">aNumberOfSeconds</span><span class="p">.</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN144"
>Adding to or Subtracting from a Date</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN147"
>Difference of Two Dates</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN150"
>Day in a Week/Month/Year or Week Number</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN153"
>Parsing Dates and Times from Strings</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN156"
>Printing a Date</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN159"
>High-Resolution Timers</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN162"
>Short Sleeps</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN165"
>Program: hopdelta</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="numbers.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="arrays.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Numbers</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Arrays</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>