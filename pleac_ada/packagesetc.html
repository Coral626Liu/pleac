<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Packages, Libraries, and Modules</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="PLEAC-Ada"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="References and Records"
HREF="referencesandrecords.html"><LINK
REL="NEXT"
TITLE="Classes, Objects, and Ties"
HREF="classesetc.html"><style type="text/css">td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
pre { line-height: 125%; }

  </style></head
><BODY TEXT="#cecece" BGCOLOR="#4f6f6f" LINK="#f5deb3" VLINK="#d5ae83"
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PLEAC-Ada</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="referencesandrecords.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="classesetc.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="PACKAGESETC"
>12. Packages, Libraries, and Modules</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN642"
>Introduction</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">------------------------------------------------------------------------------</span>
<span class="c1">-- Ada packages provide both namespace and encapsulation. As such they act</span>
<span class="c1">-- both as perl packages and perl modules.</span>

<span class="kd">package</span> <span class="nc">Alpha</span> <span class="kr">is</span>
   <span class="n">name</span> <span class="p">:</span> <span class="kt">String</span> <span class="p">:=</span> <span class="s">&quot;First&quot;</span><span class="p">;</span>
<span class="kr">end</span> <span class="nf">Alpha</span><span class="p">;</span>

<span class="kd">package</span> <span class="nc">Omega</span> <span class="kr">is</span>
   <span class="n">name</span> <span class="p">:</span> <span class="kt">String</span> <span class="p">:=</span> <span class="s">&quot;Last&quot;</span><span class="p">;</span>
<span class="kr">end</span> <span class="nf">Omega</span><span class="p">;</span>

<span class="kn">With</span> <span class="nn">Ada.Text_Io</span><span class="p">;</span> <span class="kn">use</span> <span class="nn">Ada.Text_IO</span><span class="p">;</span>
<span class="kn">with</span> <span class="nn">Alpha</span><span class="p">,</span> <span class="n">Omega</span><span class="p">;</span>
<span class="kn">with</span> <span class="nn">Ada.Text_Io</span><span class="p">;</span>

<span class="kd">procedure</span> <span class="nf">main</span> <span class="kr">is</span>
<span class="kr">begin</span>
   <span class="n">Put_Line</span><span class="p">(</span><span class="s">&quot;Alpha is &quot;</span> <span class="o">&amp;</span> <span class="n">Alpha</span><span class="p">.</span><span class="n">name</span> <span class="o">&amp;</span> <span class="s">&quot; ,&quot;</span> <span class="o">&amp;</span>
            <span class="s">&quot;Omega is &quot;</span> <span class="o">&amp;</span> <span class="n">Omega</span><span class="p">.</span><span class="n">name</span><span class="p">);</span>
<span class="kr">end</span> <span class="nf">main</span><span class="p">;</span>
<span class="c1">----------------------</span>
<span class="kn">with</span> <span class="nn">Cards</span><span class="p">;</span> <span class="c1">-- Make the Cards package visible</span>
<span class="kn">use</span> <span class="nn">Cards</span><span class="p">;</span>  <span class="c1">-- Place the Cards package within the current scope</span>
<span class="c1">-- Both operations happen only at compile time.</span>
<span class="c1">----------------------</span>

<span class="kd">package</span> <span class="nc">Cards</span> <span class="kr">is</span>
   <span class="kd">type</span> <span class="kt">Card</span> <span class="kr">is</span> <span class="kd">private</span><span class="p">;</span>
   <span class="c1">-- Print the value of a card</span>
   <span class="kd">procedure</span> <span class="nf">Print</span><span class="p">(</span><span class="nv">Item</span> <span class="p">: </span><span class="nv">in</span> <span class="nv">Card</span><span class="p">);</span>
   <span class="kd">type</span> <span class="kt">Deck</span> <span class="kr">is</span> <span class="kd">private</span><span class="p">;</span>

   <span class="c1">-- Create an initial deck (open a new deck of cards)</span>
   <span class="kd">function</span> <span class="nf">Fill_Deck</span> <span class="nf">return</span> <span class="nf">Deck</span><span class="p">;</span>

   <span class="c1">-- Print all the cards remaining in a deck</span>
   <span class="kd">procedure</span> <span class="nf">Print</span><span class="p">(</span><span class="nv">Item</span> <span class="p">: </span><span class="nv">in</span> <span class="nv">Deck</span><span class="p">);</span>

   <span class="c1">-- Shuffle the deck (randomize the order of the cards in the deck)</span>
   <span class="kd">procedure</span> <span class="nf">Shuffle</span><span class="p">(</span><span class="nv">The_Deck</span> <span class="p">: </span><span class="nv">in</span> <span class="nv">out</span> <span class="nv">Deck</span><span class="p">);</span>

   <span class="c1">-- Deal the next card from the deck</span>
   <span class="kd">procedure</span> <span class="nf">Deal</span><span class="p">(</span><span class="nv">The_Card</span> <span class="p">: </span><span class="nv">out</span> <span class="nv">Card</span><span class="p">;</span> <span class="nv">From</span> <span class="p">: </span><span class="nv">in</span> <span class="nv">out</span> <span class="nv">Deck</span><span class="p">);</span>

   <span class="c1">-- Return the number of cards left in the deck</span>
     <span class="kd">function</span> <span class="nf">Cards_Left</span><span class="p">(</span><span class="nv">In_Deck</span> <span class="p">: </span><span class="nv">Deck</span><span class="p">)</span> <span class="kr">return</span> <span class="kt">Natural</span><span class="p">;</span>

   <span class="c1">-- Deck_Empty exception raised when trying to deal from an empty deck.</span>
   <span class="n">Deck_Empty</span> <span class="p">:</span> <span class="kr">Exception</span><span class="p">;</span>

<span class="kd">private</span>
   <span class="c1">-- Define the face values of the cards</span>
   <span class="kd">type</span> <span class="kt">Pips</span> <span class="kr">is</span> <span class="p">(</span><span class="nv">Two</span><span class="p">,</span> <span class="nv">Three</span><span class="p">,</span> <span class="nv">Four</span><span class="p">,</span> <span class="nv">Five</span><span class="p">,</span> <span class="nv">Six</span><span class="p">,</span> <span class="nv">Seven</span><span class="p">,</span> <span class="nv">Eight</span><span class="p">,</span> <span class="nv">Nine</span><span class="p">,</span> <span class="nv">Ten</span><span class="p">,</span>
                 <span class="nv">Jack</span><span class="p">,</span> <span class="nv">Queen</span><span class="p">,</span> <span class="nv">King</span><span class="p">,</span> <span class="nv">Ace</span><span class="p">);</span>
   <span class="c1">-- Define the card suits</span>
   <span class="kd">type</span> <span class="kt">Suits</span> <span class="kr">is</span> <span class="p">(</span><span class="nv">Hearts</span><span class="p">,</span> <span class="nv">Spades</span><span class="p">,</span> <span class="nv">Clubs</span><span class="p">,</span> <span class="nv">Diamonds</span><span class="p">);</span>

   <span class="c1">-- A card is defined by its combination of face value</span>
   <span class="c1">-- and suit.</span>
   <span class="kd">type</span> <span class="kt">Card</span> <span class="kr">is</span> <span class="kr">record</span>
     <span class="n">Pip</span>  <span class="p">:</span> <span class="n">Pips</span><span class="p">;</span>
     <span class="n">Suit</span> <span class="p">:</span> <span class="n">Suits</span><span class="p">;</span>
   <span class="kr">end record</span><span class="p">;</span>

   <span class="c1">-- Define the number of cards in a standard deck.</span>
   <span class="kd">subtype</span> <span class="kt">Deck_Index</span> <span class="kr">is</span> <span class="kt">integer</span> <span class="kr">range</span> <span class="mf">1.</span><span class="p">.</span><span class="mi">52</span><span class="p">;</span>
   <span class="c1">-- Cards in the deck are accessed through an order list.</span>
   <span class="c1">-- The values in the order list are sorted to create a</span>
   <span class="c1">-- shuffled deck.</span>
   <span class="kd">type</span> <span class="kt">Order_List</span> <span class="kr">is</span> <span class="kr">array</span><span class="p">(</span><span class="n">Deck_Index</span><span class="p">)</span> <span class="kr">of</span> <span class="n">Deck_Index</span><span class="p">;</span>

   <span class="c1">-- A deck is an order list, an index into the order list</span>
   <span class="c1">-- indicating the next card to deal, and a count of the</span>
   <span class="c1">-- number of cards left (not yeat dealt) in the deck.</span>
   <span class="kd">type</span> <span class="kt">Deck</span> <span class="kr">is</span> <span class="kr">record</span>
      <span class="n">This_Order</span> <span class="p">:</span> <span class="n">Order_List</span><span class="p">;</span>
      <span class="n">Deal_Next</span>  <span class="p">:</span> <span class="n">Deck_Index</span> <span class="p">:=</span> <span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">First</span><span class="p">;</span>
      <span class="n">Num_Left</span>   <span class="p">:</span> <span class="kt">Natural</span> <span class="p">:=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="kr">end record</span><span class="p">;</span>
<span class="kr">end</span> <span class="nf">Cards</span><span class="p">;</span>
<span class="c1">-------------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN645"
>Defining a Module's Interface</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">----------------------------------------------------------------------</span>
<span class="c1">-- Cards.ads</span>
<span class="c1">-- Package implementing a standard deck of playing cards</span>
<span class="c1">----------------------------------------------------------------------</span>
<span class="kd">package</span> <span class="nc">Cards</span> <span class="kr">is</span>
   <span class="kd">type</span> <span class="kt">Card</span> <span class="kr">is</span> <span class="kd">private</span><span class="p">;</span>
   <span class="c1">-- Print the value of a card</span>
   <span class="kd">procedure</span> <span class="nf">Print</span><span class="p">(</span><span class="nv">Item</span> <span class="p">: </span><span class="nv">in</span> <span class="nv">Card</span><span class="p">);</span>
   <span class="kd">type</span> <span class="kt">Deck</span> <span class="kr">is</span> <span class="kd">private</span><span class="p">;</span>
   <span class="c1">-- Create an initial deck (open a new deck of cards)</span>
   <span class="kd">function</span> <span class="nf">Fill_Deck</span> <span class="nf">return</span> <span class="nf">Deck</span><span class="p">;</span>

   <span class="c1">-- Print all the cards remaining in a deck</span>
   <span class="kd">procedure</span> <span class="nf">Print</span><span class="p">(</span><span class="nv">Item</span> <span class="p">: </span><span class="nv">in</span> <span class="nv">Deck</span><span class="p">);</span>

   <span class="c1">-- Shuffle the deck (randomize the order of the cards in the deck)</span>
   <span class="kd">procedure</span> <span class="nf">Shuffle</span><span class="p">(</span><span class="nv">The_Deck</span> <span class="p">: </span><span class="nv">in</span> <span class="nv">out</span> <span class="nv">Deck</span><span class="p">);</span>

   <span class="c1">-- Deal the next card from the deck</span>
   <span class="kd">procedure</span> <span class="nf">Deal</span><span class="p">(</span><span class="nv">The_Card</span> <span class="p">: </span><span class="nv">out</span> <span class="nv">Card</span><span class="p">;</span> <span class="nv">From</span> <span class="p">: </span><span class="nv">in</span> <span class="nv">out</span> <span class="nv">Deck</span><span class="p">);</span>

   <span class="c1">-- Return the number of cards left in the deck</span>

   <span class="kd">function</span> <span class="nf">Cards_Left</span><span class="p">(</span><span class="nv">In_Deck</span> <span class="p">: </span><span class="nv">Deck</span><span class="p">)</span> <span class="kr">return</span> <span class="kt">Natural</span><span class="p">;</span>

   <span class="c1">-- Deck_Empty exception raised when trying to deal from an empty deck.</span>
   <span class="n">Deck_Empty</span> <span class="p">:</span> <span class="kr">Exception</span><span class="p">;</span>
<span class="kd">private</span>
   <span class="c1">-- Define the face values of the cards</span>
   <span class="kd">type</span> <span class="kt">Pips</span> <span class="kr">is</span> <span class="p">(</span><span class="nv">Two</span><span class="p">,</span> <span class="nv">Three</span><span class="p">,</span> <span class="nv">Four</span><span class="p">,</span> <span class="nv">Five</span><span class="p">,</span> <span class="nv">Six</span><span class="p">,</span> <span class="nv">Seven</span><span class="p">,</span> <span class="nv">Eight</span><span class="p">,</span> <span class="nv">Nine</span><span class="p">,</span> <span class="nv">Ten</span><span class="p">,</span>
                 <span class="nv">Jack</span><span class="p">,</span> <span class="nv">Queen</span><span class="p">,</span> <span class="nv">King</span><span class="p">,</span> <span class="nv">Ace</span><span class="p">);</span>
   <span class="c1">-- Define the card suits</span>
   <span class="kd">type</span> <span class="kt">Suits</span> <span class="kr">is</span> <span class="p">(</span><span class="nv">Hearts</span><span class="p">,</span> <span class="nv">Spades</span><span class="p">,</span> <span class="nv">Clubs</span><span class="p">,</span> <span class="nv">Diamonds</span><span class="p">);</span>

   <span class="c1">-- A card is defined by its combination of face value</span>
   <span class="c1">-- and suit.</span>
   <span class="kd">type</span> <span class="kt">Card</span> <span class="kr">is</span> <span class="kr">record</span>
     <span class="n">Pip</span>  <span class="p">:</span> <span class="n">Pips</span><span class="p">;</span>
     <span class="n">Suit</span> <span class="p">:</span> <span class="n">Suits</span><span class="p">;</span>
   <span class="kr">end record</span><span class="p">;</span>

   <span class="c1">-- Define the number of cards in a standard deck.</span>
   <span class="kd">subtype</span> <span class="kt">Deck_Index</span> <span class="kr">is</span> <span class="kt">integer</span> <span class="kr">range</span> <span class="mf">1.</span><span class="p">.</span><span class="mi">52</span><span class="p">;</span>

   <span class="c1">-- Cards in the deck are accessed through an order list.</span>
   <span class="c1">-- The values in the order list are sorted to create a</span>
   <span class="c1">-- shuffled deck.</span>

   <span class="kd">type</span> <span class="kt">Order_List</span> <span class="kr">is</span> <span class="kr">array</span><span class="p">(</span><span class="n">Deck_Index</span><span class="p">)</span> <span class="kr">of</span> <span class="n">Deck_Index</span><span class="p">;</span>

   <span class="c1">-- A deck is an order list, an index into the order list</span>
   <span class="c1">-- indicating the next card to deal, and a count of the</span>
   <span class="c1">-- number of cards left (not yeat dealt) in the deck.</span>
   <span class="kd">type</span> <span class="kt">Deck</span> <span class="kr">is</span> <span class="kr">record</span>
      <span class="n">This_Order</span> <span class="p">:</span> <span class="n">Order_List</span><span class="p">;</span>
      <span class="n">Deal_Next</span>  <span class="p">:</span> <span class="n">Deck_Index</span> <span class="p">:=</span> <span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">First</span><span class="p">;</span>
      <span class="n">Num_Left</span>   <span class="p">:</span> <span class="kt">Natural</span> <span class="p">:=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="kr">end record</span><span class="p">;</span>
<span class="kr">end</span> <span class="nf">Cards</span><span class="p">;</span>
<span class="c1">--------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN648"
>Trapping Errors in require or use</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">--------------------</span>
<span class="c1">-- No error trapping required in Ada, since all errors are detected</span>
<span class="c1">-- at compile time.</span>
<span class="c1">--------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN651"
>Delaying use Until Run Time</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">--------------------</span>
<span class="c1">-- Not possible in Ada</span>
<span class="c1">--------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN654"
>Making Variables Private to a Module</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">-------------------</span>
<span class="c1">-- Place the variables in the package implementation, or &quot;body&quot;</span>


<span class="kn">with</span> <span class="nn">Ada.Numerics.Float_Random</span><span class="p">;</span>
<span class="kn">use</span> <span class="nn">Ada.Numerics.Float_Random</span><span class="p">;</span>
<span class="kn">with</span> <span class="nn">Ada.Text_Io</span><span class="p">;</span> <span class="kn">use</span> <span class="nn">Ada.Text_Io</span><span class="p">;</span>

<span class="kd">package</span> <span class="kd">body</span> <span class="nc">Cards</span> <span class="kr">is</span>
   <span class="kd">type</span> <span class="kt">Card_Deck</span> <span class="kr">is</span> <span class="kr">array</span><span class="p">(</span><span class="n">Deck_Index</span><span class="p">)</span> <span class="kr">of</span> <span class="n">Card</span><span class="p">;</span>
<span class="c1">-------------</span>
<span class="c1">-- Internal Function: Initialize</span>
<span class="c1">-- Purpose: Initialize the value of the common Card_Deck</span>
<span class="c1">-------------</span>
   <span class="kd">function</span> <span class="nf">Initialize</span> <span class="nf">return</span> <span class="nf">Card_Deck</span> <span class="kr">is</span>
      <span class="n">Result</span> <span class="p">:</span> <span class="n">Card_Deck</span><span class="p">;</span>
      <span class="n">Temp_Index</span> <span class="p">:</span> <span class="kt">Integer</span> <span class="p">:=</span> <span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">First</span><span class="p">;</span>
   <span class="kr">begin</span>
      <span class="kr">for</span> <span class="n">The_Suit</span> <span class="ow">in</span> <span class="n">Suits</span> <span class="kr">loop</span>
         <span class="kr">for</span> <span class="n">The_Pip</span> <span class="ow">in</span> <span class="n">Pips</span> <span class="kr">loop</span>
            <span class="n">Result</span><span class="p">(</span><span class="n">Temp_Index</span><span class="p">)</span> <span class="p">:=</span> <span class="p">(</span><span class="n">The_Pip</span><span class="p">,</span> <span class="n">The_Suit</span><span class="p">);</span>
            <span class="n">Temp_Index</span> <span class="p">:=</span> <span class="n">Temp_Index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
         <span class="kr">end</span> <span class="kr">loop</span><span class="p">;</span>
      <span class="kr">end</span> <span class="kr">loop</span><span class="p">;</span>
      <span class="kr">return</span> <span class="n">Result</span><span class="p">;</span>
   <span class="kr">end</span> <span class="nf">Initialize</span><span class="p">;</span>

   <span class="no">All_Decks</span> <span class="p">:</span> <span class="kr">constant</span> <span class="n">Card_Deck</span> <span class="p">:=</span> <span class="n">Initialize</span><span class="p">;</span>
<span class="c1">-- private to the Cards package</span>
<span class="c1">----------</span>
<span class="c1">-- Procedure: Print</span>
<span class="c1">-- Purpose: Print the value of a card on standard output</span>
<span class="c1">----------</span>
   <span class="kd">procedure</span> <span class="nf">Print</span><span class="p">(</span><span class="nv">Item</span> <span class="p">: </span><span class="nv">in</span> <span class="nv">Card</span><span class="p">)</span> <span class="kr">is</span>
      <span class="kd">package</span> <span class="nc">Pip_Io</span> <span class="kr">is new</span> <span class="nc">Ada.Text_Io.Enumeration_IO</span><span class="p">(</span>Pips<span class="p">);</span>
      <span class="kd">package</span> <span class="nc">Suit_Io</span> <span class="kr">is new</span> <span class="nc">Ada.Text_Io.Enumeration_Io</span><span class="p">(</span>Suits<span class="p">);</span>
   <span class="kr">begin</span>
      <span class="n">Pip_Io</span><span class="p">.</span><span class="n">Put</span><span class="p">(</span><span class="n">Item</span> <span class="p">=&gt;</span> <span class="n">Item</span><span class="p">.</span><span class="n">Pip</span><span class="p">);</span>
      <span class="n">Put</span><span class="p">(</span><span class="n">Item</span> <span class="p">=&gt;</span> <span class="s">&quot; of &quot;</span><span class="p">);</span>
      <span class="n">Suit_Io</span><span class="p">.</span><span class="n">Put</span><span class="p">(</span><span class="n">Item</span> <span class="p">=&gt;</span> <span class="n">Item</span><span class="p">.</span><span class="n">Suit</span><span class="p">);</span>
      <span class="n">New_Line</span><span class="p">;</span>
   <span class="kr">end</span> <span class="nf">Print</span><span class="p">;</span>
<span class="c1">----------------</span>
<span class="c1">-- Function: Fill_Deck</span>
<span class="c1">-- Purpose: Create a new card deck with all cards in order</span>
<span class="c1">---------------</span>
   <span class="kd">function</span> <span class="nf">Fill_Deck</span> <span class="nf">return</span> <span class="nf">Deck</span> <span class="kr">is</span>
      <span class="n">Result</span> <span class="p">:</span> <span class="n">Deck</span><span class="p">;</span>
      <span class="n">Temp_Index</span> <span class="p">:</span> <span class="kt">Integer</span> <span class="p">:=</span> <span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">First</span><span class="p">;</span>
   <span class="kr">begin</span>
      <span class="kr">for</span> <span class="n">Temp_Index</span> <span class="ow">in</span> <span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">Range</span> <span class="kr">loop</span>
          <span class="n">Result</span><span class="p">.</span><span class="n">This_Order</span><span class="p">(</span><span class="n">Temp_Index</span><span class="p">)</span> <span class="p">:=</span> <span class="n">Temp_Index</span><span class="p">;</span>
      <span class="kr">end</span> <span class="kr">loop</span><span class="p">;</span>
      <span class="n">Result</span><span class="p">.</span><span class="n">Num_Left</span> <span class="p">:=</span> <span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">Last</span><span class="p">;</span>
      <span class="kr">return</span> <span class="n">Result</span><span class="p">;</span>
   <span class="kr">end</span> <span class="nf">Fill_Deck</span><span class="p">;</span>
<span class="c1">--------</span>
<span class="c1">-- Procedure: Print</span>
<span class="c1">-- Purpose: Print all the cards remaining in the deck</span>
<span class="c1">--------</span>
   <span class="kd">procedure</span> <span class="nf">Print</span><span class="p">(</span><span class="nv">Item</span> <span class="p">: </span><span class="nv">in</span> <span class="nv">Deck</span><span class="p">)</span> <span class="kr">is</span>
   <span class="kr">begin</span>
      <span class="kr">if</span> <span class="n">Item</span><span class="p">.</span><span class="n">Num_Left</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="kr">then</span>
         <span class="kr">for</span> <span class="n">Temp_Index</span> <span class="ow">in</span> <span class="n">Item</span><span class="p">.</span><span class="n">Deal_Next</span><span class="p">..</span><span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">Last</span> <span class="kr">loop</span>
            <span class="n">Print</span><span class="p">(</span><span class="n">All_Decks</span><span class="p">(</span><span class="n">Item</span><span class="p">.</span><span class="n">This_Order</span><span class="p">(</span><span class="n">Temp_Index</span><span class="p">)));</span>
         <span class="kr">end</span> <span class="kr">loop</span><span class="p">;</span>
      <span class="kr">else</span>
         <span class="n">Put_Line</span><span class="p">(</span><span class="s">&quot;The deck is empty.&quot;</span><span class="p">);</span>
      <span class="kr">end</span> <span class="kr">if</span><span class="p">;</span>
<span class="kr">end</span> <span class="nf">Print</span><span class="p">;</span>

<span class="c1">-----------</span>
<span class="c1">-- Procedure Swap</span>
<span class="c1">-- Exchange two Deck_Index values</span>
<span class="c1">-------------</span>
   <span class="kd">procedure</span> <span class="nf">Swap</span><span class="p">(</span><span class="nv">Left</span><span class="p">,</span> <span class="nv">Right</span> <span class="p">: </span><span class="nv">in</span> <span class="nv">out</span> <span class="nv">Deck_Index</span><span class="p">)</span> <span class="kr">is</span>
      <span class="n">Temp</span> <span class="p">:</span> <span class="n">Deck_Index</span> <span class="p">:=</span> <span class="n">Left</span><span class="p">;</span>
   <span class="kr">begin</span>
      <span class="n">Left</span> <span class="p">:=</span> <span class="n">Right</span><span class="p">;</span>
      <span class="n">Right</span> <span class="p">:=</span> <span class="n">Temp</span><span class="p">;</span>
   <span class="kr">end</span> <span class="nf">Swap</span><span class="p">;</span>
<span class="c1">------------</span>
<span class="c1">-- Procedure: Shuffle</span>
<span class="c1">-- Purpose: Randomize the This_Order array for a deck to force</span>
<span class="c1">-- random access to the deck of cards</span>
<span class="c1">--  This algorithm is order O(n) and will work with any discrete</span>
<span class="c1">--  index type.</span>
<span class="c1">--  The Ada.Numerics.Float_Random routine is used so that the</span>
<span class="c1">--  random number generator is reset only once per shuffle. This</span>
<span class="c1">--  produces more random results than can be achieved by</span>
<span class="c1">--  resetting the generator for each iteration as would be needed</span>
<span class="c1">--  if the Ada.Numerics.Discrete_Random package had been used.</span>
<span class="c1">-----------</span>
   <span class="kd">procedure</span> <span class="nf">Shuffle</span><span class="p">(</span><span class="nv">The_Deck</span> <span class="p">: </span><span class="nv">in</span> <span class="nv">out</span> <span class="nv">Deck</span><span class="p">)</span> <span class="kr">is</span>
      <span class="kn">use</span> <span class="nn">Ada.Numerics.Float_Random</span><span class="p">;</span>
      <span class="n">Seed</span>       <span class="p">:</span> <span class="kt">Generator</span><span class="p">;</span>
      <span class="n">Max_Search</span> <span class="p">:</span> <span class="n">Deck_Index</span> <span class="p">:=</span> <span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">Pred</span><span class="p">(</span><span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">Last</span><span class="p">);</span>
      <span class="n">Difference</span> <span class="p">:</span> <span class="kt">Integer</span><span class="p">;</span>
      <span class="n">Rand_Value</span> <span class="p">:</span> <span class="kt">Integer</span><span class="p">;</span>
      <span class="n">Swap_Val</span>   <span class="p">:</span> <span class="n">Deck_Index</span><span class="p">;</span>
   <span class="kr">begin</span>
      <span class="n">Reset</span><span class="p">(</span><span class="n">Seed</span><span class="p">);</span>
      <span class="n">The_Deck</span><span class="p">.</span><span class="n">Deal_Next</span> <span class="p">:=</span> <span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">First</span><span class="p">;</span>
      <span class="n">The_Deck</span><span class="p">.</span><span class="n">Num_Left</span>  <span class="p">:=</span> <span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">Last</span><span class="p">;</span>
      <span class="kr">for</span> <span class="n">Index</span> <span class="ow">in</span> <span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">First</span> <span class="p">..</span> <span class="n">Max_Search</span> <span class="kr">loop</span>
         <span class="n">Difference</span> <span class="p">:=</span> <span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">Pos</span><span class="p">(</span><span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">Last</span><span class="p">)</span> <span class="o">-</span>
                       <span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">Pos</span><span class="p">(</span><span class="n">Index</span><span class="p">);</span>
         <span class="n">Rand_Value</span> <span class="p">:=</span> <span class="kt">Integer</span><span class="p">(</span> <span class="n">Random</span><span class="p">(</span><span class="n">Seed</span><span class="p">)</span> <span class="o">*</span> <span class="kt">Float</span><span class="p">(</span><span class="n">Difference</span><span class="p">))</span> <span class="o">+</span>
                       <span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">Pos</span><span class="p">(</span><span class="n">Index</span><span class="p">);</span>
         <span class="n">Swap_Val</span> <span class="p">:=</span> <span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">Val</span><span class="p">(</span><span class="n">Rand_Value</span><span class="p">);</span>
         <span class="n">Swap</span><span class="p">(</span><span class="n">The_Deck</span><span class="p">.</span><span class="n">This_Order</span><span class="p">(</span><span class="n">Index</span><span class="p">),</span> <span class="n">The_Deck</span><span class="p">.</span><span class="n">This_Order</span><span class="p">(</span><span class="n">Swap_Val</span><span class="p">));</span>
      <span class="kr">end</span> <span class="kr">loop</span><span class="p">;</span>
      <span class="n">The_Deck</span><span class="p">.</span><span class="n">Num_Left</span> <span class="p">:=</span> <span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">Last</span><span class="p">;</span>
      <span class="n">The_Deck</span><span class="p">.</span><span class="n">Deal_Next</span> <span class="p">:=</span> <span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">First</span><span class="p">;</span>
   <span class="kr">end</span> <span class="nf">Shuffle</span><span class="p">;</span>

   <span class="kd">procedure</span> <span class="nf">Deal</span><span class="p">(</span><span class="nv">The_Card</span> <span class="p">: </span><span class="nv">out</span> <span class="nv">Card</span><span class="p">;</span> <span class="nv">From</span> <span class="p">: </span><span class="nv">in</span> <span class="nv">out</span> <span class="nv">Deck</span><span class="p">)</span> <span class="kr">is</span>
   <span class="kr">begin</span>
      <span class="kr">if</span> <span class="n">From</span><span class="p">.</span><span class="n">Num_Left</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="kr">then</span>
         <span class="n">The_Card</span> <span class="p">:=</span> <span class="n">All_Decks</span><span class="p">(</span><span class="n">From</span><span class="p">.</span><span class="n">This_Order</span><span class="p">(</span><span class="n">From</span><span class="p">.</span><span class="n">Deal_Next</span><span class="p">));</span>
         <span class="n">From</span><span class="p">.</span><span class="n">Num_Left</span> <span class="p">:=</span> <span class="n">From</span><span class="p">.</span><span class="n">Num_Left</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
         <span class="kr">if</span> <span class="n">From</span><span class="p">.</span><span class="n">Deal_Next</span> <span class="o">&lt;</span> <span class="n">Deck_Index</span><span class="p">&#39;</span><span class="na">Last</span> <span class="kr">then</span>
            <span class="n">From</span><span class="p">.</span><span class="n">Deal_Next</span> <span class="p">:=</span> <span class="n">From</span><span class="p">.</span><span class="n">Deal_Next</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
         <span class="kr">end</span> <span class="kr">if</span><span class="p">;</span>
      <span class="kr">else</span>
         <span class="kr">raise</span> <span class="n">Deck_Empty</span><span class="p">;</span>
      <span class="kr">end</span> <span class="kr">if</span><span class="p">;</span>
   <span class="kr">end</span> <span class="nf">Deal</span><span class="p">;</span>

   <span class="kd">function</span> <span class="nf">Cards_Left</span><span class="p">(</span><span class="nv">In_Deck</span> <span class="p">: </span><span class="nv">Deck</span><span class="p">)</span> <span class="kr">return</span> <span class="kt">Natural</span> <span class="kr">is</span>
   <span class="kr">begin</span>
      <span class="kr">return</span> <span class="n">In_Deck</span><span class="p">.</span><span class="n">Num_Left</span><span class="p">;</span>
   <span class="kr">end</span> <span class="nf">Cards_Left</span><span class="p">;</span>
<span class="kr">end</span> <span class="nf">Cards</span><span class="p">;</span>
<span class="c1">------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN657"
>Determining the Caller's Package</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1"><span class="c1"></span><span class="c1">------------------</span>
<span class="c1">-- Not possible in Ada. All such determinations are done at compile time</span>
<span class="c1">------------------</span></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN660"
>Automating Module Clean-Up</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN663"
>Keeping Your Own Module Directory</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN666"
>Preparing a Module for Distribution</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN669"
>Speeding Module Loading with SelfLoader</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN672"
>Speeding Up Module Loading with Autoloader</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN675"
>Overriding Built-In Functions</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN678"
>Reporting Errors and Warnings Like Built-Ins</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN681"
>Referring to Packages Indirectly</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN684"
>Using h2ph to Translate C #include Files</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN687"
>Using h2xs to Make a Module with C Code</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN690"
>Documenting Your Module with Pod</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN693"
>Building and Installing a CPAN Module</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN696"
>Example: Module Template</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN699"
>Program: Finding Versions and Descriptions of Installed Modules</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="referencesandrecords.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="classesetc.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>References and Records</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Classes, Objects, and Ties</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>