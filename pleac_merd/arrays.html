<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Arrays</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="PLEAC-Merd"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Dates and Times"
HREF="datesandtimes.html"><LINK
REL="NEXT"
TITLE="Hashes"
HREF="hashes.html"></HEAD
><BODY TEXT="#cecece" BGCOLOR="#4f6f6f" LINK="#f5deb3" VLINK="#d5ae83"
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PLEAC-Merd</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="datesandtimes.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="hashes.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="ARRAYS"
>4. Arrays</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN170"
>Introduction</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN173"
>Specifying a List In Your Program</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">a = (&quot;quick&quot;, &quot;brown&quot;, &quot;fox&quot;)
a = &quot;Why are you teasing me?&quot;.words
big_array = &quot;mydatafile&quot;.open(Sep(crlf)).lines

banner = &quot;The Mines of Moria&quot;
banner = q(The Mines of Moria)

name   = &quot;Gandalf&quot;
banner = &quot;Speak, {name}, and enter!&quot;
banner = qq(Speak, {name}, and welcome!)
ships  = &quot;Nińa Pinta Santa María&quot;.words # WRONG
ships  = (&quot;Nińa&quot;, &quot;Pinta&quot;, &quot;Santa María&quot;)</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN176"
>Printing a List with Commas</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">commify_series =
    [] -&gt; &quot;&quot;
    l -&gt;
        l', e = l.pop
        l'.join(&quot;, &quot;) + &quot; and &quot; + e

array = (&quot;red&quot;, &quot;yellow&quot;, &quot;green&quot;)
println(&quot;I have {array.join(&quot; &quot;)} marbles.&quot;) #=&gt; I have red yellow green marbles.</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN179"
>Changing Array Size</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">l.what_about_that_array =
    println(&quot;The array now has {l.size} elements.&quot;)
    println(&quot;The index of the last element is {l.size - 1}.&quot;)
    println(&quot;Element #3 is `{l[3]}'.&quot;)

&quot;Crosby Stills Nash Young&quot;.words.what_about_that_array</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN182"
>Doing Something with Every Element in a List</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">bad_users.each(complain)
bad_users.each(user -&gt; complain(user))

Sys::env.keys.sort.each(var -&gt; &quot;{var}={Sys::env{var}}&quot;.println)
Sys::env.each(var, val -&gt; &quot;{var}={val}&quot;.println) # but non-sorted
Sys::env.sort_by(a,_ , b,_ -&gt; a &lt;=&gt; b).each(var, val -&gt; &quot;{var}={val}&quot;.println)

bad_users.each(user -&gt;
    if user.get_usage &gt; Max_quota then
        complain(user)
)

&quot;who&quot;.popen.lines(s -&gt;
    s.m!(&quot;tchrist&quot;, s.print)
)

df.lines(s -&gt;
    s.words.each(s -&gt; s.rev.println)
)

array.each(item -&gt; &quot;i = {item}&quot;.println)
array.each(--)

a = ( 0.5, 3 ); b = ( 0, 1 )
(a,b).each(l -&gt;
    l.map(a -&gt;
        a *= 7
        &quot;{a} &quot;.print
    )
)</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN185"
>Iterating Over an Array by Reference</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN188"
>Extracting Unique Elements from a List</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">unique = list.uniq

# generate a list of users logged in, removing duplicates
users = &quot;who&quot;.popen.lines.map(m(,&quot;(\S+)&quot;)).sort.uniq
println(&quot;users logged in: {users}&quot;)</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN191"
>Finding Elements in One Array but Not Another</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">difference(a, b)</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN194"
>Computing Union, Intersection, or Difference of Unique Lists</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">union(a, b)
intersection(a, b)
difference(union(a,b), intersection(a,b))</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN197"
>Appending One Array to Another</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">members = (&quot;Time&quot;, &quot;Flies&quot;)
initiates = (&quot;An&quot;, &quot;Arrow&quot;)
members += initiates
# members is now (&quot;Time&quot;, &quot;Flies&quot;, &quot;An&quot;, &quot;Arrow&quot;)

members = (&quot;Time&quot;, &quot;Flies&quot;)
initiates = (&quot;An&quot;, &quot;Arrow&quot;)
members.insert!(2, &quot;Like&quot; + initiates)
# members is now (&quot;Time&quot;, &quot;Flies&quot;, &quot;Like&quot;, &quot;An&quot;, &quot;Arrow&quot;)
members[0] = &quot;Fruit&quot;
members[2,3] = &quot;A&quot;, &quot;Banana&quot;
# members is now (&quot;Fruit&quot;, &quot;Flies&quot;, &quot;Like&quot;, &quot;A&quot;, &quot;Banana&quot;)</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN200"
>Reversing an Array</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">reversed = array.rev

array.rev.each(e -&gt;
    # do something with e
    ()
)</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN203"
>Processing Multiple Elements of an Array</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">a.shift2 = a.shift!, a.shift!
a.pop2 = swap(a.pop!, a.pop!)

friends = &quot;Peter Paul Mary Jim Tim&quot;.words
(this, that) = friends.shift2
# this contains Peter, that has Paul, and
# friends has Mary, Jim, and Tim

beverages = &quot;Dew Jolt Cola Sprite Fresca&quot;.words
pair = beverages.pop2
# pair[0] contains Sprite, pair[1] has Fresca,
# and beverages has (Dew, Jolt, Cola)</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN206"
>Finding the First List Element That Passes a Test</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">highest_engineer = employees.find(employee -&gt; employee.category == &quot;engineer&quot;)
println(&quot;Highest paid engineer is: {highest_engineer.name}&quot;)</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN209"
>Finding All Elements in an Array Matching Certain Criteria</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">bigs = nums.filter(n -&gt; n &gt; 1_000_000)
pigs = users.filter(_, n -&gt; n &gt; 1e7).keys

matching = popen(&quot;who&quot;).lines.filter(m(, &quot;^gnat &quot;))
engineers = employees.filter(employee -&gt; employee.category == &quot;engineer&quot;)

secondary_assistance = applicants.filter(e -&gt; e{Income} &gt;= 26_000 &amp;&amp; e{Income} &lt; 30_000)</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN212"
>Sorting an Array Numerically</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">sorted = sort(non_sorted)               # if non_sorted !&gt; Vector(Int)

# pids is an unsorted array of process IDs
pids.sort.each(println)

println(&quot;Select a process ID to kill:&quot;)
try
    pid = Sys::stdin.line.chomp.to_int
    pid.kill(TERM)
    sleep(2)
    pid.kill(KILL)
with Failed(To_int) -&gt; die(&quot;Exiting ... \n&quot;)

descending = non_sorted.sort_by(a,b -&gt; b &lt;=&gt; a)</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN215"
>Sorting a List by Computable Field</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">ordered = unordered.sort_by(compare)

precomputed = unordered.map(e -&gt; e.compute, e)
ordered_precomputed = precomputed.sort_by(a,b -&gt; a[0] &lt;=&gt; b[0])
ordered = ordered_precomputed.map(a -&gt; a[0])

ordered = unordered.map(e -&gt; e.compute, e)
                   .sort_by(a,b -&gt; a[0] &lt;=&gt; b[0])
                   .map(a -&gt; a[0])

sorted = employees.sort_by(a,b -&gt; a.name &lt;=&gt; b.name || b.age &lt;=&gt; a.age)

# getpwent is an iterator
users = getpwent().to_list
users.sort_by!(a,b -&gt; a{Name} &lt;=&gt; b{Name})
users.each(user -&gt; user{Name}.println)

sorted = names.sort_by(a,b -&gt; a[1] &lt;=&gt; b[1])
sorted = string.sort_by(a,b -&gt; a.size &lt;=&gt; b.size)

sorted_fields = fields.map(e -&gt; e.m(&quot;(\d+)&quot;), e)
                      .sort_by(a,b -&gt; a[0] &lt;=&gt; b[0])
                      .map(a -&gt; a[0])

&quot;/etc/passwd&quot;.open
    .lmap(e -&gt; e.split(&quot;:&quot;)[3,2,0], e)
    .sort_by(a,b -&gt;
        a[1] &lt;=&gt; b[1] ||| # gid
        a[2] &lt;=&gt; b[2] ||| # uid
        a[3] &lt;=&gt; b[3]     # login
    )
    .map(a -&gt; a[0])</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN218"
>Implementing a Circular List</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">circular.unshift!(circular.pop!)        # the last shall be first
circular.push!(circular.shift!)         # and vice versa

l.grab_and_rotate =
    e = l.shift!
    l.push!(e)
    e

processes = (1, 2, 3, 4, 5)
loop
    process = grab_and_rotate(processes)
    println(&quot;Handling process {process}&quot;)
    sleep(1)</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN221"
>Randomizing an Array</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><font color="#f5deb3" size="+1">l.randomize!

l.fisher_yates_shuffle =
    (l.size - 1 .. 0).each(i -&gt;
        j = random(i+1)
        l[i,j] = l[j,i] if i != j
    )

l.naive_shuffle =
    l.each_with_index(_, i -&gt;
        j = random(l.size)
        l[i,j] = l[j,i] if i != j
    )</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN224"
>Program: words</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN227"
>Program: permute</A
></H2
><TABLE
BORDER="0"
BGCOLOR="#2F4F4F"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
></PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="datesandtimes.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="hashes.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Dates and Times</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Hashes</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>